<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"minminmsn.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="MinMinMsn">
<meta property="og:url" content="https://minminmsn.github.io/page/26/index.html">
<meta property="og:site_name" content="MinMinMsn">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jerry Min">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://minminmsn.github.io/page/26/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>MinMinMsn</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">MinMinMsn</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2018/11/09/2018/11/2018-11-09-javascript%E5%AF%B9%E6%AF%94%E4%B8%A4%E4%B8%AA%E7%99%BE%E5%88%86%E6%95%B0%E5%A4%A7%E5%B0%8F/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/09/2018/11/2018-11-09-javascript%E5%AF%B9%E6%AF%94%E4%B8%A4%E4%B8%AA%E7%99%BE%E5%88%86%E6%95%B0%E5%A4%A7%E5%B0%8F/index/" class="post-title-link" itemprop="url">JavaScript对比两个百分数大小</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-09 08:00:00" itemprop="dateCreated datePublished" datetime="2018-11-09T08:00:00+08:00">2018-11-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:29" itemprop="dateModified" datetime="2023-05-26T15:06:29+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/dev/" itemprop="url" rel="index"><span itemprop="name">dev</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>获取标签font内容</li>
<li>判断两个百分比大小</li>
<li>修改标签font内容颜色</li>
<li>httml表格</li>
</ul>
<h3 id="代码样例"><a href="#代码样例" class="headerlink" title="代码样例"></a>代码样例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">*&#123;margin:0;padding:0;&#125;</span><br><span class="line">td &#123;text-align:center;&#125;</span><br><span class="line">tr &#123;text-align:center;&#125;</span><br><span class="line">th &#123;text-align:center;&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt; </span><br><span class="line"></span><br><span class="line">$(document).ready(function()&#123;</span><br><span class="line"></span><br><span class="line">var sumrequest = document.getElementById(&#x27;sumrequest&#x27;).innerText;</span><br><span class="line">var avgrequest = document.getElementById(&#x27;avgrequest&#x27;).innerText;</span><br><span class="line"></span><br><span class="line">var errorcount = document.getElementById(&#x27;errorcount&#x27;).innerText;</span><br><span class="line">var erroravg = document.getElementById(&#x27;erroravg&#x27;).innerText;</span><br><span class="line"></span><br><span class="line">var longtime = document.getElementById(&#x27;longtime&#x27;).innerText;</span><br><span class="line">var longtimeavg = document.getElementById(&#x27;longtimeavg&#x27;).innerText;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//强制转换为数值型</span><br><span class="line">sumrequest = parseFloat(sumrequest);</span><br><span class="line">avgrequest = parseFloat(avgrequest);</span><br><span class="line"></span><br><span class="line">errorcount = parseFloat(errorcount);</span><br><span class="line">erroravg = parseFloat(erroravg);</span><br><span class="line"></span><br><span class="line">longtime = parseFloat(longtime);</span><br><span class="line">longtimeavg = parseFloat(longtimeavg);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if (sumrequest &lt; avgrequest) &#123;</span><br><span class="line">document.getElementById( &quot;sumrequest&quot; ).style.color = &quot;red&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (sumrequest &gt;= avgrequest) &#123;</span><br><span class="line">document.getElementById( &quot;sumrequest&quot; ).style.color = &quot;green&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (longtime &lt; longtimeavg) &#123;</span><br><span class="line">document.getElementById( &quot;longtime&quot; ).style.color = &quot;green&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (longtime &gt;= longtimeavg) &#123;</span><br><span class="line">document.getElementById( &quot;longtime&quot; ).style.color = &quot;red&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (errorcount &lt; erroravg) &#123;</span><br><span class="line">document.getElementById( &quot;errorcount&quot; ).style.color = &quot;green&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (errorcount &gt;= erroravg) &#123;</span><br><span class="line">document.getElementById( &quot;errorcount&quot; ).style.color = &quot;red&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&lt;/script&gt; </span><br><span class="line">&lt;table  width=&quot;100%&quot; height=&quot;100%&quot;  cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;th&gt;&lt;font &gt;请求次数&lt;/font&gt;&lt;/th&gt;</span><br><span class="line">&lt;th&gt;&lt;font &gt;错误次数&lt;/font&gt;&lt;/th&gt;</span><br><span class="line">&lt;th&gt;&lt;font &gt;超长请求&lt;/font&gt;&lt;/th&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td&gt; &lt;font size=&quot;5&quot; id=&quot;sumrequest&quot;&gt; $sumrequest &lt;/font&gt; &lt;font size =&quot;5&quot;&gt;(&lt;/font&gt; &lt;font size=&quot;5&quot; id=&quot;avgrequest&quot;&gt; $avgrequest &lt;/font&gt;&lt;font size =&quot;5&quot;&gt;)&lt;/font&gt; &lt;/td&gt;</span><br><span class="line">&lt;td&gt; &lt;font size=&quot;5&quot; id=&quot;errorcount&quot;&gt; $errorcount &lt;/font&gt; &lt;font size =&quot;5&quot;&gt;(&lt;/font&gt; &lt;font size=&quot;5&quot; id=&quot;erroravg&quot;&gt; $erroravg &lt;/font&gt;&lt;font size =&quot;5&quot;&gt;)&lt;/font&gt; &lt;/td&gt;</span><br><span class="line">&lt;td&gt; &lt;font size=&quot;5&quot; id=&quot;longtime&quot;&gt; $longtime &lt;/font&gt; &lt;font size =&quot;5&quot;&gt;(&lt;/font&gt; &lt;font size=&quot;5&quot; id=&quot;longtimeavg&quot;&gt; $longtimeavg &lt;/font&gt; &lt;font size =&quot;5&quot;&gt;)&lt;/font&gt; &lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2018/11/09/2018/11/2018-11-09-python-elasticsearch-api%E6%93%8D%E4%BD%9Ces%E9%9B%86%E7%BE%A4/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/09/2018/11/2018-11-09-python-elasticsearch-api%E6%93%8D%E4%BD%9Ces%E9%9B%86%E7%BE%A4/index/" class="post-title-link" itemprop="url">Python--Elasticsearch-API操作ES集群</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-09 08:00:00" itemprop="dateCreated datePublished" datetime="2018-11-09T08:00:00+08:00">2018-11-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:29" itemprop="dateModified" datetime="2023-05-26T15:06:29+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bigdata/" itemprop="url" rel="index"><span itemprop="name">bigdata</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a><strong>环境</strong></h3><ul>
<li>Centos 7.4</li>
<li>Python 2.7</li>
<li>Pip 2.7 MySQL-python 1.2.5 Elasticsearc 6.3.1</li>
<li>Elasitcsearch6.3.2</li>
</ul>
<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a><strong>知识点</strong></h3><ul>
<li>调用Python Elasticsearh API</li>
<li>Python Mysqldb使用</li>
<li>DSL查询与聚合</li>
<li>Python 列表操作</li>
</ul>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a><strong>代码</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">#minyt 2018.9.1</span><br><span class="line">#获取24小时内出现的模块次数</span><br><span class="line"># 该程序通过elasticsearch python client 获取相关精简数据，可以计算请求数、超时数、错误数、正确率、错误率等等</span><br><span class="line">import MySQLdb</span><br><span class="line">from elasticsearch import Elasticsearch</span><br><span class="line">from elasticsearch import helpers</span><br><span class="line"></span><br><span class="line">#定义elasticsearch集群索引名</span><br><span class="line">index_name = &quot;logstash-nginxlog-*&quot;</span><br><span class="line"></span><br><span class="line">#实例化Elasticsearch类，并设置超时间为180秒，默认是10秒的，如果数据量很大，时间设置更长一些</span><br><span class="line">es = Elasticsearch([&#x27;elasticsearch01&#x27;,&#x27;elasticsearch02&#x27;,&#x27;elasticsearch03&#x27;],timeout=180)</span><br><span class="line"></span><br><span class="line">#DSL（领域特定语言）查询语法，查询top50 sname的排列次数</span><br><span class="line">data_sname = &#123;</span><br><span class="line">  &quot;aggs&quot;: &#123;</span><br><span class="line">    &quot;2&quot;: &#123;</span><br><span class="line">      &quot;terms&quot;: &#123;</span><br><span class="line">        &quot;field&quot;: &quot;apistatus.sname.keyword&quot;,</span><br><span class="line">        &quot;size&quot;: 100,</span><br><span class="line">        &quot;order&quot;: &#123;</span><br><span class="line">          &quot;_count&quot;: &quot;desc&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;size&quot;: 0,</span><br><span class="line">  &quot;_source&quot;: &#123;</span><br><span class="line">    &quot;excludes&quot;: []</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;stored_fields&quot;: [</span><br><span class="line">    &quot;*&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;script_fields&quot;: &#123;&#125;,</span><br><span class="line">  &quot;docvalue_fields&quot;: [</span><br><span class="line">    &quot;@timestamp&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;bool&quot;: &#123;</span><br><span class="line">      &quot;must&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;match_all&quot;: &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;range&quot;: &#123;</span><br><span class="line">            &quot;@timestamp&quot;: &#123;</span><br><span class="line">              &quot;gte&quot; : &quot;now-24h/h&quot;,</span><br><span class="line">              &quot;lt&quot; :  &quot;now/h&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;filter&quot;: [],</span><br><span class="line">      &quot;should&quot;: [],</span><br><span class="line">      &quot;must_not&quot;: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#按照DSL（特定领域语言）语法查询获取数据</span><br><span class="line">def get_original_data():</span><br><span class="line">    try:</span><br><span class="line">        #根据上面条件搜索数据</span><br><span class="line">        res = es.search(</span><br><span class="line">            index=index_name,</span><br><span class="line">            size=0,</span><br><span class="line">            body=data_sname</span><br><span class="line">        )</span><br><span class="line">        return res</span><br><span class="line"></span><br><span class="line">    except:</span><br><span class="line">        print &quot;get original data failure&quot;</span><br><span class="line"></span><br><span class="line">#初始化数据库</span><br><span class="line">def init_mysql():</span><br><span class="line">    # 打开数据库连接</span><br><span class="line">    db = MySQLdb.connect(&quot;localhost&quot;, &quot;myuser&quot;, &quot;mypassword&quot;, &quot;mydb&quot;, charset=&#x27;utf8&#x27; )</span><br><span class="line"></span><br><span class="line">    # 使用cursor()方法获取操作游标 </span><br><span class="line">    cursor = db.cursor()</span><br><span class="line"></span><br><span class="line">    # SQL 更新语句</span><br><span class="line">    sql = &quot;update appname set count=0&quot;</span><br><span class="line">    try:</span><br><span class="line">        # 执行SQL语句</span><br><span class="line">        cursor.execute(sql)</span><br><span class="line">        # 提交到数据库执行</span><br><span class="line">        db.commit()</span><br><span class="line">    except:</span><br><span class="line">        # 发生错误时回滚</span><br><span class="line">        db.rollback()</span><br><span class="line"></span><br><span class="line">    # 关闭数据库连接</span><br><span class="line">    db.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def updata_mysql(sname_count,sname_list):</span><br><span class="line">    # 打开数据库连接</span><br><span class="line">       db = MySQLdb.connect(&quot;localhost&quot;, &quot;myuser&quot;, &quot;mypassword&quot;, &quot;mydb&quot;, charset=&#x27;utf8&#x27; )</span><br><span class="line"></span><br><span class="line">    # 使用cursor()方法获取操作游标 </span><br><span class="line">    cursor = db.cursor()</span><br><span class="line"></span><br><span class="line">    # SQL 更新语句</span><br><span class="line">    sql = &quot;update appname set count=%d where sname = &#x27;%s&#x27;&quot; % (sname_count,sname_list)</span><br><span class="line">    try:</span><br><span class="line">        # 执行SQL语句</span><br><span class="line">        cursor.execute(sql)</span><br><span class="line">        # 提交到数据库执行</span><br><span class="line">        db.commit()</span><br><span class="line">    except:</span><br><span class="line">        # 发生错误时回滚</span><br><span class="line">        db.rollback()</span><br><span class="line"></span><br><span class="line">    # 关闭数据库连接</span><br><span class="line">    db.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#根据Index数据结构通过Elasticsearch Python Client上传数据到新的Index</span><br><span class="line">def import_process_data():</span><br><span class="line">    try:</span><br><span class="line">        #列表形式显示结果</span><br><span class="line">        res = get_original_data()</span><br><span class="line">        #print res</span><br><span class="line">        res_list = res.get(&#x27;aggregations&#x27;).get(&#x27;2&#x27;).get(&#x27;buckets&#x27;)</span><br><span class="line">        #print res_list</span><br><span class="line"></span><br><span class="line">        #初始化数据库</span><br><span class="line">        init_mysql()</span><br><span class="line"></span><br><span class="line">        #获取24小时内出现的SNAME </span><br><span class="line">        for value in res_list:</span><br><span class="line">            sname_list = value.get(&#x27;key&#x27;)</span><br><span class="line">            sname_count = value.get(&#x27;doc_count&#x27;)</span><br><span class="line">            print sname_list,sname_count</span><br><span class="line">            #更新sname_status值</span><br><span class="line">            updata_mysql(sname_count,sname_list)</span><br><span class="line"></span><br><span class="line">    except Exception, e:</span><br><span class="line">        print repr(e)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    import_process_data()</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>关键是DSL语法的编写涉及查询与聚合可以通过kibana的visualize或者devtool先测试出正确语法，然后结合python对列表、字典、除法、字符串等操作即可。下面汇总下各个算法： + 总请求 http_host.keyword: api.mydomain.com</p>
<ul>
<li><p>超长请求 http_host.keyword: api.mydomain.com AND request_time: [1 TO 600] NOT apistatus.status.keyword:*错误</p>
</li>
<li><p>错误请求 apistatus.status.keyword:*错误 AND (http_host.keyword: api.mydomain.com OR http_host.keyword: api.yourdomain.com )</p>
</li>
<li><p>请求健康度 域名与request_time聚合，域名请求时间小于3秒的次数除以总请求次数对应各个域名健康度</p>
</li>
<li><p>请求正确率 域名与http状态码聚合，域名http状态码为200的次数除以域名总请求数对应各个域名的请求正确率</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2018/11/09/2018/11/2018-11-09-%E4%BD%BF%E7%94%A8elk%E5%88%86%E6%9E%90%E8%85%BE%E8%AE%AF%E4%BA%91clb%E6%97%A5%E5%BF%97/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/09/2018/11/2018-11-09-%E4%BD%BF%E7%94%A8elk%E5%88%86%E6%9E%90%E8%85%BE%E8%AE%AF%E4%BA%91clb%E6%97%A5%E5%BF%97/index/" class="post-title-link" itemprop="url">使用ELK分析腾讯云CLB日志</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-09 08:00:00" itemprop="dateCreated datePublished" datetime="2018-11-09T08:00:00+08:00">2018-11-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:29" itemprop="dateModified" datetime="2023-05-26T15:06:29+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bigdata/" itemprop="url" rel="index"><span itemprop="name">bigdata</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="缘起"><a href="#缘起" class="headerlink" title="缘起"></a><strong>缘起</strong></h3><p>最近在使用腾讯云，想对访问日志进行收集与分析，发现CLB（负责均衡）日志只能保存到COS上面，而且是每个CLB没小时压发送个gz压缩包到COS。</p>
<h3 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a><strong>实现方式</strong></h3><p>CLB配置日志存储到COS，Filebeat客户端CVM安装cosfs挂载COS，并配置Filebeat输出到Elasticsearch集群，最后通过Kibana和Grafana分析。</p>
<h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a><strong>参考文档</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">https://www.elastic.co/guide/en/logstash/current/lookup-enrichment.html</span><br><span class="line">https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-reference-yml.html</span><br><span class="line">https://www.elastic.co/guide/en/beats/filebeat/current/configuration-template.html</span><br><span class="line">https://www.elastic.co/guide/en/logstash-versioned-plugins/versioned_plugin_docs/v4.1.5-plugins-inputs-file.html</span><br><span class="line">https://www.elastic.co/guide/en/logstash-versioned-plugins/versioned_plugin_docs/v3.1.0-plugins-filters-translate.html</span><br><span class="line">https://www.elastic.co/guide/en/logstash-versioned-plugins/versioned_plugin_docs/v1.0.4-plugins-filters-jdbc_streaming.html</span><br><span class="line">https://www.elastic.co/guide/en/logstash-versioned-plugins/versioned_plugin_docs/v9.2.0-plugins-outputs-elasticsearch.html</span><br><span class="line">/usr/share/logstash/vendor/bundle/jruby/2.3.0/gems/logstash-output-elasticsearch-9.2.0-java/lib/logstash/outputs/elasticsearch/elasticsearch-template-es6x.json</span><br></pre></td></tr></table></figure>

<h3 id="实施步骤"><a href="#实施步骤" class="headerlink" title="实施步骤"></a><strong>实施步骤</strong></h3><h5 id="1-COS创建bucket用于存储CLB日志"><a href="#1-COS创建bucket用于存储CLB日志" class="headerlink" title="1. COS创建bucket用于存储CLB日志"></a>1. COS创建bucket用于存储CLB日志</h5><h5 id="2-CLB配置存储日志到COS"><a href="#2-CLB配置存储日志到COS" class="headerlink" title="2. CLB配置存储日志到COS"></a>2. CLB配置存储日志到COS</h5><p>日志访问：当前仅支持HTTP&#x2F;HTTPS访问日志的收集，腾讯云默认在CLB底层为客户保留3天的日志；开启日志访问后，日志将存入COS，支持更长期地存储，详情请见<a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/214/10329%E3%80%82">https://cloud.tencent.com/document/product/214/10329。</a></p>
<h5 id="3-客户端配置COSFS工具"><a href="#3-客户端配置COSFS工具" class="headerlink" title="3. 客户端配置COSFS工具"></a>3. 客户端配置COSFS工具</h5><p>安装Filebeat或Logstash客户端上安装COSFS工具，挂载COS，安装参考<a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/436/6883%E3%80%82">https://cloud.tencent.com/document/product/436/6883。</a></p>
<h5 id="4-客户端配置传输日志到Elasticsearch集群"><a href="#4-客户端配置传输日志到Elasticsearch集群" class="headerlink" title="4. 客户端配置传输日志到Elasticsearch集群"></a>4. 客户端配置传输日志到Elasticsearch集群</h5><p>a. Logstash主要配置信息如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">   file&#123;</span><br><span class="line">      path =&gt; &quot;/nginxlog/clb_log_bj/*/*/*&quot;   #监控日志路径，可通配</span><br><span class="line">      exclude =&gt; &quot;*.gz&quot;                      #排除掉gz压缩文件，因为腾讯CLB日志没小时生成一个压缩包，这边需要脚本自动解压缩</span><br><span class="line">      codec =&gt; &quot;json&quot;                        #日志格式为JSON</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">filter &#123;</span><br><span class="line">    jdbc_streaming&#123;                          #使用jdbc_streaming filter是给域名加上部门，默认CLB日志没有部门字段，也可以用translate filter但是不方便动态更新</span><br><span class="line">        jdbc_driver_library =&gt; &quot;/etc/logstash/mysql-connector.jar&quot;</span><br><span class="line">        jdbc_driver_class =&gt; &quot;com.mysql.jdbc.Driver&quot;</span><br><span class="line">        jdbc_connection_string =&gt; &quot;jdbc:mysql://localhost:3306/domain&quot;</span><br><span class="line">        jdbc_user =&gt; &quot;domain_rw&quot;</span><br><span class="line">        jdbc_password =&gt; &quot;domain_password&quot;</span><br><span class="line">        statement =&gt; &quot;select ifnull((select department from domain.domain WHERE url = :server_name),CONVERT(&#x27;其他&#x27; USING utf8)) as department&quot;</span><br><span class="line">        parameters =&gt; &#123; &quot;server_name&quot; =&gt; &quot;server_name&quot;&#125;</span><br><span class="line">        target =&gt; &quot;department&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output &#123;</span><br><span class="line">   elasticsearch &#123;</span><br><span class="line">       hosts =&gt; [&quot;elasticsearch01:9200&quot;,&quot;elasticsearch02:9200&quot;,&quot;elasticsearch03:9200&quot;]</span><br><span class="line">       index =&gt; &quot;logstash-nginxlog-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">       manage_template =&gt; true</span><br><span class="line">       template_overwrite =&gt; true</span><br><span class="line">       template_name =&gt; &quot;nginx_template&quot;                         #自定义模板名字</span><br><span class="line">       template =&gt; &quot;/etc/logstash/templates/nginx_template&quot;      #自定义模板路径</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>b. Nginx模板配置信息如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;template&quot; : &quot;logstash-nginxlog-*&quot;,     #在默认logstash模板上面修改的</span><br><span class="line">&quot;version&quot; : 999,</span><br><span class="line">&quot;settings&quot; : &#123;                          #主要是改动index分片，副本，其他也可以更加需要修改</span><br><span class="line">&quot;index.refresh_interval&quot; : &quot;60s&quot;,</span><br><span class="line">&quot;index.number_of_shards&quot;: &quot;3&quot;,</span><br><span class="line">&quot;index.number_of_replicas&quot;: &quot;1&quot;</span><br><span class="line">&#125;,</span><br><span class="line">&quot;mappings&quot; : &#123;</span><br><span class="line">&quot;_default_&quot; : &#123;</span><br><span class="line">&quot;dynamic_templates&quot; : [ &#123;</span><br><span class="line">&quot;message_field&quot; : &#123;</span><br><span class="line">&quot;path_match&quot; : &quot;message&quot;,</span><br><span class="line">&quot;match_mapping_type&quot; : &quot;string&quot;,</span><br><span class="line">&quot;mapping&quot; : &#123;</span><br><span class="line">&quot;type&quot; : &quot;text&quot;,</span><br><span class="line">&quot;norms&quot; : false</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">&quot;string_fields&quot; : &#123;</span><br><span class="line">&quot;match&quot; : &quot;*&quot;,</span><br><span class="line">&quot;match_mapping_type&quot; : &quot;string&quot;,</span><br><span class="line">&quot;mapping&quot; : &#123;</span><br><span class="line">&quot;type&quot; : &quot;text&quot;, &quot;norms&quot; : false,</span><br><span class="line">&quot;fields&quot; : &#123;</span><br><span class="line">&quot;keyword&quot; : &#123; &quot;type&quot;: &quot;keyword&quot;, &quot;ignore_above&quot;: 256 &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; ],</span><br><span class="line">&quot;properties&quot; : &#123;</span><br><span class="line">&quot;@timestamp&quot;: &#123; &quot;type&quot;: &quot;date&quot;&#125;,</span><br><span class="line">&quot;@version&quot;: &#123; &quot;type&quot;: &quot;keyword&quot;&#125;,</span><br><span class="line">&quot;geoip&quot; : &#123;</span><br><span class="line">&quot;dynamic&quot;: true,</span><br><span class="line">&quot;properties&quot; : &#123;</span><br><span class="line">&quot;ip&quot;: &#123; &quot;type&quot;: &quot;ip&quot; &#125;,</span><br><span class="line">&quot;location&quot; : &#123; &quot;type&quot; : &quot;geo_point&quot; &#125;,</span><br><span class="line">&quot;latitude&quot; : &#123; &quot;type&quot; : &quot;half_float&quot; &#125;,</span><br><span class="line">&quot;longitude&quot; : &#123; &quot;type&quot; : &quot;half_float&quot; &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>c. Filebeat主配置文件如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">filebeat.inputs:                     #默认简单需求filebeat就能满足，记录下</span><br><span class="line">- type: log</span><br><span class="line">enabled: true</span><br><span class="line">paths:</span><br><span class="line">- /nginxlog/clb_log_bj/*/*/*         #监控日志路径</span><br><span class="line"></span><br><span class="line">exclude_files: [&#x27;.gz/pre&gt;]           #排除压缩文件</span><br><span class="line"></span><br><span class="line">json.message_key: log                #如下三行设置json格式</span><br><span class="line">json.keys_under_root: true</span><br><span class="line">json.overwrite_keys: true</span><br><span class="line"></span><br><span class="line">filebeat.config.modules:             #设置日志字段，可以删除不需要的字段信息</span><br><span class="line">path: $&#123;path.config&#125;/modules.d/*.yml</span><br><span class="line">reload.enabled: true</span><br><span class="line"></span><br><span class="line">setup.template.enabled: true         #如下设置索引名称、分片、副本信息</span><br><span class="line">setup.template.name: &quot;filebeat-nginxlog&quot;</span><br><span class="line">setup.template.pattern: &quot;filebeat-nginxlog-*&quot;</span><br><span class="line">setup.template.overwrite: true</span><br><span class="line">setup.template.settings:</span><br><span class="line">index.number_of_shards: 3</span><br><span class="line">index.number_of_replicas: 1</span><br><span class="line"></span><br><span class="line">output.elasticsearch:                #如下输出elasticsearch集群配置</span><br><span class="line">hosts: [&quot;elasticsearch01:9200&quot;,&quot;elasticsearch02:9200&quot;,&quot;elasticsearch03:9200&quot;]</span><br><span class="line">index: &quot;filebeat-nginxlog-%&#123;+yyyy.MM.dd&#125;&quot;</span><br></pre></td></tr></table></figure>

<h5 id="5-Grafana或者Kibana制图"><a href="#5-Grafana或者Kibana制图" class="headerlink" title="5. Grafana或者Kibana制图"></a>5. Grafana或者Kibana制图</h5><p>a. Grafana制图模板如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;__inputs&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;name&quot;: &quot;DS_LOGSTASH-NGINXLOG&quot;,</span><br><span class="line">      &quot;label&quot;: &quot;logstash-nginxlog&quot;,</span><br><span class="line">      &quot;description&quot;: &quot;&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;datasource&quot;,</span><br><span class="line">      &quot;pluginId&quot;: &quot;elasticsearch&quot;,</span><br><span class="line">      &quot;pluginName&quot;: &quot;Elasticsearch&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;__requires&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;datasource&quot;,</span><br><span class="line">      &quot;id&quot;: &quot;elasticsearch&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Elasticsearch&quot;,</span><br><span class="line">      &quot;version&quot;: &quot;5.0.0&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;grafana&quot;,</span><br><span class="line">      &quot;id&quot;: &quot;grafana&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Grafana&quot;,</span><br><span class="line">      &quot;version&quot;: &quot;5.0.1&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;panel&quot;,</span><br><span class="line">      &quot;id&quot;: &quot;grafana-piechart-panel&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Pie Chart&quot;,</span><br><span class="line">      &quot;version&quot;: &quot;1.3.3&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;panel&quot;,</span><br><span class="line">      &quot;id&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;Graph&quot;,</span><br><span class="line">      &quot;version&quot;: &quot;5.0.0&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;annotations&quot;: &#123;</span><br><span class="line">    &quot;list&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;builtIn&quot;: 1,</span><br><span class="line">        &quot;datasource&quot;: &quot;-- Grafana --&quot;,</span><br><span class="line">        &quot;enable&quot;: true,</span><br><span class="line">        &quot;hide&quot;: true,</span><br><span class="line">        &quot;iconColor&quot;: &quot;rgba(0, 211, 255, 1)&quot;,</span><br><span class="line">        &quot;name&quot;: &quot;Annotations &amp; Alerts&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;dashboard&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;editable&quot;: true,</span><br><span class="line">  &quot;gnetId&quot;: null,</span><br><span class="line">  &quot;graphTooltip&quot;: 0,</span><br><span class="line">  &quot;id&quot;: null,</span><br><span class="line">  &quot;iteration&quot;: 1534240475758,</span><br><span class="line">  &quot;links&quot;: [],</span><br><span class="line">  &quot;panels&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;collapsed&quot;: false,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 1,</span><br><span class="line">        &quot;w&quot;: 24,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 16,</span><br><span class="line">      &quot;panels&quot;: [],</span><br><span class="line">      &quot;repeat&quot;: &quot;department&quot;,</span><br><span class="line">      &quot;title&quot;: &quot;$department&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;row&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;breakPoint&quot;: &quot;50%&quot;,</span><br><span class="line">      &quot;cacheTimeout&quot;: null,</span><br><span class="line">      &quot;combine&quot;: &#123;</span><br><span class="line">        &quot;label&quot;: &quot;Others&quot;,</span><br><span class="line">        &quot;threshold&quot;: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;datasource&quot;: &quot;$&#123;DS_LOGSTASH-NGINXLOG&#125;&quot;,</span><br><span class="line">      &quot;description&quot;: &quot;&quot;,</span><br><span class="line">      &quot;fontSize&quot;: &quot;80%&quot;,</span><br><span class="line">      &quot;format&quot;: &quot;none&quot;,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 6,</span><br><span class="line">      &quot;interval&quot;: null,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;percentage&quot;: true,</span><br><span class="line">        &quot;percentageDecimals&quot;: 2,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;legendType&quot;: &quot;Right side&quot;,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;maxDataPoints&quot;: 3,</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;pieType&quot;: &quot;pie&quot;,</span><br><span class="line">      &quot;strokeWidth&quot;: &quot;0&quot;,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;bucketAggs&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;fake&quot;: true,</span><br><span class="line">              &quot;field&quot;: &quot;http_host.keyword&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;3&quot;,</span><br><span class="line">              &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;min_doc_count&quot;: 1,</span><br><span class="line">                &quot;order&quot;: &quot;desc&quot;,</span><br><span class="line">                &quot;orderBy&quot;: &quot;_count&quot;,</span><br><span class="line">                &quot;size&quot;: &quot;10&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;type&quot;: &quot;terms&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;field&quot;: &quot;@timestamp&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;2&quot;,</span><br><span class="line">              &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;interval&quot;: &quot;auto&quot;,</span><br><span class="line">                &quot;min_doc_count&quot;: 0,</span><br><span class="line">                &quot;trimEdges&quot;: 0</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;type&quot;: &quot;date_histogram&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;expr&quot;: &quot;&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;intervalFactor&quot;: 1,</span><br><span class="line">          &quot;metrics&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;field&quot;: &quot;select field&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;1&quot;,</span><br><span class="line">              &quot;type&quot;: &quot;count&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;query&quot;: &quot;http_host.keyword:$hostname  AND status.keyword:$status  AND  upstream_addr.keyword:$upstream_addr  AND department.department.keyword:$department&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;timeField&quot;: &quot;@timestamp&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;title&quot;: &quot;域名访问比例图&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;grafana-piechart-panel&quot;,</span><br><span class="line">      &quot;valueName&quot;: &quot;total&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;breakPoint&quot;: &quot;50%&quot;,</span><br><span class="line">      &quot;cacheTimeout&quot;: null,</span><br><span class="line">      &quot;combine&quot;: &#123;</span><br><span class="line">        &quot;label&quot;: &quot;Others&quot;,</span><br><span class="line">        &quot;threshold&quot;: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;datasource&quot;: &quot;$&#123;DS_LOGSTASH-NGINXLOG&#125;&quot;,</span><br><span class="line">      &quot;fontSize&quot;: &quot;80%&quot;,</span><br><span class="line">      &quot;format&quot;: &quot;none&quot;,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 9,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 12,</span><br><span class="line">        &quot;y&quot;: 1</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 4,</span><br><span class="line">      &quot;interval&quot;: null,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;percentage&quot;: true,</span><br><span class="line">        &quot;percentageDecimals&quot;: 2,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;sortDesc&quot;: true,</span><br><span class="line">        &quot;values&quot;: false</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;legendType&quot;: &quot;Right side&quot;,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;maxDataPoints&quot;: 3,</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;connected&quot;,</span><br><span class="line">      &quot;pieType&quot;: &quot;pie&quot;,</span><br><span class="line">      &quot;strokeWidth&quot;: &quot;0&quot;,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;bucketAggs&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;fake&quot;: true,</span><br><span class="line">              &quot;field&quot;: &quot;status.keyword&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;3&quot;,</span><br><span class="line">              &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;min_doc_count&quot;: 1,</span><br><span class="line">                &quot;order&quot;: &quot;desc&quot;,</span><br><span class="line">                &quot;orderBy&quot;: &quot;_count&quot;,</span><br><span class="line">                &quot;size&quot;: &quot;10&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;type&quot;: &quot;terms&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;field&quot;: &quot;@timestamp&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;2&quot;,</span><br><span class="line">              &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;interval&quot;: &quot;auto&quot;,</span><br><span class="line">                &quot;min_doc_count&quot;: 0,</span><br><span class="line">                &quot;trimEdges&quot;: 0</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;type&quot;: &quot;date_histogram&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;expr&quot;: &quot;&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;intervalFactor&quot;: 1,</span><br><span class="line">          &quot;metrics&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;field&quot;: &quot;select field&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;1&quot;,</span><br><span class="line">              &quot;type&quot;: &quot;count&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;query&quot;: &quot;http_host.keyword:$hostname  AND status.keyword:$status  AND  upstream_addr.keyword:$upstream_addr  AND department.department.keyword:$department&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;timeField&quot;: &quot;@timestamp&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;title&quot;: &quot;状态码比例图&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;grafana-piechart-panel&quot;,</span><br><span class="line">      &quot;valueName&quot;: &quot;total&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: false,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$&#123;DS_LOGSTASH-NGINXLOG&#125;&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 7,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 10</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 2,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: false,</span><br><span class="line">        &quot;current&quot;: false,</span><br><span class="line">        &quot;max&quot;: false,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: false</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: true,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;null&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;bucketAggs&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;fake&quot;: true,</span><br><span class="line">              &quot;field&quot;: &quot;http_host.keyword&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;3&quot;,</span><br><span class="line">              &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;min_doc_count&quot;: 1,</span><br><span class="line">                &quot;order&quot;: &quot;desc&quot;,</span><br><span class="line">                &quot;orderBy&quot;: &quot;_count&quot;,</span><br><span class="line">                &quot;size&quot;: &quot;10&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;type&quot;: &quot;terms&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;field&quot;: &quot;@timestamp&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;2&quot;,</span><br><span class="line">              &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;interval&quot;: &quot;auto&quot;,</span><br><span class="line">                &quot;min_doc_count&quot;: 0,</span><br><span class="line">                &quot;trimEdges&quot;: 0</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;type&quot;: &quot;date_histogram&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;expr&quot;: &quot;&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;intervalFactor&quot;: 1,</span><br><span class="line">          &quot;legendFormat&quot;: &quot;&quot;,</span><br><span class="line">          &quot;metrics&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;field&quot;: &quot;select field&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;1&quot;,</span><br><span class="line">              &quot;type&quot;: &quot;count&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;query&quot;: &quot;http_host.keyword:$hostname  AND status.keyword:$status  AND  upstream_addr.keyword:$upstream_addr  AND department.department.keyword:$department&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;timeField&quot;: &quot;@timestamp&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;域名访问趋势TOP10&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;aliasColors&quot;: &#123;&#125;,</span><br><span class="line">      &quot;bars&quot;: true,</span><br><span class="line">      &quot;dashLength&quot;: 10,</span><br><span class="line">      &quot;dashes&quot;: false,</span><br><span class="line">      &quot;datasource&quot;: &quot;$&#123;DS_LOGSTASH-NGINXLOG&#125;&quot;,</span><br><span class="line">      &quot;fill&quot;: 1,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 7,</span><br><span class="line">        &quot;w&quot;: 12,</span><br><span class="line">        &quot;x&quot;: 12,</span><br><span class="line">        &quot;y&quot;: 10</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;hideTimeOverride&quot;: false,</span><br><span class="line">      &quot;id&quot;: 18,</span><br><span class="line">      &quot;legend&quot;: &#123;</span><br><span class="line">        &quot;alignAsTable&quot;: true,</span><br><span class="line">        &quot;avg&quot;: true,</span><br><span class="line">        &quot;current&quot;: false,</span><br><span class="line">        &quot;max&quot;: true,</span><br><span class="line">        &quot;min&quot;: false,</span><br><span class="line">        &quot;rightSide&quot;: true,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;total&quot;: false,</span><br><span class="line">        &quot;values&quot;: true</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;lines&quot;: false,</span><br><span class="line">      &quot;linewidth&quot;: 1,</span><br><span class="line">      &quot;links&quot;: [],</span><br><span class="line">      &quot;nullPointMode&quot;: &quot;null&quot;,</span><br><span class="line">      &quot;percentage&quot;: false,</span><br><span class="line">      &quot;pointradius&quot;: 5,</span><br><span class="line">      &quot;points&quot;: false,</span><br><span class="line">      &quot;renderer&quot;: &quot;flot&quot;,</span><br><span class="line">      &quot;seriesOverrides&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;alias&quot;: &quot;Count&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;spaceLength&quot;: 10,</span><br><span class="line">      &quot;stack&quot;: false,</span><br><span class="line">      &quot;steppedLine&quot;: false,</span><br><span class="line">      &quot;targets&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;bucketAggs&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;field&quot;: &quot;@timestamp&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;2&quot;,</span><br><span class="line">              &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;interval&quot;: &quot;auto&quot;,</span><br><span class="line">                &quot;min_doc_count&quot;: 0,</span><br><span class="line">                &quot;trimEdges&quot;: 0</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;type&quot;: &quot;date_histogram&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;expr&quot;: &quot;&quot;,</span><br><span class="line">          &quot;format&quot;: &quot;time_series&quot;,</span><br><span class="line">          &quot;intervalFactor&quot;: 1,</span><br><span class="line">          &quot;metrics&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;field&quot;: &quot;request_time&quot;,</span><br><span class="line">              &quot;id&quot;: &quot;1&quot;,</span><br><span class="line">              &quot;meta&quot;: &#123;&#125;,</span><br><span class="line">              &quot;settings&quot;: &#123;</span><br><span class="line">                &quot;percents&quot;: [</span><br><span class="line">                  &quot;90&quot;,</span><br><span class="line">                  &quot;95&quot;,</span><br><span class="line">                  &quot;99&quot;,</span><br><span class="line">                  &quot;99.9&quot;,</span><br><span class="line">                  &quot;99.99&quot;,</span><br><span class="line">                  &quot;100&quot;</span><br><span class="line">                ]</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;type&quot;: &quot;percentiles&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;query&quot;: &quot;http_host.keyword:$hostname  AND status.keyword:$status  AND  upstream_addr.keyword:$upstream_addr  AND department.department.keyword:$department&quot;,</span><br><span class="line">          &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">          &quot;timeField&quot;: &quot;@timestamp&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;thresholds&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;colorMode&quot;: &quot;critical&quot;,</span><br><span class="line">          &quot;fill&quot;: true,</span><br><span class="line">          &quot;line&quot;: true,</span><br><span class="line">          &quot;op&quot;: &quot;gt&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;colorMode&quot;: &quot;warning&quot;,</span><br><span class="line">          &quot;fill&quot;: false,</span><br><span class="line">          &quot;line&quot;: false,</span><br><span class="line">          &quot;op&quot;: &quot;gt&quot;,</span><br><span class="line">          &quot;value&quot;: 5000</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;timeFrom&quot;: null,</span><br><span class="line">      &quot;timeShift&quot;: null,</span><br><span class="line">      &quot;title&quot;: &quot;延迟&quot;,</span><br><span class="line">      &quot;tooltip&quot;: &#123;</span><br><span class="line">        &quot;shared&quot;: true,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;value_type&quot;: &quot;individual&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;type&quot;: &quot;graph&quot;,</span><br><span class="line">      &quot;xaxis&quot;: &#123;</span><br><span class="line">        &quot;buckets&quot;: null,</span><br><span class="line">        &quot;mode&quot;: &quot;time&quot;,</span><br><span class="line">        &quot;name&quot;: null,</span><br><span class="line">        &quot;show&quot;: true,</span><br><span class="line">        &quot;values&quot;: []</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;yaxes&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;decimals&quot;: null,</span><br><span class="line">          &quot;format&quot;: &quot;s&quot;,</span><br><span class="line">          &quot;label&quot;: &quot;&quot;,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;format&quot;: &quot;short&quot;,</span><br><span class="line">          &quot;label&quot;: null,</span><br><span class="line">          &quot;logBase&quot;: 1,</span><br><span class="line">          &quot;max&quot;: null,</span><br><span class="line">          &quot;min&quot;: null,</span><br><span class="line">          &quot;show&quot;: false</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;collapsed&quot;: true,</span><br><span class="line">      &quot;gridPos&quot;: &#123;</span><br><span class="line">        &quot;h&quot;: 1,</span><br><span class="line">        &quot;w&quot;: 24,</span><br><span class="line">        &quot;x&quot;: 0,</span><br><span class="line">        &quot;y&quot;: 17</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;id&quot;: 14,</span><br><span class="line">      &quot;panels&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;columns&quot;: [],</span><br><span class="line">          &quot;datasource&quot;: &quot;logstash-nginxlog&quot;,</span><br><span class="line">          &quot;fontSize&quot;: &quot;100%&quot;,</span><br><span class="line">          &quot;gridPos&quot;: &#123;</span><br><span class="line">            &quot;h&quot;: 9,</span><br><span class="line">            &quot;w&quot;: 12,</span><br><span class="line">            &quot;x&quot;: 0,</span><br><span class="line">            &quot;y&quot;: 70</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;id&quot;: 12,</span><br><span class="line">          &quot;links&quot;: [],</span><br><span class="line">          &quot;pageSize&quot;: null,</span><br><span class="line">          &quot;scroll&quot;: true,</span><br><span class="line">          &quot;showHeader&quot;: true,</span><br><span class="line">          &quot;sort&quot;: &#123;</span><br><span class="line">            &quot;col&quot;: 1,</span><br><span class="line">            &quot;desc&quot;: true</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;styles&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;alias&quot;: &quot;Time&quot;,</span><br><span class="line">              &quot;dateFormat&quot;: &quot;YYYY-MM-DD HH:mm:ss&quot;,</span><br><span class="line">              &quot;link&quot;: false,</span><br><span class="line">              &quot;pattern&quot;: &quot;Time&quot;,</span><br><span class="line">              &quot;type&quot;: &quot;date&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;alias&quot;: &quot;&quot;,</span><br><span class="line">              &quot;colorMode&quot;: null,</span><br><span class="line">              &quot;colors&quot;: [</span><br><span class="line">                &quot;rgba(245, 54, 54, 0.9)&quot;,</span><br><span class="line">                &quot;rgba(237, 129, 40, 0.89)&quot;,</span><br><span class="line">                &quot;rgba(50, 172, 45, 0.97)&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;decimals&quot;: 2,</span><br><span class="line">              &quot;pattern&quot;: &quot;/.*/&quot;,</span><br><span class="line">              &quot;thresholds&quot;: [],</span><br><span class="line">              &quot;type&quot;: &quot;number&quot;,</span><br><span class="line">              &quot;unit&quot;: &quot;short&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;targets&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;bucketAggs&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                  &quot;field&quot;: &quot;http_user_agent.keyword&quot;,</span><br><span class="line">                  &quot;id&quot;: &quot;2&quot;,</span><br><span class="line">                  &quot;settings&quot;: &#123;</span><br><span class="line">                    &quot;min_doc_count&quot;: 1,</span><br><span class="line">                    &quot;order&quot;: &quot;desc&quot;,</span><br><span class="line">                    &quot;orderBy&quot;: &quot;_count&quot;,</span><br><span class="line">                    &quot;size&quot;: &quot;10&quot;</span><br><span class="line">                  &#125;,</span><br><span class="line">                  &quot;type&quot;: &quot;terms&quot;</span><br><span class="line">                &#125;</span><br><span class="line">              ],</span><br><span class="line">              &quot;expr&quot;: &quot;&quot;,</span><br><span class="line">              &quot;format&quot;: &quot;table&quot;,</span><br><span class="line">              &quot;intervalFactor&quot;: 1,</span><br><span class="line">              &quot;metrics&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                  &quot;field&quot;: &quot;select field&quot;,</span><br><span class="line">                  &quot;id&quot;: &quot;1&quot;,</span><br><span class="line">                  &quot;type&quot;: &quot;count&quot;</span><br><span class="line">                &#125;</span><br><span class="line">              ],</span><br><span class="line">              &quot;query&quot;: &quot;http_host.keyword:$hostname  AND status.keyword:$status  AND  upstream_addr.keyword:$upstream_addr  AND department.department.keyword:$department&quot;,</span><br><span class="line">              &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">              &quot;timeField&quot;: &quot;@timestamp&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;title&quot;: &quot;域名访问Agent TOP 10&quot;,</span><br><span class="line">          &quot;transform&quot;: &quot;table&quot;,</span><br><span class="line">          &quot;transparent&quot;: false,</span><br><span class="line">          &quot;type&quot;: &quot;table&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;columns&quot;: [],</span><br><span class="line">          &quot;datasource&quot;: &quot;logstash-nginxlog&quot;,</span><br><span class="line">          &quot;fontSize&quot;: &quot;100%&quot;,</span><br><span class="line">          &quot;gridPos&quot;: &#123;</span><br><span class="line">            &quot;h&quot;: 9,</span><br><span class="line">            &quot;w&quot;: 12,</span><br><span class="line">            &quot;x&quot;: 12,</span><br><span class="line">            &quot;y&quot;: 70</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;id&quot;: 8,</span><br><span class="line">          &quot;links&quot;: [],</span><br><span class="line">          &quot;pageSize&quot;: null,</span><br><span class="line">          &quot;scroll&quot;: true,</span><br><span class="line">          &quot;showHeader&quot;: true,</span><br><span class="line">          &quot;sort&quot;: &#123;</span><br><span class="line">            &quot;col&quot;: 1,</span><br><span class="line">            &quot;desc&quot;: true</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;styles&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;alias&quot;: &quot;Time&quot;,</span><br><span class="line">              &quot;dateFormat&quot;: &quot;YYYY-MM-DD HH:mm:ss&quot;,</span><br><span class="line">              &quot;pattern&quot;: &quot;Time&quot;,</span><br><span class="line">              &quot;type&quot;: &quot;number&quot;,</span><br><span class="line">              &quot;unit&quot;: &quot;none&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;alias&quot;: &quot;&quot;,</span><br><span class="line">              &quot;colorMode&quot;: null,</span><br><span class="line">              &quot;colors&quot;: [</span><br><span class="line">                &quot;rgba(245, 54, 54, 0.9)&quot;,</span><br><span class="line">                &quot;rgba(237, 129, 40, 0.89)&quot;,</span><br><span class="line">                &quot;rgba(50, 172, 45, 0.97)&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;decimals&quot;: 2,</span><br><span class="line">              &quot;pattern&quot;: &quot;/.*/&quot;,</span><br><span class="line">              &quot;thresholds&quot;: [],</span><br><span class="line">              &quot;type&quot;: &quot;number&quot;,</span><br><span class="line">              &quot;unit&quot;: &quot;short&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;targets&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;bucketAggs&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                  &quot;field&quot;: &quot;remote_addr.keyword&quot;,</span><br><span class="line">                  &quot;id&quot;: &quot;2&quot;,</span><br><span class="line">                  &quot;settings&quot;: &#123;</span><br><span class="line">                    &quot;min_doc_count&quot;: 1,</span><br><span class="line">                    &quot;order&quot;: &quot;desc&quot;,</span><br><span class="line">                    &quot;orderBy&quot;: &quot;_count&quot;,</span><br><span class="line">                    &quot;size&quot;: &quot;10&quot;</span><br><span class="line">                  &#125;,</span><br><span class="line">                  &quot;type&quot;: &quot;terms&quot;</span><br><span class="line">                &#125;</span><br><span class="line">              ],</span><br><span class="line">              &quot;expr&quot;: &quot;&quot;,</span><br><span class="line">              &quot;format&quot;: &quot;table&quot;,</span><br><span class="line">              &quot;intervalFactor&quot;: 1,</span><br><span class="line">              &quot;metrics&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                  &quot;field&quot;: &quot;select field&quot;,</span><br><span class="line">                  &quot;id&quot;: &quot;1&quot;,</span><br><span class="line">                  &quot;type&quot;: &quot;count&quot;</span><br><span class="line">                &#125;</span><br><span class="line">              ],</span><br><span class="line">              &quot;query&quot;: &quot;http_host.keyword:$hostname  AND status.keyword:$status  AND  upstream_addr.keyword:$upstream_addr  AND department.department.keyword:$department&quot;,</span><br><span class="line">              &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">              &quot;timeField&quot;: &quot;@timestamp&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;title&quot;: &quot;域名客户端IP TOP 10&quot;,</span><br><span class="line">          &quot;transform&quot;: &quot;table&quot;,</span><br><span class="line">          &quot;type&quot;: &quot;table&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;columns&quot;: [],</span><br><span class="line">          &quot;datasource&quot;: &quot;logstash-nginxlog&quot;,</span><br><span class="line">          &quot;fontSize&quot;: &quot;100%&quot;,</span><br><span class="line">          &quot;gridPos&quot;: &#123;</span><br><span class="line">            &quot;h&quot;: 9,</span><br><span class="line">            &quot;w&quot;: 24,</span><br><span class="line">            &quot;x&quot;: 0,</span><br><span class="line">            &quot;y&quot;: 79</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;id&quot;: 10,</span><br><span class="line">          &quot;links&quot;: [],</span><br><span class="line">          &quot;pageSize&quot;: null,</span><br><span class="line">          &quot;scroll&quot;: true,</span><br><span class="line">          &quot;showHeader&quot;: true,</span><br><span class="line">          &quot;sort&quot;: &#123;</span><br><span class="line">            &quot;col&quot;: 1,</span><br><span class="line">            &quot;desc&quot;: true</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;styles&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;alias&quot;: &quot;Time&quot;,</span><br><span class="line">              &quot;dateFormat&quot;: &quot;YYYY-MM-DD HH:mm:ss&quot;,</span><br><span class="line">              &quot;pattern&quot;: &quot;Time&quot;,</span><br><span class="line">              &quot;type&quot;: &quot;date&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;alias&quot;: &quot;&quot;,</span><br><span class="line">              &quot;colorMode&quot;: null,</span><br><span class="line">              &quot;colors&quot;: [</span><br><span class="line">                &quot;rgba(245, 54, 54, 0.9)&quot;,</span><br><span class="line">                &quot;rgba(237, 129, 40, 0.89)&quot;,</span><br><span class="line">                &quot;rgba(50, 172, 45, 0.97)&quot;</span><br><span class="line">              ],</span><br><span class="line">              &quot;decimals&quot;: 2,</span><br><span class="line">              &quot;pattern&quot;: &quot;/.*/&quot;,</span><br><span class="line">              &quot;thresholds&quot;: [],</span><br><span class="line">              &quot;type&quot;: &quot;number&quot;,</span><br><span class="line">              &quot;unit&quot;: &quot;short&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;targets&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">              &quot;bucketAggs&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                  &quot;fake&quot;: true,</span><br><span class="line">                  &quot;field&quot;: &quot;request.keyword&quot;,</span><br><span class="line">                  &quot;id&quot;: &quot;3&quot;,</span><br><span class="line">                  &quot;settings&quot;: &#123;</span><br><span class="line">                    &quot;min_doc_count&quot;: 1,</span><br><span class="line">                    &quot;order&quot;: &quot;desc&quot;,</span><br><span class="line">                    &quot;orderBy&quot;: &quot;_count&quot;,</span><br><span class="line">                    &quot;size&quot;: &quot;10&quot;</span><br><span class="line">                  &#125;,</span><br><span class="line">                  &quot;type&quot;: &quot;terms&quot;</span><br><span class="line">                &#125;</span><br><span class="line">              ],</span><br><span class="line">              &quot;expr&quot;: &quot;&quot;,</span><br><span class="line">              &quot;format&quot;: &quot;table&quot;,</span><br><span class="line">              &quot;intervalFactor&quot;: 1,</span><br><span class="line">              &quot;metrics&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                  &quot;field&quot;: &quot;select field&quot;,</span><br><span class="line">                  &quot;id&quot;: &quot;1&quot;,</span><br><span class="line">                  &quot;type&quot;: &quot;count&quot;</span><br><span class="line">                &#125;</span><br><span class="line">              ],</span><br><span class="line">              &quot;query&quot;: &quot;http_host.keyword:$hostname  AND status.keyword:$status  AND  upstream_addr.keyword:$upstream_addr  AND department.department.keyword:$department&quot;,</span><br><span class="line">              &quot;refId&quot;: &quot;A&quot;,</span><br><span class="line">              &quot;timeField&quot;: &quot;@timestamp&quot;</span><br><span class="line">            &#125;</span><br><span class="line">          ],</span><br><span class="line">          &quot;title&quot;: &quot;域名Request TOP 10&quot;,</span><br><span class="line">          &quot;transform&quot;: &quot;table&quot;,</span><br><span class="line">          &quot;type&quot;: &quot;table&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      &quot;title&quot;: &quot;Row title&quot;,</span><br><span class="line">      &quot;type&quot;: &quot;row&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;refresh&quot;: false,</span><br><span class="line">  &quot;schemaVersion&quot;: 16,</span><br><span class="line">  &quot;style&quot;: &quot;dark&quot;,</span><br><span class="line">  &quot;tags&quot;: [],</span><br><span class="line">  &quot;templating&quot;: &#123;</span><br><span class="line">    &quot;list&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;allValue&quot;: null,</span><br><span class="line">        &quot;current&quot;: &#123;&#125;,</span><br><span class="line">        &quot;datasource&quot;: &quot;$&#123;DS_LOGSTASH-NGINXLOG&#125;&quot;,</span><br><span class="line">        &quot;hide&quot;: 0,</span><br><span class="line">        &quot;includeAll&quot;: true,</span><br><span class="line">        &quot;label&quot;: &quot;业务&quot;,</span><br><span class="line">        &quot;multi&quot;: true,</span><br><span class="line">        &quot;name&quot;: &quot;department&quot;,</span><br><span class="line">        &quot;options&quot;: [],</span><br><span class="line">        &quot;query&quot;: &quot;&#123;\&quot;find\&quot;: \&quot;terms\&quot;, \&quot;field\&quot;: \&quot;department.department.keyword\&quot;&#125;&quot;,</span><br><span class="line">        &quot;refresh&quot;: 1,</span><br><span class="line">        &quot;regex&quot;: &quot;&quot;,</span><br><span class="line">        &quot;sort&quot;: 2,</span><br><span class="line">        &quot;tagValuesQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;tags&quot;: [],</span><br><span class="line">        &quot;tagsQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;query&quot;,</span><br><span class="line">        &quot;useTags&quot;: false</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;allValue&quot;: null,</span><br><span class="line">        &quot;current&quot;: &#123;&#125;,</span><br><span class="line">        &quot;datasource&quot;: &quot;$&#123;DS_LOGSTASH-NGINXLOG&#125;&quot;,</span><br><span class="line">        &quot;hide&quot;: 0,</span><br><span class="line">        &quot;includeAll&quot;: true,</span><br><span class="line">        &quot;label&quot;: null,</span><br><span class="line">        &quot;multi&quot;: true,</span><br><span class="line">        &quot;name&quot;: &quot;hostname&quot;,</span><br><span class="line">        &quot;options&quot;: [],</span><br><span class="line">        &quot;query&quot;: &quot;&#123;\&quot;find\&quot;: \&quot;terms\&quot;, \&quot;field\&quot;: \&quot;http_host.keyword\&quot;&#125;&quot;,</span><br><span class="line">        &quot;refresh&quot;: 1,</span><br><span class="line">        &quot;regex&quot;: &quot;&quot;,</span><br><span class="line">        &quot;sort&quot;: 3,</span><br><span class="line">        &quot;tagValuesQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;tags&quot;: [],</span><br><span class="line">        &quot;tagsQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;query&quot;,</span><br><span class="line">        &quot;useTags&quot;: false</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;allValue&quot;: null,</span><br><span class="line">        &quot;current&quot;: &#123;&#125;,</span><br><span class="line">        &quot;datasource&quot;: &quot;$&#123;DS_LOGSTASH-NGINXLOG&#125;&quot;,</span><br><span class="line">        &quot;hide&quot;: 0,</span><br><span class="line">        &quot;includeAll&quot;: true,</span><br><span class="line">        &quot;label&quot;: null,</span><br><span class="line">        &quot;multi&quot;: true,</span><br><span class="line">        &quot;name&quot;: &quot;status&quot;,</span><br><span class="line">        &quot;options&quot;: [],</span><br><span class="line">        &quot;query&quot;: &quot;&#123;\&quot;find\&quot;: \&quot;terms\&quot;, \&quot;field\&quot;: \&quot;status.keyword\&quot; ,\&quot;query\&quot;: \&quot;http_host:$hostname\&quot;&#125;&quot;,</span><br><span class="line">        &quot;refresh&quot;: 1,</span><br><span class="line">        &quot;regex&quot;: &quot;&quot;,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;tagValuesQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;tags&quot;: [],</span><br><span class="line">        &quot;tagsQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;query&quot;,</span><br><span class="line">        &quot;useTags&quot;: false</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;allValue&quot;: null,</span><br><span class="line">        &quot;current&quot;: &#123;&#125;,</span><br><span class="line">        &quot;datasource&quot;: &quot;$&#123;DS_LOGSTASH-NGINXLOG&#125;&quot;,</span><br><span class="line">        &quot;hide&quot;: 0,</span><br><span class="line">        &quot;includeAll&quot;: true,</span><br><span class="line">        &quot;label&quot;: null,</span><br><span class="line">        &quot;multi&quot;: true,</span><br><span class="line">        &quot;name&quot;: &quot;upstream_addr&quot;,</span><br><span class="line">        &quot;options&quot;: [],</span><br><span class="line">        &quot;query&quot;: &quot;&#123;\&quot;find\&quot;: \&quot;terms\&quot;, \&quot;field\&quot;: \&quot;upstream_addr.keyword\&quot;,\&quot;query\&quot;: \&quot;http_host:$hostname\&quot;&#125;&quot;,</span><br><span class="line">        &quot;refresh&quot;: 1,</span><br><span class="line">        &quot;regex&quot;: &quot;&quot;,</span><br><span class="line">        &quot;sort&quot;: 0,</span><br><span class="line">        &quot;tagValuesQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;tags&quot;: [],</span><br><span class="line">        &quot;tagsQuery&quot;: &quot;&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;query&quot;,</span><br><span class="line">        &quot;useTags&quot;: false</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;time&quot;: &#123;</span><br><span class="line">    &quot;from&quot;: &quot;now-24h&quot;,</span><br><span class="line">    &quot;to&quot;: &quot;now&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;timepicker&quot;: &#123;</span><br><span class="line">    &quot;refresh_intervals&quot;: [</span><br><span class="line">      &quot;5s&quot;,</span><br><span class="line">      &quot;10s&quot;,</span><br><span class="line">      &quot;30s&quot;,</span><br><span class="line">      &quot;1m&quot;,</span><br><span class="line">      &quot;5m&quot;,</span><br><span class="line">      &quot;15m&quot;,</span><br><span class="line">      &quot;30m&quot;,</span><br><span class="line">      &quot;1h&quot;,</span><br><span class="line">      &quot;2h&quot;,</span><br><span class="line">      &quot;1d&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;time_options&quot;: [</span><br><span class="line">      &quot;5m&quot;,</span><br><span class="line">      &quot;15m&quot;,</span><br><span class="line">      &quot;1h&quot;,</span><br><span class="line">      &quot;6h&quot;,</span><br><span class="line">      &quot;12h&quot;,</span><br><span class="line">      &quot;24h&quot;,</span><br><span class="line">      &quot;2d&quot;,</span><br><span class="line">      &quot;7d&quot;,</span><br><span class="line">      &quot;30d&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;timezone&quot;: &quot;&quot;,</span><br><span class="line">  &quot;title&quot;: &quot;腾讯云CLB日志分析&quot;,</span><br><span class="line">  &quot;uid&quot;: &quot;7PJIMq5ik&quot;,</span><br><span class="line">  &quot;version&quot;: 8</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2018/11/09/2018/11/2018-11-09-%E5%85%B3%E4%BA%8E%E9%87%91%E5%88%9A%E7%BB%8F%E5%9C%A8%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%AE%9E%E8%B7%B5/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/09/2018/11/2018-11-09-%E5%85%B3%E4%BA%8E%E9%87%91%E5%88%9A%E7%BB%8F%E5%9C%A8%E8%BF%90%E7%BB%B4%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%AE%9E%E8%B7%B5/index/" class="post-title-link" itemprop="url">关于金刚经在运维开发中的实践</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-09 08:00:00" itemprop="dateCreated datePublished" datetime="2018-11-09T08:00:00+08:00">2018-11-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:29" itemprop="dateModified" datetime="2023-05-26T15:06:29+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/zen/" itemprop="url" rel="index"><span itemprop="name">zen</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/zen/op/" itemprop="url" rel="index"><span itemprop="name">op</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a><strong>参考</strong></h3><table>
<thead>
<tr>
<th>姚秦</th>
<th>鸠摩罗什</th>
<th>《金刚般若波罗蜜经》</th>
</tr>
</thead>
<tbody><tr>
<td>梁</td>
<td>昭明太子</td>
<td>《金刚经》三十二品</td>
</tr>
<tr>
<td>唐</td>
<td>六祖惠能</td>
<td>六祖讲《金刚经》</td>
</tr>
</tbody></table>
<h3 id="金刚经"><a href="#金刚经" class="headerlink" title="金刚经"></a><strong>金刚经</strong></h3><blockquote>
<p>金刚经（《金刚般若波罗蜜经》，又译《佛说能断金刚般若波罗蜜多经》，简称《金刚经》）的核心思想，其实就是一句话：菩萨于法，应无所住，行于布施。简单概况下就是不着相（应无所住而生其心），行布施，能做到这点就算觉悟了 ，也算自觉了，成就阿罗汉果了。再后面就是觉他及觉行圆满了，据说只有佛祖释迦牟尼（姓乔达摩，名悉达多）一人达到了，毕竟他老人家35岁就觉悟了，自觉后又花了45年觉他，觉行圆满后才涅槃。</p>
</blockquote>
<p><strong>如下分别从法门、着相、布施几个方面来对比:</strong></p>
<ul>
<li><h3 id="关于法门"><a href="#关于法门" class="headerlink" title="关于法门"></a><strong>关于法门</strong></h3><p>  法门相对于各种技术，各种技术就代表各个法门了，佛门有四万八千法门，与多于牛毛的开源技术差不多了。前几年云计算、大数据，后来的加密货币、人工智能，以及未来的量子技术，哪一个不需要了解，哪一个又能透彻理解？所以说这些都是法门，哪一个精通了就差不多达到了，都可以做为修炼的功法。要是哪天你觉悟了就不得了了，一通百通，说不定连前世特斯拉的技术你都知道了。</p>
</li>
<li><h3 id="关于着相"><a href="#关于着相" class="headerlink" title="关于着相"></a><strong>关于着相</strong></h3><p>  凡夫众生与修行者最大的差别，在于众生执著四相（我相、人相、众生相、寿者相）而轮回不断；而大乘行者则能于佛法修行中证悟金刚智慧渐渐舍离于四相之执著，直至圆成佛道。能不能成佛道暂且不说，断不断轮回也不讲，要是能没有烦恼就谢天谢地了，我等凡夫在运维时老是执着于背锅侠、网管、产品经理等等这些听着让人不舒服的词语，他们只是个名词，他们又有什么错呢？他们只是定义区分一些事物而已与叫大爷、二狗、世尊等等又有什么区别？何必执着，何必自寻烦恼呢？要是能把满大街的人都看成圣人，哪你还有烦恼吗？比如把产品经理看成圣人，这是个着力点，可以好好拿来格一格，不着相了你就释然了，就逍遥了，就通达了！既然众生平等，那么对上就应该不卑不亢，对下就应该不骄不躁，看问题应该使用佛祖视角，也就是五维关注的是过去现在将来，不在意一生一世的得失，还得考虑下来生来世啊，更何况是一时一势呢？</p>
</li>
<li><h3 id="关于布施"><a href="#关于布施" class="headerlink" title="关于布施"></a><strong>关于布施</strong></h3><p>  布施就是服务，反过来服务就是布施啊，我们得坚定心态端正态度：当领导同事使用必须、尽快、下班之前等等字眼时，我们看到不应该是我们又得做保姆型运维服务了，我们那是在布施，当我们请客吃饭时那是七宝布施，当我们加班到凌晨时那是身体布施，身体布施大于七宝布施所以领导同事的愉悦度会更大。我特别反对揣摩洞察领导的意图，子非鱼，安知鱼之乐？只有布施就好了，无所住而行布施，布施了也不挂于心，时间久了境界也就上去了。何况这个还是有偿布施，所以运维就是修行，好好珍惜这次修行的机会吧！</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2018/11/09/2018/11/2018-11-09-%E6%88%91%E7%9A%84%E4%BA%92%E8%81%94%E7%BD%91%E9%9D%A2%E8%AF%95%E7%BB%8F%E5%8E%86/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/09/2018/11/2018-11-09-%E6%88%91%E7%9A%84%E4%BA%92%E8%81%94%E7%BD%91%E9%9D%A2%E8%AF%95%E7%BB%8F%E5%8E%86/index/" class="post-title-link" itemprop="url">我的互联网面试经历</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-09 08:00:00" itemprop="dateCreated datePublished" datetime="2018-11-09T08:00:00+08:00">2018-11-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:29" itemprop="dateModified" datetime="2023-05-26T15:06:29+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/talk/" itemprop="url" rel="index"><span itemprop="name">talk</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/talk/op/" itemprop="url" rel="index"><span itemprop="name">op</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="缘起"><a href="#缘起" class="headerlink" title="缘起"></a>缘起</h3><blockquote>
<p>为什么会想着去面试了，这个事情好像我之前的一篇被封的文章里有透露，大意是很长时间沉浸在自己的世界里，没有出来走走没有和大牛沟通，快落后时代了。我发现凡是之前有过想法或者有过大概的计划，后面必执行了，而且后面执行的事与之前想法惊人的一致，就算之前想错了后面还是错误的执行。难道这就是宿命，也可能是我终生坚持的知行合一与一诺千金吧，虽然有点迂腐但也没办法可能我的基因里确实继承有孔子某位弟子的基因吧！</p>
</blockquote>
<h3 id="经历"><a href="#经历" class="headerlink" title="经历"></a>经历</h3><ul>
<li><blockquote>
<p>已经有大概三四年没有面试了，以至于前前后后面试花了大概半年时间，经历了三四家公司，权且当作成长的痛苦吧，毕竟这些都是自己的经历无论如何都得接受！面试这种事只要有一次成功就行了，不管前面有多少次失败，抱着这种心态我开启了自己的面试之旅。不紧不慢的开启，虽然这样期间还是遇到了很多困难与挫折甚至坑，从中发现了自己的不少短板，也丢失了很多好机会，但是一切不可重来。不管怎样还是得相信自己正如美国众神里表达的中心思想一样：有信仰才有神，没有了信仰也就没有了神！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>互联网行业面试有个规律，成功率大概是内推&gt;技术&gt;人力，内推的成功率最大，其次是技术先面，人力先面我必败，不知道大家是不是也是这样的?因为我的短板与劣势在人力哪里一览无遗，而且我也坚持不说谎宁肯不说话也不说谎，我是很爱惜自己羽毛的不能为了一份小小的工作而有损自己的人格（至少开始我是这样想的）！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>经过校友的推荐我首先去今日头条看了看，这也是第一次出去，由于当时很自信完全没准备以至于校友推荐了几个职位让我选，我选了一个我认为不是那么低级的职位。去了一个大哥大概问了问然后给了我个MAC本，上面他弄乱的环境让我做Trouble Shooting，由于我以前没用过MAC本，这操作起来就尴尬了另外大哥问了一些我不知道的或者不熟悉的东西最后还让我默写一些配置，显然效果不太好，就这样一次好机会就白白的让我浪费了。今日头条的工作地点与环境堪称完美，隐藏在理工大学工业园里周围环境静谧绿树成荫，北京真的很少有这样的办公地点了，且位置居中全北京到这都不会太远，区域位置价值和我原公司有得一比，确实是一家比较人性的公司！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>有了第一次的面试失败，我现在开始关注外界流行的技术与要求了，发现在一家公司呆太久了搞的那些东西就算太熟，人家要是不问你不就歇菜了，另外主要原因还是：底子太薄，算法不会，思想没有，语言不通。我原来只想找份运维的工作，没想到现在要求越来越多而且也越来越严格，要是真的不提高提高真的要被淘汰了当时是这样想的。
  </p>
</blockquote>
</li>
<li><blockquote>
<p>第二次我去的是腾讯视频，这个机会有点碰运气的感觉（可能是我投了低级职位吧，后来我就改变策略了凡是行业TOP公司我就投低级职位能去看看就行，要不然都不给机会了，面试都没有何况进去呢），我只是在拉勾网上投了一家，开始的时候我每天或几天只投一两家反正有的是时间而且投递的位置都比较近的。就算后来失业了我每天最多也不超过十家，毕竟海投既是对自己的不负责也是对别人的不负责。腾讯还是很不错的行业数一数二的公司肯定有其成功的合理因素在里面这个具体什么因素不好说但是一感受就知道了区别。但是有个小插曲，我在约定时间去了但是等了四十分钟，因为打电话面试官手机关机了，我想肯定是开会了(腾讯竟然要求这么严格开会还关机，后来才知道是面试官手机没电了，要不是腾讯估计我早走了，但还是耐心的等下来了，主要是想看看腾讯是什么样的，我这人天生有好奇心)。先是做笔试，题目不是很难但是问的很细致且很深入，由于面试时间是下班后，后面很多面试都是下班后完成的，互联网行业嘛没有不加班的这个几乎是共识，除了我们公司这个良心企业。由于时间紧迫我很快的完成题目然后面试官和我讲解目及穿插他想知道的东西，面试官很负责见解也很独到。可能只有大公司大并发大流量才会深入的研究这些问题吧，这也加深了后来我走出来的决心。面试官也说了这个职位是自己部门用的，要不然他也不花这么多心思的，因为大公司也有很多职位是外包的，要不然组织过于庞大不便于管理。面试下来我只感觉最多是差不多满足需求，虽然之前有准备过，特别是最后一道题淘宝双十一秒杀是怎样做到的？这个问题堪称经典问题后来很多公司会问道，后来我想了想这个问题确实堪称经典，如果秒杀都搞定了还有什么搞不定的，这其中蕴含了至理啊，确实需要日日格，又日格，苟日格，搞懂了就是大牛了。那个时候我还是知道的甚少，而且还是禀着不知道不说的原则只从横向扩容与纵向解耦分层来说，反正效果不太理想而且耗资源，成本也得不到控制。最后我下楼了看见有家桂林米粉边吃边想还有没有其他办法呢，后来想到了可能人家玩秒杀时一开始就把大部分人挡在门外，只允许少部分人参入，虽然这不太公平但本来就是僧多肉少嘛。当我想到这个方法时甚至感到有点羞耻这不是假秒杀吗？但是不管怎样还是把这个想法通过短信发给了那个面试官，后来他收到说好的。最后他安排了我复试，之所以有这个复试我考虑可能原因有两点：一是他平白无故的让我多等了四十分钟有点儿内疚，二是我确实没有放弃争取了一下。复试这里就不说了反正是惨不忍睹，可能他们技术总监更在意工作经历与资质吧。不过后来的经历告诉我大公司都比较注重经历与资质，虽然是一个螺丝钉他们也要选最好的，这样才能保证他们永远立于不败之地，这也是很多人想去大公司镀镀金的缘故，确实能提高整体水平拓展视野！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>后来我就停止了一段时间并好好学习，期间又看了不少技术书，最后获得了一个京东云内推的机会，还是那句话有内推好办事。正好京东云在扩展业务大量招人我就借着这个机会去了，碰到了他们技术老大，真是侃侃而谈放开了侃，后来才知道那个人是清华的博士。后来我明白了越是学问高修养好的人，越会问问题，越会发现你的优点，让你有种遇强则强的感觉，很是受用！他当场明确表示要我这个人，也没给其他部门面试，因为那个时候好几个部门都要人。我当然也很高兴，当即下定决心以后需要向大牛高手靠近，这样既能学习技术又能有共同语言。然而天不遂人意，这个结果同样很凄惨，还是逃脱不了败在人力的手里。确实我的经历里有很多问题，但那些都是历史我也改变不了，我只能保证不说假话， 就这样我与京东也算无缘了！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>这个时候其实对我打击挺大的，大公司梦可能就要破灭了，但是还在坚持着，BATJ里面除了百度距离太远，名声又有点不好没有考虑外其他几家还是很想去的，特别是阿里巴巴，哪怕是去杭州、上海也行那个时候我是这样想的。这里嘴馋多说一句哈我觉得BATJ用射雕里面的四大宗师来比如的话：阿里是东邪虽然马云老说自己是凤清扬但是我总觉得他脸上带有几分邪气，姑且叫他东邪好了而且你去面试不正好有个桃花岛嘛，他搞得那一套还真的有某有样的；百度那就是西毒了，虽然技术一流但是总会出一些出人意料的事情，搞得自己很被动，有时站在舆论的对立面，可能是一心钻研技术其他不是很在意吧；南帝算上腾讯吧，不是总说腾讯帝国嘛，而且根据他在南方，其社交方面一枝独秀无人能敌哈；北丐给京东吧，十多万快递大军牢牢雄霸北方，振臂一挥指日可达啊！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>以上闲话说完了，进入正题。阿里巴巴面试搞了一套流程，堪称行业经典，当然他们是常年招人毕竟是人员流动性扩张性比较大的大厂。另外又有朋友同学老同事在里面，前前后后我几乎面试了阿里巴巴好几个子公司子部门。有时我急了会直接问面试官你们到底需要什么样的人，大概只要牛人吧，他们说他们那边木工都有过去的，暗示对所有有能力的同学都平等吧。可是我是那种有理想却能力不足的那类人，最好的成绩就是有两次视频面试的机会， 他们应该分三、四面吧， 视频面试没啥问题后面就差不多人力了吧，可惜我没有走到最后。其中还有一次视频面试我要求改时间没有满足而放弃了，马云说过现在外面有人说我们骄横了，我感觉有的部门确实有点哈，不知道这句话他能不能看到。再后来去阿里的梦也破灭了！另外这里提醒大家一点，阿里应该有简历历史记录机制如果一次没有过关会影响后续三到六个月的投递机会，所以看好了再投别白白浪费了机会！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>这时也没啥好选择了其实也想过继续留下来，可是心又不甘，眼看了比较有能力的同事都慢慢的出走了，留下来又不能安心工作确实对双方都不好！后来年会看到斌哥为了把全部精力都用在新能源汽车上也辞去了CEO的职位，感觉更没有必要留下来了，然后就开始关注创业公司与互联网比较著名的公司了条件有所放松工作自然好找了很多，先后收到了三个offer，两家是创业公司，一家是和我们差不多的老牌互联网公司。下面我一一说明：
  </p>
</blockquote>
</li>
<li><blockquote>
<p>第一家是Newsjet，以前也没听说过，反正是家立足海外主要是日本市场的音乐应用公司，花了一个下午三个小时多位同事对我进行了全方面了解，反正最后谈得还行，我所知道与他们所需要的很匹配。最后到了谈薪资待遇，由于是第一次面试到了谈薪资阶段我不知道怎样谈反正觉得比现在的多就行了就随便说了。最后他们的效率确实很高第二天就给我电话确认了薪资没问题问什么时候能来。后来我想他们是996，算了下时薪另外加上创业公司好多都是最低标准交社保的，感觉这样下来这家不一定有现在的多，就犹豫了后来越犹豫越感觉自己谈薪失败，最后只好不了了之了。
  </p>
</blockquote>
</li>
<li><blockquote>
<p>第二家是日志易，其实我了解这家公司很长时间了，特别是他们公司的三斗大神在Elastic Stack界更是无人不知无人不晓啊。有次参加会议还看到他们的CEO陈军博士演讲，谷歌工作经历确实不是吹的，绝对很吸引人，那时他们真是意气风发啊。这次去面试看到他们距离上次还不到两年，却发现他们都苍老了很多，看来创业公司的压力真不是一般人多能想象的，特别是现在行业竞争越来越激烈的时候。那时他们最早涉足大数据日志分析可谓国内领头羊，现在大批新公司涌入特别还是有阿里系的，确实带来了不少冲击！前面技术人力等都还好毕竟都认识了很长时间了，后来他们有个比较特别的地方就是需要CEO最终复核。上次只是看到了没有当面交谈，这次有了当面交谈的机会确实很激动，海外工作经验确实NB，他用他的MAC本同样给我Trouble Shooting及Practical Operation，这已经是第二次操作MAC了所以没有以前那么心慌了。感觉陈博士还是很Open的，特别是我用了一种解法解决问题后他提出有没有更有效或者使用更少计算资源的解法，大牛风范立现啊，这么多年还关注一线技术不像很多人一走上领导岗位技术就落下了。最后还是谈薪资我也没敢多要说了现在的，说能多点就行。后天他真的就多给了一点，真是可爱啊！可能是创业公司预算有限吧，大家都得先生存下来然后才能发展下去，考虑到公司位置比较远，而且提供的职位和自己预想的还有点差距就没有去。要是两年前肯定不用想就去了，奈何时间变了人也变了就，失去了一次与大神们近距离共事的机会！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>第三家是智联招聘，是在技术群里认识的朋友推荐的，也很给力技术人力一次搞定，很快定下来了给的薪资比预想的还多一点，这个不愧是搞招聘的，都知道雇员想的是什么。互联网圈子真是小，后来我了解到好多同事可能几年前都间接有过交集只是没有机会见面罢了！由于大公司去不了，这边又给我了不错的待遇然后同事们觉得行业影响力还行就没有留我了，这次真的是打算走了。毕竟在老东家这几年成长最快，学习最多，也算是人生的一个转折点吧，让我一脚踏入了互联网行业，福利待遇也很健全，虽然我离开了但是我还是经常给朋友推荐我的老东家！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>就这样我悄悄的离开了原来的公司，进入了智联，来了智联，我才发现我真的是与时代脱节了。深刻体会到什么是995、996或者10105、10106。由于离家里实在有点远来回路上都得三、四个小时，而且这八九年都和父母住在一起也没有搬家的打算，最后在这里只上了一周，可能是我有史以来最短的一次公司履历了。现在想想那时做得太冲动了而且幼稚，虽然只有一周却赶上了智联的年会。体会了一把智联人的年会，由于我在上家公司参加了年会这边的年会对比就出来了，给我思想造成了一些冲击可能也算是我离开的一个原因吧如果要找理由。这一周里在智联看到的技术架构与解决方案真是开了眼界，解答了很多之前的疑问，因为之前我好多东西只是测试环境跑过，这边全部上线了，虽然有不成熟的地方但是人家确实上线跑了这个就是质的差别，很值得我去学习。这一周的学习也对我后来的面试及技术选型等给以很大的帮助！现在想起来还是自己吃不了苦，想的太多没有全身心投入工作，总是想着家庭与工作的平衡最终导致离开了这里。另外还有这边监控二十四小时需要关注（原来公司是由专人负责的，这边是自己弄），我觉得这个问题不解决会影响到以后的发展，好多公司都是表面上看做的还行，但是要是深入里面的东西估计还是需要花费很大的精力才能解决好，而这个又不是主要矛盾，根据二八定理只解决80%的问题就好了，另外20%的问题用土办法反正就这样了 ，这个也属于行业的弊端吧，真让人有点无能为力的感觉！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>另外离职前我还找上家公司的领导咨询了下意见，甚至有点想回原来的公司的念头。那时真是心里崩溃了我估计，人到了这个时候啥方法都得试试，也顾不了脸皮不脸皮了。后来经过领导的努力发现出来容易进去难，一度使我很崩溃，不过领导也很给力动用国身边人脉给我介绍了一家公司是逻辑思维的得到，让我去试试我就像抓住了救命稻草一样很快决定先辞职再面试。后来发现这确实是一个很大的错误，无论如何都不应该裸辞，但是当时没有考虑那么多，所谓是不经历黑夜你都不知道有多黑。虽然智联的领导说你要不坚持一个月边工作边找，坚持到年后因为那个时候距离过年还有两周时间，他说年后好找工作，但是这个好意我也没有接受，那个时候我告诉领导我这个决定可能是错的，但是我不试错我心里过不了这关，就这样明知不可为而为之，最后可想而知摔得很惨本来有一手还不错在牌却越打越坏!
  </p>
</blockquote>
</li>
<li><blockquote>
<p>由于之前我也了解过知识付费或共享知识的平台，还一度计划怎样进入知乎、玛雅听书、得到、简书、Zaker等平台。可是我发现有的在外地有的很远而且他们都没有找人在打算，我甚至问简书的主编他们要不要人，我就是这么直接，决定好在事就会很直接在去问，天生就不直男吧！然后理想很丰满现实很骨感，感觉能进入他们比BATJ还难，毕竟他们相小众难得要人就算要人也得精挑细选。突然听到有个得到的机会，当然是欣喜若狂，还听说他们下周年会，我还天真的想难道今年我要参加三次年会，现在想想真是傻的可以，真是有很大的赌的成分在里面！然而命运就是这样的折磨人，你越想去的地方他越是不要你。后来听说越是崇拜罗胖的人越是不让你去，虽然我是反对贩卖焦虑贩卖知识的，但最终还是没去了，只能说是无缘了！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>这个时候真的有点走头无路的感觉，突然原公司的兄弟部门同事向我伸出了援助之手，问我要不要去，这时候我其实已经快处于崩溃的边缘，真的很感激他。我去聊聊了之前不是说不好再进嘛，他打算曲线下：先去外包商体验下然后再回来保证流程上能走得通。其实我开始也动心了， 只是后来咨询老领导问我真的职业规划是什么是纯粹找一份工作过渡，还是想长期干下去。我想既然出来了又回去这算什么一回事啊，这不是能屈能伸在问题，要是过渡也不能拿兄弟部门开刀啊，后来经过深思我没有接受兄弟部门的好意!因为那个时候也有几家虽然不太理想，但是也可以去，后来我就去了现在的这家公司，这是后话。
  </p>
</blockquote>
</li>
<li><blockquote>
<p>由于还有两周就要过年了，我坚持再呆北京一周，尽快年前找到工作要是真找不到就年后了，另外由于吃了距离长的亏，这次只找一个小时车程内的，怕远了坚持不下来。奇怪是有工作时工作来找你，没有工作时拼命找工作也找不到。这周经历实在没啥好说的，一下子轻松了许多毕竟连续工作五六年了现在突然没事可做了，真的有时候一天天的一个电话都没有真是太折磨人了，看来工作才是一个人生存必不可少的东西！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>期间有几家公司的面试经理这里还可以说说，我之前说过不涉足游戏与金融行业，不知道是天生的偏执还是心存的一点善念觉得这些行业都是灰色行业，要么有害少年儿童身心健康，要么破会实体经济。但是这个时候也顾不了那么多了吃饭要紧。我一松手就前后面试了宜信的好几个部门，可能是他们公司太大了吧，招的人也多部门也多，不过都谈的不太好我也不知道什么原因，可能是他们的要求真的比较高，也可能是我真的与金融行业无缘了。金融行业的后来还有一位，本来这时我对金融行业已经绝望了，但是人家找到我我还是想试试，人性就是这样嘛，总是不好意拒绝。那家惠金所领导找到我反正各轮都谈得不错，最后还得知他们领导有的是好未来出来的，有的是百度出来的，让我等消息，什么都弄好了，最后不了了之了，我也不知道什么原因后来问他们领导也没回，到现在还是一桩悬案！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>说到好未来突然就收到好未来的面试，你说奇怪吧不知道这些事物之间因果关系是怎样的。好未来的面试大哥说他研究过我写的博客，技术上到没怎么多问（可能技术上就是那些事都差不多不必问太多，观一叶而知秋嘛，好多高手也只问一个问题嘛，然后就知道你到底有没有）最后倒是是问我一些佛学与修身方面的东西，难道真的有入门到出家啊！我想人家既然这么感兴趣，我们都是做技术的就该开源分享嘛，我告诉了他我一些读书的经验，其实也没啥经验，读就好了 ，特别是不想读的时候越是要去读他，听着是不是很变态但这却是很对症下药啊！然后要是养成了读书在习惯，就应该跨学科多领域阅读，不要给自己设限制，当然最好先读自己学科的东西自己技术要是提不上去多少有点不务正业的嫌疑哈！最后我告诉他读佛呢，不同佛经之间是互相矛盾的，同一本佛经前后也是互相矛盾的，只要选择其中自己喜欢的一两段来默记就行了！关键就是修心嘛，心不乱啥事都好办，佛又不能帮助你干什么。最后那个哥们把我送到门口毕恭毕敬的再送进了电梯，我想这次就是来交流的吧，反正都这样了难道还能做同事不成！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>刚面了好未来，VIPKID又找进来了我感觉好奇怪啊，难道是对手看到对方扩展业务自己也不甘落下也马上跟进哈，VIPKID最大的特点就是以独角兽自居，这个从他们脸上溢出的那种自信心就能感觉出来。反正也是一个下午各部门人员轮番上，我一般都会要求一次面完，除非特别大的公司拗不过人家才妥协。最后到人力谈薪资时，人力很强势啊，都是一点一点的算出来的，这个体验就有点差了。其实我也能理解创业公司他们节省成本是对的是为了公司的利益出发，但是我更喜欢薪资技术领导说了算，人力只是辅助的具有亲活力就行。但是这边不一样，这个感觉和互联网行业有点不一样以致于当场我就起身握手告别了，这个后来想想还是自己太冲动太幼稚了何必这样呢！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>年前就这样了再也没啥面试了还有一周过年，打算先回去算了，在这里呆着也不是个事，如是我就回去了反正过得不舒心，虽然能够天天睡个好觉也没有电话报警也不需要处理故障，但是心里空闹闹的这时候对前途很是担心！年一过完就很快过来了，后来发现完全没必要过来那么早我来了人力没来啊。人力没来面试帖子就发不出来，这时人力的重要性就凸显出来了！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>这个时候我没多想，只是想无论如何先找份工作吧，另外无论如何在附近找，如是就留意附近几站范围内的公司，反正后来也面了几家附近的公司，国企是一点都进不去，后来去了一个类似国企的公司。这家公司是传统公司向互联网转型也算车企，可能是我之前差不多四年互联网车企工作经验吸引了他们，反正让我过来了这边流程不是一般的复杂这个是后话，可能流程复杂为了走得稳吧，传统行业都是老板自己的钱要是不稳那赔的也是自己的，不像现在很多公司是融资的都是拿别人的钱办自己的事，满不在乎而且步子迈得特别快，一不小心就被收购了或者烧完钱关门大吉了！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>在这里我接触了很多厂商，因为一来就是一个项目包括技术选型机设备选型，这些技术我之前也有了解过，只是以前都是开源的现在接触是商业的解决方案，完全不一样，我发现商业的方案竟然那么的成熟，比开源的也不多差，只是费用贵了不少 。然后我理解的技术有的是两三年前的，现在需要恶补，如是我找了国内几乎大部分设备厂商与技术厂商来向他们学习，每天安排一两个厂商连续学习了半个月既了解行业发展又和解决方案技术人员沟通了技术另外还参观了案例。最终确定了自己的技术选型与设备选型，这段经历是原来没有的，不过我觉得他多多少少会对以后的工作有所帮助。特别是沟通、采购、商务、汇报等都有了比较大的进步，因为原来我只关心技术啥都不闻不问。另外这里还有一个很爽的地方，每天五点半就能下班，估计我这五六年也没这么早下班过，真是奢侈啊！由于自由时间多，事情又不多，这时我又开始关心自己的职业规划了，我想这个时候真得好好想想，上次是忙的要死，这边是闲的要死，我这个人就是这样思想停不下来，闲了爱生事。有时会想难道我现在就要放弃拼搏了吗，是不是早了点还没到该放弃的年龄，而且发现不少原同事为了不可描述在价值年龄那么大又去一线拼搏了，此时甚至在享乐的时候有点羞耻感！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>如是我就又开始关注起投简历的事情了，这个时候突然好未来联系我了，我想都过了这么久咋突然联系我说让我去看看，我想反正现在下班早有时间看看就看看，这次去直接就是他们总监，叫老师根据我的理解凡是国企或者教育业都喜欢叫人老师，难道真的都这么好为人师吗？不管他了这个老师有点像上次遇到的那个京东的博士，遇到这种人我想真是我的运气来了，遇强则强呗！果然谈得不错，职业发展也是我喜欢干的事，其实我喜欢干的事就是我没干过的事，所以一家公司如果敢于把你没干过但是特别关注的事交给你干，那肯定值得考虑了。然后我当面就答应了，然后人力小姐姐给我讲了些规则等等，正好他们晚上是管饭的，看着伙食还不错，虽然他们早10点晚10点有时周六还得来，但是没办法教育行业嘛，要配合孩子嘛!至此，我觉得自己的好日子快到头了，可是谁想后来戏剧性又发生了，还没高兴三天他们人力突然告诉我由于部门调整招聘推迟几个月，还说还是第一次遇到这种事不知道怎样和我开口我说我也是第一次遇到这种事，但遇到了不也得接受嘛，一下子就感觉又跌入深渊了，幸福来得太快去得也快，以前就听说他们管理混乱没想到这么混乱。这个时候不知道是挣扎还是碰运气，我厚着脸皮联系了VIPKID问他们人招到了没，我愿意妥协等等，反正说了一大堆好话。他们技术总监倒是好说话问我怎样保证能够长期干，现在创业公司特别是弹性工作制很多人是不太愿意的，我就说自己不想那么多，只想一心干技术，不再折腾了，经历了这些明白了没有完美的公司我会好好干，后来总监也很给力说本来已经发了offer给别人，让给我了让我尽快过来。我也答应了并和他们人力妥协了，满以为就事情就这样了，可是随着我这边工作的深入，自己负责的事情越来越重要一时感觉脱不了身，另外工作时间与原来我坚持的修身时间也产生了冲突我得很长时间才能调整过来，最后我对他们创始人也感到担心，虽然有李开复背书总感觉步子迈太快了。另外个她和魅族的黄章一样高中没毕业就创业了，后来黄章老是干不过雷军我想可能是受限制于于眼界和资历吧。最后还觉得就算是教育也是有钱人的教育，对穷人的孩子不公平，我怎能忍心帮助进一步拉开贫富差距呢，原来没减负还好都是在学校学习现在倒好有钱人才能去学习没钱在孩子早早放学了在家呆着。可能我确实想的有点多，但是只要我想了说明就有这个不好好工作的隐患，这个隐患不解决就不可能好好工作。后来就向VIPKID坦白了，这件事自己确实做得不地道，高压下面没有坚持住，所以希望这些失败的经历都能为后续的工作做铺垫吧，便宜都给下一家公司了！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>后来这边经过一段时间的工作，选型等确定下来了后续就是采购商务的事情了，项目也算开展一半了，后续有一个月时间的真空期，我不想占用太多时间用来休息，感觉已经休息了一两个月的时间，也差不多休息好了！毕竟这家公司所用的东西只有我知道的五分之一左右，而且很多商务流程上的事情，我不想这么快就接触这些就想慢慢的继续找工作吧，由于经过一个多月的沟通交流发现自己出去话说得比以前溜多了，在面试上多少会有些加分，看来每段经历都有其作用哈！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>这时正值招人旺季，很多创业公司都打电话邀请面试，看行业有云计算的，有PASS平台的，有区域连的后来都没去看看，有的觉得相夕阳行业，有的觉得相有靠风口在嫌疑，要是风停了不得掉下了。另外发现国一个有趣在现象大公司特别是行业TOP都不会直接拒绝你，不会把你简历标记为不合适，最多是查看后不回复，哪怕你真的不合适。这可能是大公司的一种涵养吧其实直接拒绝也没啥，但是每当被一些小公司拒绝时就显得特别的恼火，其实人家也是对的直接拒绝和婉拒在结果不都一样在嘛，何必在意过程呢!
  </p>
</blockquote>
</li>
<li><blockquote>
<p>大公司扩展新业务或者扩招时比较好进有时会放低要求，除了这两种情况想进去也很难，必须是精挑细选能够替换原有岗位人选的候选者才有戏。所以现在主要把目标放在创业公司，由于是创业公司，又怕创业公司很快倒掉，所以需要对创业公司的将来有所预估，这时又得学习怎样的创业公司才是靠谱能够成长的企业？香港大学教授杨强所认为，人工智能企业要成功必须具备五大必要条件，即清晰的商业模式、高质量的大数据、清晰的问题定义和领域边界、以及高素质的跨界人才与充裕的资本支持。我想这个可以给大家参考下，我之前也咨询过好多去创业公司的老同事说法都差不多，但都有一定的风险，谁都不能保证将来会怎样，只能当作一段人生的经历吧！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>基于上面的标准我开始面试了几家比较有前途的不同行业创业公司，有智能家居的，有人工智能的，有无人机的。最后选了一家人工智能行业的创业公司，没有其他原因，就是面试的同事很有涵养，CTO说话也很有亲和力而且说了很多我听不明白的话。我这人好奇心特别强，就喜欢听未知在事情。另外发现圈子好小，我们都知道不少相同在人和事，谈着谈着感觉就出来了，由于之前一直没有机会和很多大牛一起共事，这次确实对我吸引比较大的相对于最近去在其他几家行业公司。收到Offer后我把拉勾卸载了，真的非常害怕自己喜欢上面试，我这个人干什么都喜欢上瘾，所以我尽量少干一些事情，比如我至今从来都不打游戏，但是我看书与电影却一直坚持了下来，可能我就是干什么就一直干的人吧。我这个人非常喜欢简洁就算最困难的时候也只用一款招聘软件，同样我手机里只有必须的几款APP，总共不过十款而且相同性质的APP绝对不超过两款，免得造成选择困难，弄得三心二意，不能惟精惟一！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>现在最难启齿的问题就是怎样和现领导说辞职的事，一个领导是老好人一个领导年轻有为。百般无赖下我在某一天工作汇报最后一条写了一句，我决定于某月某日离职。因为我每天都会写个日报简单的汇报下今天的工作内容微信发给领导，过了半小时我收到了领导答复好的。真是出乎我的意料，领导太有魅力非常佩服，后来电话说兄弟我飞过来请你吃饭（领导一般在外地办公），正应了那句话在公司是领导，出去了就是兄弟了，应该珍惜这段缘分，说不定哪天江湖再见呢！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>后续的事情就不好说了，我只祈祷顺利一点，真的实在没有折腾的资本了，也没有必要再折腾了，没有意义，否则真的是玩不好一失足成千古恨了，切记切记！
  </p>
</blockquote>
</li>
<li><blockquote>
<p>这段经历让我经常会去想自己出来是不是错了，本来找了一个挺不错的平台又出来是不是一错再错，特别是最后的这个几乎无可挑剔的还是出来了是不是自己无药可救了。我怎么能这么折腾，经常会有种觉今是而作非的感觉，差点让人崩溃，最后还是走下来了。如果时间能够倒转我还是不愿意回去，可能开始还有些后悔，可是后来发现自己太迷恋原来的舒适区了，太害怕改变与进入陌生的环境了，太在意自己的得失与荣辱了。这些都是自己成长过程中的障碍，需要消除！你要相信，你生命里遇到的每个人每件事，都有它的价值和意义，有些人教会你爱，有些事教会你成长，哪怕只是浅浅在你的路途中留下印记，也是一笔难能可贵的财富（不知道谁说在觉得挺好在就引用了下）！</p>
</blockquote>
</li>
</ul>
<h3 id="尾声"><a href="#尾声" class="headerlink" title="尾声"></a>尾声</h3><blockquote>
<p>开始我做的这些只是为了找一份完美的工作，由于自身底子薄碰了很多壁，后来我明白了没有完美的工作（事实上也是这样除非你心里觉他完美），最近读了稻盛和夫的干法，突然给我以醍醐灌顶在感觉！他对工作意义的探讨颠覆了我对工作的传统理解！我摘录如下：工作隐藏一种伟大的力量，它能够帮助你战胜命运中的苦难，工作就是提升心志、磨炼人格的修行，努力工作相当于佛祖所说的六度波罗蜜里面的精进，她的彼岸是美好人生，不管什么工作先设法喜欢上她，然后迷恋上她，最后和她融为一体，达到人工合一在境界！！！</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2018/11/09/2018/11/2018-11-09-%E7%B4%A0%E4%B9%A6%E6%B5%85%E6%B3%A8/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/09/2018/11/2018-11-09-%E7%B4%A0%E4%B9%A6%E6%B5%85%E6%B3%A8/index/" class="post-title-link" itemprop="url">素书浅注</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-09 08:00:00" itemprop="dateCreated datePublished" datetime="2018-11-09T08:00:00+08:00">2018-11-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:29" itemprop="dateModified" datetime="2023-05-26T15:06:29+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/note/" itemprop="url" rel="index"><span itemprop="name">note</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>
<h1 id="谷城山人黄石公授"><a href="#谷城山人黄石公授" class="headerlink" title="谷城山人黄石公授"></a>谷城山人黄石公授</h1><h1 id="韩人张子房受"><a href="#韩人张子房受" class="headerlink" title="韩人张子房受"></a>韩人张子房受</h1><h1 id="宋人张商英参"><a href="#宋人张商英参" class="headerlink" title="宋人张商英参"></a>宋人张商英参</h1><h1 id="今三杯水浅注"><a href="#今三杯水浅注" class="headerlink" title="今三杯水浅注"></a>今三杯水浅注</h1><hr>
<h2 id="缘起"><a href="#缘起" class="headerlink" title="缘起"></a>缘起</h2><p>素书从出生到传播都颇具传奇色彩。该书乃秦时隐士黄石公所作，在圯上授于张良，苦读养性十年，学成之后（也有人说得其一二），出来辅佐沛公助其夺取天下。子房功成后愿弃人间事，欲从赤松子游。愿未被吕后批准，后薨书亦不得传！ 五百年后晋乱，有盗发子房墓，于玉枕中获此书，上有密诫：“不许传于不道、不神、不圣、不贤之人；若非其人，必受其殃；得人不传，亦受其殃。”此后、该书才得以广传四方！ 素书共六章、一百三十二句、一千三百六十字，字字珠玑、言简意深、切而不迂、有益人事，得其一二即可受用终生。愿天下君子共享之！</p>
<hr>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h2 id="原始章"><a href="#原始章" class="headerlink" title="原始章"></a>原始章</h2><h3 id="夫道、德、仁、义、礼，五者一体也。"><a href="#夫道、德、仁、义、礼，五者一体也。" class="headerlink" title="夫道、德、仁、义、礼，五者一体也。"></a>夫道、德、仁、义、礼，五者一体也。</h3><p>注：道德仁义礼，五者缺一不可。</p>
<h3 id="道者，人之所蹈，使万物不知其所由。"><a href="#道者，人之所蹈，使万物不知其所由。" class="headerlink" title="道者，人之所蹈，使万物不知其所由。"></a>道者，人之所蹈，使万物不知其所由。</h3><p>注：自然万物（包括人）变化与发展的规律，仁者见仁、智者见智、不见者不知道（日用而不知）。</p>
<h3 id="德者，人之所得，使万物各得其所欲。"><a href="#德者，人之所得，使万物各得其所欲。" class="headerlink" title="德者，人之所得，使万物各得其所欲。"></a>德者，人之所得，使万物各得其所欲。</h3><p>注：使万物各得其有求必应（Bing名字取得好）。</p>
<h3 id="仁者，人之所亲，有慈惠恻隐之心，以遂其生成。"><a href="#仁者，人之所亲，有慈惠恻隐之心，以遂其生成。" class="headerlink" title="仁者，人之所亲，有慈惠恻隐之心，以遂其生成。"></a>仁者，人之所亲，有慈惠恻隐之心，以遂其生成。</h3><p>注：恻隐之心，良知的开端，成人之美。</p>
<h3 id="义者，人之所宜，惩善罚恶，以立功立事。"><a href="#义者，人之所宜，惩善罚恶，以立功立事。" class="headerlink" title="义者，人之所宜，惩善罚恶，以立功立事。"></a>义者，人之所宜，惩善罚恶，以立功立事。</h3><p>注：顺应天理。</p>
<h3 id="礼者，人之所履，凤兴夜寐，以成人伦之序。"><a href="#礼者，人之所履，凤兴夜寐，以成人伦之序。" class="headerlink" title="礼者，人之所履，凤兴夜寐，以成人伦之序。"></a>礼者，人之所履，凤兴夜寐，以成人伦之序。</h3><p>注：规矩法则。</p>
<h3 id="夫欲为人之本，不可无一焉。"><a href="#夫欲为人之本，不可无一焉。" class="headerlink" title="夫欲为人之本，不可无一焉。"></a>夫欲为人之本，不可无一焉。</h3><p>注：五者为立身之根本。</p>
<h3 id="贤人君子，明于盛衰之道，通乎成败之数；审乎治乱之势，达乎去就之理。"><a href="#贤人君子，明于盛衰之道，通乎成败之数；审乎治乱之势，达乎去就之理。" class="headerlink" title="贤人君子，明于盛衰之道，通乎成败之数；审乎治乱之势，达乎去就之理。"></a>贤人君子，明于盛衰之道，通乎成败之数；审乎治乱之势，达乎去就之理。</h3><p>注：盛衰规律，成败法则，治乱趋势，去就玄机。</p>
<h3 id="故潜居抱道，以待其时。"><a href="#故潜居抱道，以待其时。" class="headerlink" title="故潜居抱道，以待其时。"></a>故潜居抱道，以待其时。</h3><p>注：关键是要有器。</p>
<h3 id="若时至而行，则能极人臣之位；得机而动，则能成绝代之功。如其不遇，没身而已。"><a href="#若时至而行，则能极人臣之位；得机而动，则能成绝代之功。如其不遇，没身而已。" class="headerlink" title="若时至而行，则能极人臣之位；得机而动，则能成绝代之功。如其不遇，没身而已。"></a>若时至而行，则能极人臣之位；得机而动，则能成绝代之功。如其不遇，没身而已。</h3><p>注：精识时机。</p>
<h3 id="是以其道足高，而名重于后代。"><a href="#是以其道足高，而名重于后代。" class="headerlink" title="是以其道足高，而名重于后代。"></a>是以其道足高，而名重于后代。</h3><p>注：关键是要道高。</p>
<hr>
<h2 id="正道章"><a href="#正道章" class="headerlink" title="正道章"></a>正道章</h2><h3 id="德足以怀远，"><a href="#德足以怀远，" class="headerlink" title="德足以怀远，"></a>德足以怀远，</h3><p>注：德令人心悦诚服。</p>
<h3 id="信足以一异，义足以得众，"><a href="#信足以一异，义足以得众，" class="headerlink" title="信足以一异，义足以得众，"></a>信足以一异，义足以得众，</h3><p>注：以信统一异己，以义聚众，</p>
<h3 id="才足以鉴古今，明足以照下，此人之俊也。"><a href="#才足以鉴古今，明足以照下，此人之俊也。" class="headerlink" title="才足以鉴古今，明足以照下，此人之俊也。"></a>才足以鉴古今，明足以照下，此人之俊也。</h3><p>注：德、信、义、才、智兼备者是人中之俊。</p>
<h3 id="行足以为仪表，智足以决嫌疑，信可以使守约，廉可以使分财，此人之豪也。"><a href="#行足以为仪表，智足以决嫌疑，信可以使守约，廉可以使分财，此人之豪也。" class="headerlink" title="行足以为仪表，智足以决嫌疑，信可以使守约，廉可以使分财，此人之豪也。"></a>行足以为仪表，智足以决嫌疑，信可以使守约，廉可以使分财，此人之豪也。</h3><p>注：行、智、信、廉兼备者是人中之豪。</p>
<h3 id="守职而不废，处义而不回，见嫌而不苟免，见利而不苟得，此人之杰也。"><a href="#守职而不废，处义而不回，见嫌而不苟免，见利而不苟得，此人之杰也。" class="headerlink" title="守职而不废，处义而不回，见嫌而不苟免，见利而不苟得，此人之杰也。"></a>守职而不废，处义而不回，见嫌而不苟免，见利而不苟得，此人之杰也。</h3><p>注：忠于职守，舍生取义，挺身赴难，见利不取兼备者是人中之杰。</p>
<h3 id="传送门：立身根本具备后，可以通过好学广知、鉴古通今达到俊、豪、杰的境界。"><a href="#传送门：立身根本具备后，可以通过好学广知、鉴古通今达到俊、豪、杰的境界。" class="headerlink" title="传送门：立身根本具备后，可以通过好学广知、鉴古通今达到俊、豪、杰的境界。"></a>传送门：立身根本具备后，可以通过好学广知、鉴古通今达到俊、豪、杰的境界。</h3><hr>
<h2 id="求人之志章"><a href="#求人之志章" class="headerlink" title="求人之志章"></a>求人之志章</h2><h3 id="绝嗜禁欲，所以除累；"><a href="#绝嗜禁欲，所以除累；" class="headerlink" title="绝嗜禁欲，所以除累；"></a>绝嗜禁欲，所以除累；</h3><p>注：不要逐物。</p>
<h3 id="抑非损恶，所以禳过；"><a href="#抑非损恶，所以禳过；" class="headerlink" title="抑非损恶，所以禳过；"></a>抑非损恶，所以禳过；</h3><p>注：改过、责善。</p>
<h3 id="贬酒阙色，所以无污；"><a href="#贬酒阙色，所以无污；" class="headerlink" title="贬酒阙色，所以无污；"></a>贬酒阙色，所以无污；</h3><p>注：酒败神，神损，行事不清；色败精，性乱，思虑不明。</p>
<h3 id="避嫌远疑，所以不误；"><a href="#避嫌远疑，所以不误；" class="headerlink" title="避嫌远疑，所以不误；"></a>避嫌远疑，所以不误；</h3><p>注：这是守，前面见嫌不苟免是攻。</p>
<h3 id="博学切问，所以广知；"><a href="#博学切问，所以广知；" class="headerlink" title="博学切问，所以广知；"></a>博学切问，所以广知；</h3><p>注：知通智。</p>
<h3 id="高行微言，所以修身；"><a href="#高行微言，所以修身；" class="headerlink" title="高行微言，所以修身；"></a>高行微言，所以修身；</h3><p>注：言清、行高；高尚其行为，谦虚其言论。</p>
<h3 id="恭俭谦约，所以自守；"><a href="#恭俭谦约，所以自守；" class="headerlink" title="恭俭谦约，所以自守；"></a>恭俭谦约，所以自守；</h3><p>注：守之道。</p>
<h3 id="深计远虑，所以不穷；"><a href="#深计远虑，所以不穷；" class="headerlink" title="深计远虑，所以不穷；"></a>深计远虑，所以不穷；</h3><p>注：攻之道，有穷计非计。</p>
<h3 id="亲仁友直，所以扶颠；"><a href="#亲仁友直，所以扶颠；" class="headerlink" title="亲仁友直，所以扶颠；"></a>亲仁友直，所以扶颠；</h3><p>注：尊老、感恩；择友、长智。</p>
<h3 id="近恕笃行，所以接人；"><a href="#近恕笃行，所以接人；" class="headerlink" title="近恕笃行，所以接人；"></a>近恕笃行，所以接人；</h3><p>注：有容乃大。</p>
<h3 id="任材使能，所以济务；"><a href="#任材使能，所以济务；" class="headerlink" title="任材使能，所以济务；"></a>任材使能，所以济务；</h3><p>注：材，应变；能，可用。材领导；能执行。</p>
<h3 id="殚恶斥谗，所以止乱；"><a href="#殚恶斥谗，所以止乱；" class="headerlink" title="殚恶斥谗，所以止乱；"></a>殚恶斥谗，所以止乱；</h3><p>注：恶行谗言是乱之根，要止。</p>
<h3 id="推古验今，所以不惑；"><a href="#推古验今，所以不惑；" class="headerlink" title="推古验今，所以不惑；"></a>推古验今，所以不惑；</h3><p>注：鉴古通今，解惑法门。</p>
<h3 id="先揆后度，所以应卒；"><a href="#先揆后度，所以应卒；" class="headerlink" title="先揆后度，所以应卒；"></a>先揆后度，所以应卒；</h3><p>注：预、提前准备。</p>
<h3 id="设变致权，所以解结；"><a href="#设变致权，所以解结；" class="headerlink" title="设变致权，所以解结；"></a>设变致权，所以解结；</h3><p>注：应变、灵活。</p>
<h3 id="括囊顺会，所以无咎；"><a href="#括囊顺会，所以无咎；" class="headerlink" title="括囊顺会，所以无咎；"></a>括囊顺会，所以无咎；</h3><p>注：该出手时才出手。</p>
<h3 id="橛橛梗梗，所以立功；"><a href="#橛橛梗梗，所以立功；" class="headerlink" title="橛橛梗梗，所以立功；"></a>橛橛梗梗，所以立功；</h3><p>注：耿直顽强，能成就大业。</p>
<h3 id="孜孜淑淑，所以保终。"><a href="#孜孜淑淑，所以保终。" class="headerlink" title="孜孜淑淑，所以保终。"></a>孜孜淑淑，所以保终。</h3><p>注：勤劳贤惠，能善终无过。</p>
<hr>
<h2 id="本德宗道章"><a href="#本德宗道章" class="headerlink" title="本德宗道章"></a>本德宗道章</h2><h3 id="夫志心笃行之术，长莫长于博谋，"><a href="#夫志心笃行之术，长莫长于博谋，" class="headerlink" title="夫志心笃行之术，长莫长于博谋，"></a>夫志心笃行之术，长莫长于博谋，</h3><p>注：立志、勤学。</p>
<h3 id="安莫安于忍辱；"><a href="#安莫安于忍辱；" class="headerlink" title="安莫安于忍辱；"></a>安莫安于忍辱；</h3><p>注：曲则全；小不忍，乱大谋。</p>
<h3 id="先莫先于修德，"><a href="#先莫先于修德，" class="headerlink" title="先莫先于修德，"></a>先莫先于修德，</h3><p>注：成人之美为第一件事。</p>
<h3 id="乐莫乐于好善；"><a href="#乐莫乐于好善；" class="headerlink" title="乐莫乐于好善；"></a>乐莫乐于好善；</h3><p>注：乐善好施。</p>
<h3 id="神莫神于至诚，"><a href="#神莫神于至诚，" class="headerlink" title="神莫神于至诚，"></a>神莫神于至诚，</h3><p>注：心诚则灵。</p>
<h3 id="明莫明于体物；"><a href="#明莫明于体物；" class="headerlink" title="明莫明于体物；"></a>明莫明于体物；</h3><p>注：格物致知。</p>
<h3 id="吉莫吉于知足，"><a href="#吉莫吉于知足，" class="headerlink" title="吉莫吉于知足，"></a>吉莫吉于知足，</h3><p>注：知足，大吉。</p>
<h3 id="苦莫苦于多愿；"><a href="#苦莫苦于多愿；" class="headerlink" title="苦莫苦于多愿；"></a>苦莫苦于多愿；</h3><p>注：欲海难填。</p>
<h3 id="悲莫悲于精散，"><a href="#悲莫悲于精散，" class="headerlink" title="悲莫悲于精散，"></a>悲莫悲于精散，</h3><p>注：自控力。</p>
<h3 id="病莫病于无常；"><a href="#病莫病于无常；" class="headerlink" title="病莫病于无常；"></a>病莫病于无常；</h3><p>注：万物皆有常，勿挑战规律。</p>
<h3 id="短莫短于苟得，"><a href="#短莫短于苟得，" class="headerlink" title="短莫短于苟得，"></a>短莫短于苟得，</h3><p>注：取之有道；不苟安现状。</p>
<h3 id="幽莫幽于贪鄙；"><a href="#幽莫幽于贪鄙；" class="headerlink" title="幽莫幽于贪鄙；"></a>幽莫幽于贪鄙；</h3><p>注：利令智昏。</p>
<h3 id="孤莫孤于自恃，"><a href="#孤莫孤于自恃，" class="headerlink" title="孤莫孤于自恃，"></a>孤莫孤于自恃，</h3><p>注：自恃者孤。</p>
<h3 id="危莫危于任疑，"><a href="#危莫危于任疑，" class="headerlink" title="危莫危于任疑，"></a>危莫危于任疑，</h3><p>注：用人不疑，疑人不用。</p>
<h3 id="败莫败于多私。"><a href="#败莫败于多私。" class="headerlink" title="败莫败于多私。"></a>败莫败于多私。</h3><p>注：不私。</p>
<hr>
<h2 id="遵义章"><a href="#遵义章" class="headerlink" title="遵义章"></a>遵义章</h2><h3 id="以明示下者暗，"><a href="#以明示下者暗，" class="headerlink" title="以明示下者暗，"></a>以明示下者暗，</h3><p>注：水至清则无鱼，人至察则无徒。</p>
<h3 id="有过不知者蔽，"><a href="#有过不知者蔽，" class="headerlink" title="有过不知者蔽，"></a>有过不知者蔽，</h3><p>注：三省吾身；认识你自己；以能问于不能。</p>
<h3 id="迷而不返者惑，"><a href="#迷而不返者惑，" class="headerlink" title="迷而不返者惑，"></a>迷而不返者惑，</h3><p>注：流连荒亡；凡是要有度。</p>
<h3 id="以言取怨者祸，"><a href="#以言取怨者祸，" class="headerlink" title="以言取怨者祸，"></a>以言取怨者祸，</h3><p>注：祸从口出；谨言慎行。</p>
<h3 id="令与心乖者废，"><a href="#令与心乖者废，" class="headerlink" title="令与心乖者废，"></a>令与心乖者废，</h3><p>注：心令要如一。</p>
<h3 id="后令缪前者毁。"><a href="#后令缪前者毁。" class="headerlink" title="后令缪前者毁。"></a>后令缪前者毁。</h3><p>注：无信不成事。</p>
<h3 id="怒而无威者犯，"><a href="#怒而无威者犯，" class="headerlink" title="怒而无威者犯，"></a>怒而无威者犯，</h3><p>注：公生明，廉生威。</p>
<h3 id="好众辱人者殃；"><a href="#好众辱人者殃；" class="headerlink" title="好众辱人者殃；"></a>好众辱人者殃；</h3><p>注：不当众揭人之短。</p>
<h3 id="戮辱所任者危，"><a href="#戮辱所任者危，" class="headerlink" title="戮辱所任者危，"></a>戮辱所任者危，</h3><p>注：跟对领导很重要。</p>
<h3 id="慢其所敬者凶。"><a href="#慢其所敬者凶。" class="headerlink" title="慢其所敬者凶。"></a>慢其所敬者凶。</h3><p>注：不可怠慢帮助过自己的人。</p>
<h3 id="貌合心离者孤，"><a href="#貌合心离者孤，" class="headerlink" title="貌合心离者孤，"></a>貌合心离者孤，</h3><p>注：貌合神离，其势必孤，其力必散，其事必败。</p>
<h3 id="亲谗远忠者亡。"><a href="#亲谗远忠者亡。" class="headerlink" title="亲谗远忠者亡。"></a>亲谗远忠者亡。</h3><p>注：亲贤臣，远小人。</p>
<h3 id="近色远贤者昏，"><a href="#近色远贤者昏，" class="headerlink" title="近色远贤者昏，"></a>近色远贤者昏，</h3><p>注：重色会消磨志气。</p>
<h3 id="女谒公行者乱，"><a href="#女谒公行者乱，" class="headerlink" title="女谒公行者乱，"></a>女谒公行者乱，</h3><p>注：后宫干政者乱。</p>
<h3 id="私人以官者浮，"><a href="#私人以官者浮，" class="headerlink" title="私人以官者浮，"></a>私人以官者浮，</h3><p>注：不可任人唯亲唯私。</p>
<h3 id="凌下取胜者侵，"><a href="#凌下取胜者侵，" class="headerlink" title="凌下取胜者侵，"></a>凌下取胜者侵，</h3><p>注：不能以势压人、以权欺人。</p>
<h3 id="名不胜实者耗。"><a href="#名不胜实者耗。" class="headerlink" title="名不胜实者耗。"></a>名不胜实者耗。</h3><p>注：名不副实、后必败亡。</p>
<h3 id="略己而责人者不治，"><a href="#略己而责人者不治，" class="headerlink" title="略己而责人者不治，"></a>略己而责人者不治，</h3><p>注：有功归自己，不能服众；有过责于人，事业难成。</p>
<h3 id="自厚而薄人者弃废，"><a href="#自厚而薄人者弃废，" class="headerlink" title="自厚而薄人者弃废，"></a>自厚而薄人者弃废，</h3><p>注：只顾自己，不顾众人，迟早要被抛弃。</p>
<h3 id="以过弃功者损，"><a href="#以过弃功者损，" class="headerlink" title="以过弃功者损，"></a>以过弃功者损，</h3><p>注：不以一眚掩大德。</p>
<h3 id="群下外异者沦，"><a href="#群下外异者沦，" class="headerlink" title="群下外异者沦，"></a>群下外异者沦，</h3><p>注：上下离心，内外异志，沦亡之象。</p>
<h3 id="既用不任者疏，"><a href="#既用不任者疏，" class="headerlink" title="既用不任者疏，"></a>既用不任者疏，</h3><p>注：用人不放权，无法施展抱负，最终上下疏离。</p>
<h3 id="行赏吝色者沮，"><a href="#行赏吝色者沮，" class="headerlink" title="行赏吝色者沮，"></a>行赏吝色者沮，</h3><p>注：重金之下必有勇夫。</p>
<h3 id="多许少与者怨，"><a href="#多许少与者怨，" class="headerlink" title="多许少与者怨，"></a>多许少与者怨，</h3><p>注：要言而有信。</p>
<h3 id="既迎而拒者乖。"><a href="#既迎而拒者乖。" class="headerlink" title="既迎而拒者乖。"></a>既迎而拒者乖。</h3><p>注：表里不一，违反情理。</p>
<h3 id="薄施厚望者不报，"><a href="#薄施厚望者不报，" class="headerlink" title="薄施厚望者不报，"></a>薄施厚望者不报，</h3><p>注：要施恩不图报。</p>
<h3 id="贵而忘贱者不久，"><a href="#贵而忘贱者不久，" class="headerlink" title="贵而忘贱者不久，"></a>贵而忘贱者不久，</h3><p>注：勿以身贵而贱人。</p>
<h3 id="念旧恶而弃新功者凶。"><a href="#念旧恶而弃新功者凶。" class="headerlink" title="念旧恶而弃新功者凶。"></a>念旧恶而弃新功者凶。</h3><p>注：睚眦必报、气量狭小的人成不了大事也很危险。</p>
<h3 id="用人不得天者殆，"><a href="#用人不得天者殆，" class="headerlink" title="用人不得天者殆，"></a>用人不得天者殆，</h3><p>注：识人善用。</p>
<h3 id="强用人者不畜。"><a href="#强用人者不畜。" class="headerlink" title="强用人者不畜。"></a>强用人者不畜。</h3><p>注：人各有志，不可强求。</p>
<h3 id="为人择官者乱，"><a href="#为人择官者乱，" class="headerlink" title="为人择官者乱，"></a>为人择官者乱，</h3><p>注：私心太重！</p>
<h3 id="失其所强者弱。"><a href="#失其所强者弱。" class="headerlink" title="失其所强者弱。"></a>失其所强者弱。</h3><p>注：强弱的辩证关系。</p>
<h3 id="决策于不仁者险，"><a href="#决策于不仁者险，" class="headerlink" title="决策于不仁者险，"></a>决策于不仁者险，</h3><p>注：不仁之人，不堪大任。</p>
<h3 id="阴计外泄者败，"><a href="#阴计外泄者败，" class="headerlink" title="阴计外泄者败，"></a>阴计外泄者败，</h3><p>注：事以密成，语以泄败。</p>
<h3 id="厚敛薄施者凋。"><a href="#厚敛薄施者凋。" class="headerlink" title="厚敛薄施者凋。"></a>厚敛薄施者凋。</h3><p>注：多敛之国，其财比削。</p>
<h3 id="战士贫游士富者衰。"><a href="#战士贫游士富者衰。" class="headerlink" title="战士贫游士富者衰。"></a>战士贫游士富者衰。</h3><p>注：提高院士待遇，消减演员收入。</p>
<h3 id="货赂公行者昧。"><a href="#货赂公行者昧。" class="headerlink" title="货赂公行者昧。"></a>货赂公行者昧。</h3><p>注：私昧公，曲昧直。</p>
<h3 id="闻善忽略，记过不忘者暴。"><a href="#闻善忽略，记过不忘者暴。" class="headerlink" title="闻善忽略，记过不忘者暴。"></a>闻善忽略，记过不忘者暴。</h3><p>注：应该择其善者而从之，其不善者而改之。</p>
<h3 id="所任不可信，所信不可任者浊。"><a href="#所任不可信，所信不可任者浊。" class="headerlink" title="所任不可信，所信不可任者浊。"></a>所任不可信，所信不可任者浊。</h3><p>注：用人不疑，疑人不用。</p>
<h3 id="牧人以德者集，绳人以刑者散。"><a href="#牧人以德者集，绳人以刑者散。" class="headerlink" title="牧人以德者集，绳人以刑者散。"></a>牧人以德者集，绳人以刑者散。</h3><p>注：以德治国，以德服人。</p>
<h3 id="小功不赏，则大功不立；小怨不赦，则大怨必生。"><a href="#小功不赏，则大功不立；小怨不赦，则大怨必生。" class="headerlink" title="小功不赏，则大功不立；小怨不赦，则大怨必生。"></a>小功不赏，则大功不立；小怨不赦，则大怨必生。</h3><p>注：勿以善小而不为，勿以恶小而为之。</p>
<h3 id="赏不服人，罚不甘心者叛。赏及无功，罚及无罪者酷。"><a href="#赏不服人，罚不甘心者叛。赏及无功，罚及无罪者酷。" class="headerlink" title="赏不服人，罚不甘心者叛。赏及无功，罚及无罪者酷。"></a>赏不服人，罚不甘心者叛。赏及无功，罚及无罪者酷。</h3><p>注：赏罚分明。</p>
<h3 id="听谗而美，闻谏而仇者亡。"><a href="#听谗而美，闻谏而仇者亡。" class="headerlink" title="听谗而美，闻谏而仇者亡。"></a>听谗而美，闻谏而仇者亡。</h3><p>注：兼听则明，偏信则暗，闻谏而仇者亡。</p>
<h3 id="能有其有者安，贪人之有者残。"><a href="#能有其有者安，贪人之有者残。" class="headerlink" title="能有其有者安，贪人之有者残。"></a>能有其有者安，贪人之有者残。</h3><p>注：且行且珍惜；且夫天地之间，物各有主，苛非吾之所有，虽一毫而莫取。</p>
<hr>
<h2 id="安礼章"><a href="#安礼章" class="headerlink" title="安礼章"></a>安礼章</h2><h3 id="怨在不舍小过，患在不预定谋；"><a href="#怨在不舍小过，患在不预定谋；" class="headerlink" title="怨在不舍小过，患在不预定谋；"></a>怨在不舍小过，患在不预定谋；</h3><p>注：宽以待人；人无远见，必有近忧。凡事预则立不预则废。</p>
<h3 id="福在积善，祸在积恶；"><a href="#福在积善，祸在积恶；" class="headerlink" title="福在积善，祸在积恶；"></a>福在积善，祸在积恶；</h3><p>注：积善之家必有余庆，积恶之家必有余殃。</p>
<h3 id="饥在贱农，寒在堕织；"><a href="#饥在贱农，寒在堕织；" class="headerlink" title="饥在贱农，寒在堕织；"></a>饥在贱农，寒在堕织；</h3><p>注：衣食。</p>
<h3 id="安在得人，危在失上；"><a href="#安在得人，危在失上；" class="headerlink" title="安在得人，危在失上；"></a>安在得人，危在失上；</h3><p>注：千里马常有，伯乐不常有。</p>
<h3 id="富在迎来，贫在弃时。"><a href="#富在迎来，贫在弃时。" class="headerlink" title="富在迎来，贫在弃时。"></a>富在迎来，贫在弃时。</h3><p>注：富裕在于有长运的打算，着眼于未来；贫穷是因为不善于把握时机，抓不住机遇。贫富关键在眼光与努力（竟然有致富之道，好书好书啊！）。</p>
<h3 id="上无常躁，下多疑心；"><a href="#上无常躁，下多疑心；" class="headerlink" title="上无常躁，下多疑心；"></a>上无常躁，下多疑心；</h3><p>注：反复无常的领导要远离。</p>
<h3 id="轻上生罪，侮下无亲；"><a href="#轻上生罪，侮下无亲；" class="headerlink" title="轻上生罪，侮下无亲；"></a>轻上生罪，侮下无亲；</h3><p>注：不轻上，不侮下。</p>
<h3 id="近臣不重，远臣轻之；"><a href="#近臣不重，远臣轻之；" class="headerlink" title="近臣不重，远臣轻之；"></a>近臣不重，远臣轻之；</h3><p>注：核心机构必须要有威望。</p>
<h3 id="自疑不信人，自信不疑人；"><a href="#自疑不信人，自信不疑人；" class="headerlink" title="自疑不信人，自信不疑人；"></a>自疑不信人，自信不疑人；</h3><p>注：自信心。</p>
<h3 id="枉士无正友，"><a href="#枉士无正友，" class="headerlink" title="枉士无正友，"></a>枉士无正友，</h3><p>注：物以类聚，人以群分。</p>
<h3 id="曲上无直下；"><a href="#曲上无直下；" class="headerlink" title="曲上无直下；"></a>曲上无直下；</h3><p>注：上有所好，下有所好。</p>
<h3 id="危国无贤人，乱政无善人。"><a href="#危国无贤人，乱政无善人。" class="headerlink" title="危国无贤人，乱政无善人。"></a>危国无贤人，乱政无善人。</h3><p>注：危邦不入，乱邦不居。</p>
<h3 id="爱人深者求贤急，乐得贤者养人厚；"><a href="#爱人深者求贤急，乐得贤者养人厚；" class="headerlink" title="爱人深者求贤急，乐得贤者养人厚；"></a>爱人深者求贤急，乐得贤者养人厚；</h3><p>注：求贤若渴，高薪养廉。</p>
<h3 id="国将霸者士皆归，"><a href="#国将霸者士皆归，" class="headerlink" title="国将霸者士皆归，"></a>国将霸者士皆归，</h3><p>注：二线城市想上位，必须要吸引人才。</p>
<h3 id="邦将亡者贤先避；"><a href="#邦将亡者贤先避；" class="headerlink" title="邦将亡者贤先避；"></a>邦将亡者贤先避；</h3><p>注：明哲保身；苟全性命于乱世，不求闻达于诸侯。</p>
<h3 id="地薄者大物不产，水浅者大鱼不游；树秃者大禽不栖，林疏者大兽不居；"><a href="#地薄者大物不产，水浅者大鱼不游；树秃者大禽不栖，林疏者大兽不居；" class="headerlink" title="地薄者大物不产，水浅者大鱼不游；树秃者大禽不栖，林疏者大兽不居；"></a>地薄者大物不产，水浅者大鱼不游；树秃者大禽不栖，林疏者大兽不居；</h3><p>注：环境。</p>
<h3 id="山峭者崩，泽满者溢。"><a href="#山峭者崩，泽满者溢。" class="headerlink" title="山峭者崩，泽满者溢。"></a>山峭者崩，泽满者溢。</h3><p>注：满招损、谦受益；日中则移，月满则亏，物盛则衰。</p>
<h3 id="弃玉取石者盲，"><a href="#弃玉取石者盲，" class="headerlink" title="弃玉取石者盲，"></a>弃玉取石者盲，</h3><p>注：有眼无珠。</p>
<h3 id="羊质虎皮者辱；"><a href="#羊质虎皮者辱；" class="headerlink" title="羊质虎皮者辱；"></a>羊质虎皮者辱；</h3><p>注：纸老虎。</p>
<h3 id="衣不举领者倒，"><a href="#衣不举领者倒，" class="headerlink" title="衣不举领者倒，"></a>衣不举领者倒，</h3><p>注：领在上，袖在下。</p>
<h3 id="走不视地者颠；"><a href="#走不视地者颠；" class="headerlink" title="走不视地者颠；"></a>走不视地者颠；</h3><p>注：先低头看路，后抬头看天。</p>
<h3 id="柱弱者屋坏，辅弱者国倾；"><a href="#柱弱者屋坏，辅弱者国倾；" class="headerlink" title="柱弱者屋坏，辅弱者国倾；"></a>柱弱者屋坏，辅弱者国倾；</h3><p>注：才要胜任。</p>
<h3 id="足寒伤心，人怨伤国；"><a href="#足寒伤心，人怨伤国；" class="headerlink" title="足寒伤心，人怨伤国；"></a>足寒伤心，人怨伤国；</h3><p>注：心伤于足寒，国伤于民怨。</p>
<h3 id="山将崩者，下先隳；国将衰者，人先弊；"><a href="#山将崩者，下先隳；国将衰者，人先弊；" class="headerlink" title="山将崩者，下先隳；国将衰者，人先弊；"></a>山将崩者，下先隳；国将衰者，人先弊；</h3><p>注：民富则国强。</p>
<h3 id="根枯枝朽，人困国残；"><a href="#根枯枝朽，人困国残；" class="headerlink" title="根枯枝朽，人困国残；"></a>根枯枝朽，人困国残；</h3><p>注：根本。</p>
<h3 id="与覆车同轨者倾，与亡国同事者灭；"><a href="#与覆车同轨者倾，与亡国同事者灭；" class="headerlink" title="与覆车同轨者倾，与亡国同事者灭；"></a>与覆车同轨者倾，与亡国同事者灭；</h3><p>注：前车之鉴，后事之师。</p>
<h3 id="见已往，慎将来；恶其迹者，预避之。"><a href="#见已往，慎将来；恶其迹者，预避之。" class="headerlink" title="见已往，慎将来；恶其迹者，预避之。"></a>见已往，慎将来；恶其迹者，预避之。</h3><p>注：以史为鉴，继往开来。</p>
<h3 id="畏危者安，畏亡者存。夫人之所行，有道则吉，无道则凶。"><a href="#畏危者安，畏亡者存。夫人之所行，有道则吉，无道则凶。" class="headerlink" title="畏危者安，畏亡者存。夫人之所行，有道则吉，无道则凶。"></a>畏危者安，畏亡者存。夫人之所行，有道则吉，无道则凶。</h3><h3 id="吉者，百福所归；凶者，百祸所攻；非其神圣，自然所钟。"><a href="#吉者，百福所归；凶者，百祸所攻；非其神圣，自然所钟。" class="headerlink" title="吉者，百福所归；凶者，百祸所攻；非其神圣，自然所钟。"></a>吉者，百福所归；凶者，百祸所攻；非其神圣，自然所钟。</h3><p>注：有所畏惧；福兮祸所伏，祸兮福所倚。有道则吉，无道则凶。</p>
<h3 id="务善策者，无恶事；无远虑者，有近忧。"><a href="#务善策者，无恶事；无远虑者，有近忧。" class="headerlink" title="务善策者，无恶事；无远虑者，有近忧。"></a>务善策者，无恶事；无远虑者，有近忧。</h3><p>注：决策正确，没有祸患；人无远虑，必有近忧。</p>
<h3 id="重可使守固，不可使临阵。贪可使攻取，不可使分阵。廉可使守主，不可使应机。五者各随其材而用之。"><a href="#重可使守固，不可使临阵。贪可使攻取，不可使分阵。廉可使守主，不可使应机。五者各随其材而用之。" class="headerlink" title="重可使守固，不可使临阵。贪可使攻取，不可使分阵。廉可使守主，不可使应机。五者各随其材而用之。"></a>重可使守固，不可使临阵。贪可使攻取，不可使分阵。廉可使守主，不可使应机。五者各随其材而用之。</h3><p>注：量才任用，人尽其才。</p>
<h3 id="同志相得，同仁相忧，"><a href="#同志相得，同仁相忧，" class="headerlink" title="同志相得，同仁相忧，"></a>同志相得，同仁相忧，</h3><p>注：同志、同仁。</p>
<h3 id="同恶相党，"><a href="#同恶相党，" class="headerlink" title="同恶相党，"></a>同恶相党，</h3><p>注：恶趣。</p>
<h3 id="同爱相求，"><a href="#同爱相求，" class="headerlink" title="同爱相求，"></a>同爱相求，</h3><p>注：爱好。</p>
<h3 id="同美相妒，"><a href="#同美相妒，" class="headerlink" title="同美相妒，"></a>同美相妒，</h3><p>注：嫉妒。</p>
<h3 id="同智相谋，"><a href="#同智相谋，" class="headerlink" title="同智相谋，"></a>同智相谋，</h3><p>注：一山不容二虎。</p>
<h3 id="同贵相害，"><a href="#同贵相害，" class="headerlink" title="同贵相害，"></a>同贵相害，</h3><p>注：排挤。</p>
<h3 id="同利相忌，"><a href="#同利相忌，" class="headerlink" title="同利相忌，"></a>同利相忌，</h3><p>注：竞争。</p>
<h3 id="同声相应，同气相感，"><a href="#同声相应，同气相感，" class="headerlink" title="同声相应，同气相感，"></a>同声相应，同气相感，</h3><p>注：知音，感应。</p>
<h3 id="同类相依，同义相亲，同难相济，"><a href="#同类相依，同义相亲，同难相济，" class="headerlink" title="同类相依，同义相亲，同难相济，"></a>同类相依，同义相亲，同难相济，</h3><p>注：共同体。</p>
<h3 id="同道相成，"><a href="#同道相成，" class="headerlink" title="同道相成，"></a>同道相成，</h3><p>注：道不同者不相与谋。</p>
<h3 id="同艺相规，同巧相胜。"><a href="#同艺相规，同巧相胜。" class="headerlink" title="同艺相规，同巧相胜。"></a>同艺相规，同巧相胜。</h3><p>注：同行相轻。</p>
<h3 id="此乃数之所得，不可与理违。"><a href="#此乃数之所得，不可与理违。" class="headerlink" title="此乃数之所得，不可与理违。"></a>此乃数之所得，不可与理违。</h3><p>注：以上都是事物发展变化的客观规律，不可违背，要因势利导，随机应变。</p>
<h3 id="释己以教人者逆，正己以化人者顺。"><a href="#释己以教人者逆，正己以化人者顺。" class="headerlink" title="释己以教人者逆，正己以化人者顺。"></a>释己以教人者逆，正己以化人者顺。</h3><p>注：宽己严人违背常理，成不了大事；以身作则才能感化别人，事事顺遂。</p>
<h3 id="逆者难从，顺者易行；难从则乱，易行则理。"><a href="#逆者难从，顺者易行；难从则乱，易行则理。" class="headerlink" title="逆者难从，顺者易行；难从则乱，易行则理。"></a>逆者难从，顺者易行；难从则乱，易行则理。</h3><p>注：事逆难就，理顺易行。</p>
<h3 id="详体而行，理身、理家、理国可也。"><a href="#详体而行，理身、理家、理国可也。" class="headerlink" title="详体而行，理身、理家、理国可也。"></a>详体而行，理身、理家、理国可也。</h3><p>注：细细体悟实践，无论干啥都能得心应手，可保终吉。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2018/11/09/2018/11/2018-11-09-%E8%BF%90%E7%BB%B4%E9%9C%80%E8%A6%81%E8%BF%88%E8%BF%87%E7%9A%84%E4%B8%A4%E9%81%93%E5%9D%8E/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/09/2018/11/2018-11-09-%E8%BF%90%E7%BB%B4%E9%9C%80%E8%A6%81%E8%BF%88%E8%BF%87%E7%9A%84%E4%B8%A4%E9%81%93%E5%9D%8E/index/" class="post-title-link" itemprop="url">运维需要迈过的两道坎</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-09 08:00:00" itemprop="dateCreated datePublished" datetime="2018-11-09T08:00:00+08:00">2018-11-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:29" itemprop="dateModified" datetime="2023-05-26T15:06:29+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/op/" itemprop="url" rel="index"><span itemprop="name">op</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>我们知道有些事我们知道自己知道，比如最近感觉现阶段运维的终极问题是解决高可用高并发的问题。看到没有功能性都没有提，不能说他不值一提，至少包含在上面两个问题之中吧。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">关于这两个问题国内行业的公司做的还是不错的，比如阿里腾讯稍微解决了一些国内问题就能跻身世界行业TOP10。可见一个中国与半个世界等，从这方面看那些刚毕业的求职者也没必要去外企了，小打小闹终不成事，再说了再过几十年就是中国引领世界了，出去了还得回来，回来了看到自己回到的原点已经不是当初的那个原点，多尴尬，说远了止住。</span><br><span class="line"></span><br><span class="line">但是我发现大多公司还在修修补补上下功夫，就好比一个瓦罐掉地下摔坏了，我们舍不得或者没办法只能捡起来粘贴再用了。我们为什么不建一个摔不坏的罐子或者能自动修复的罐子呢？是什么限制了我们呢？难道是这么多年我们做的都是加法，我有个不成熟的想法，博士学位后是不是加个不士，忘掉那么多条条框框，就像张无忌一样忘记毕生所学，最终神功大成！</span><br><span class="line"></span><br><span class="line">有人可能会说这个资源有限暂时还行不通，我们都知道打怪能升级，难道人生不是打怪升级吗？有那么多时间浪费在游戏享受里，何不用于现实社会里打怪升级呢？一个事能不能成，取决于两个方面，我们可能只关注了事情的难度系数而忽略了解决问题的决心。在没有达到黎明前永远是黑暗，但不代表光明不会到来，我们只需要坚定的决心，关于这点各大学派都有论证就不多说了只要坚定执行就行。</span><br><span class="line"></span><br><span class="line">另外人终究会受到环境的影响，关于这个有两个方法，打怪升级创造环境;机缘巧合换个环境。只要出发点是好的，不用在意外界看法就行。毕竟很多人都是孤独的，孤独的人并不可耻，虽然孤独的人是可耻的很好听！</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2018/11/09/2018/11/2018-11-09-elasticstack5-2-2%E5%8D%87%E7%BA%A7%E5%88%B06-0-0%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/09/2018/11/2018-11-09-elasticstack5-2-2%E5%8D%87%E7%BA%A7%E5%88%B06-0-0%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/index/" class="post-title-link" itemprop="url">ElasticStack5.2.2升级到6.0.0注意事项</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-09 08:00:00" itemprop="dateCreated datePublished" datetime="2018-11-09T08:00:00+08:00">2018-11-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:29" itemprop="dateModified" datetime="2023-05-26T15:06:29+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bigdata/" itemprop="url" rel="index"><span itemprop="name">bigdata</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>最近把Elastic Stack从5.2.2版本升级到6.0.0版本，性能确实有所提高，文档记录了升级过程中需要注意的一些问题。</strong></p>
<hr>
<h3 id="架构图"><a href="#架构图" class="headerlink" title="架构图"></a><strong>架构图</strong></h3><blockquote>
<p><img src="/images/architecture.png"></p>
</blockquote>
<h3 id="一、Filebeat"><a href="#一、Filebeat" class="headerlink" title="一、Filebeat"></a><strong>一、Filebeat</strong></h3><p>6.0版本filebeat prospectors中的document_type被禁用,原来的topic: ‘%{[type]}’获取文档类型的方式不可用，但是引入了fields，后面映射模板也会用到。 1、document_type: yewuname 原来的Index名字为filebeat-yewuname-2018.01.19这样的按照天分割的，升级后document_type不支持了，需要修改为字段加type的形式如下fields: document_type: yewuname 2、输出kafka也需要修改topic: ‘%{[fields.document_type]}’ 3、logstash生成index也需要由原来的index &#x3D;&gt; “filebeat-%{type}-%{+YYYY.MM.dd}”改为index &#x3D;&gt; “filebeat-%{[fields][document_type]}-%{+YYYY.MM.dd}”，最终index命名为filebeat-yewuname-* 4、最后和Elasic支持人员沟通后得知，客户端filebeat不升级也可以，不影响使用</p>
<h3 id="二、Logstash"><a href="#二、Logstash" class="headerlink" title="二、Logstash"></a><strong>二、Logstash</strong></h3><p>1、主要是自定义映射模板需要修改，模板这块儿改动比较大，可以先使用默认的获取格式后再修改，然后得出自己的模板运用，使用了geoip定位，相关类型需要修改，最终模板如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/logstash/templates/nginx_template</span><br><span class="line">&#123;</span><br><span class="line">  &quot;template&quot; : &quot;filebeat-*&quot;,</span><br><span class="line">  &quot;settings&quot; : &#123;</span><br><span class="line">    &quot;index.refresh_interval&quot; : &quot;5s&quot;,</span><br><span class="line">     &quot;index.number_of_shards&quot;: &quot;8&quot;,</span><br><span class="line">     &quot;index.number_of_replicas&quot;: &quot;1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">    &quot;mappings&quot;: &#123;</span><br><span class="line">      &quot;_default_&quot;: &#123;</span><br><span class="line">        &quot;properties&quot;: &#123;</span><br><span class="line">          &quot;@timestamp&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;date&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;@version&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;agent&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;beat&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;object&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;clientRealIp&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;geoip&quot;: &#123;</span><br><span class="line">            &quot;properties&quot;: &#123;</span><br><span class="line">              &quot;city_name&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;fields&quot;: &#123;</span><br><span class="line">                  &quot;keyword&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                    &quot;ignore_above&quot;: 256</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;continent_code&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;fields&quot;: &#123;</span><br><span class="line">                  &quot;keyword&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                    &quot;ignore_above&quot;: 256</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;country_code2&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;fields&quot;: &#123;</span><br><span class="line">                  &quot;keyword&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                    &quot;ignore_above&quot;: 256</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;country_code3&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;fields&quot;: &#123;</span><br><span class="line">                  &quot;keyword&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                    &quot;ignore_above&quot;: 256</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;country_name&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;fields&quot;: &#123;</span><br><span class="line">                  &quot;keyword&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                    &quot;ignore_above&quot;: 256</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;dma_code&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;long&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;ip&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;fields&quot;: &#123;</span><br><span class="line">                  &quot;keyword&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                    &quot;ignore_above&quot;: 256</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;latitude&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;float&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;location&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;geo_point&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;longitude&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;float&quot;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;postal_code&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;fields&quot;: &#123;</span><br><span class="line">                  &quot;keyword&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                    &quot;ignore_above&quot;: 256</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;region_code&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;fields&quot;: &#123;</span><br><span class="line">                  &quot;keyword&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                    &quot;ignore_above&quot;: 256</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;region_name&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;fields&quot;: &#123;</span><br><span class="line">                  &quot;keyword&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                    &quot;ignore_above&quot;: 256</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &quot;timezone&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">                &quot;fields&quot;: &#123;</span><br><span class="line">                  &quot;keyword&quot;: &#123;</span><br><span class="line">                    &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                    &quot;ignore_above&quot;: 256</span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;http_host&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;method&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;referrer&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;request_uri&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;responsetime&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;float&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;size&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;long&quot;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;status&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;type&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;upstreamhost&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;url&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;text&quot;,</span><br><span class="line">            &quot;fields&quot;: &#123;</span><br><span class="line">              &quot;keyword&quot;: &#123;</span><br><span class="line">                &quot;type&quot;: &quot;keyword&quot;,</span><br><span class="line">                &quot;ignore_above&quot;: 256</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、输出到elasticsearch有些参数不支持了，需要注释flush_size,否则会报错The setting <code>flush_size</code> in plugin <code>elasticsearch</code> is obsolete and is no longer available. This setting is no longer available as we now try to restrict bulk requests to sane sizes. See the ‘Batch Sizes’ section of the docs.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">output &#123;    </span><br><span class="line">  elasticsearch &#123;</span><br><span class="line">    hosts =&gt; [&quot;192.168.88.240:9200&quot;,&quot;192.168.88.241:9200&quot;,&quot;192.168.88.242:9200&quot;,&quot;192.168.88.243:9200&quot;,&quot;192.168.88.244:9200&quot;]</span><br><span class="line">    index =&gt; &quot;filebeat-%&#123;[fields][document_type]&#125;-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">    manage_template =&gt; true</span><br><span class="line">    template_overwrite =&gt; true</span><br><span class="line">    template_name =&gt; &quot;nginx_template&quot;</span><br><span class="line">    template =&gt; &quot;/etc/logstash/templates/nginx_template&quot;</span><br><span class="line">    #flush_size =&gt; 20000</span><br><span class="line">    #idle_flush_time =&gt; 5</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="三、Elasticsearch"><a href="#三、Elasticsearch" class="headerlink" title="三、Elasticsearch"></a><strong>三、Elasticsearch</strong></h3><p>主要变更是该版本的一个Index只支持一个type了 官方提供有滚动升级，按照这个步骤尝试了下没有成功，后删数据硬升级，如果大家想尝试，步骤如下 滚动升级 <a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/rolling-upgrades.html">https://www.elastic.co/guide/en/elasticsearch/reference/5.6/rolling-upgrades.html</a></p>
<p>1、Disable shard allocation 例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT &#x27;192.168.88:9200/_cluster/settings?pretty&#x27; -H &#x27;Content-Type: application/json&#x27; -d&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;transient&quot;: &#123;</span><br><span class="line">    &quot;cluster.routing.allocation.enable&quot;: &quot;none&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT &#x27;192.168.88:9200/_cluster/settings?pretty&#x27; -H &#x27;Content-Type: application/json&#x27; -d&#x27;</span><br><span class="line">&gt; &#123;</span><br><span class="line">&gt;   &quot;transient&quot;: &#123;</span><br><span class="line">&gt;     &quot;cluster.routing.allocation.enable&quot;: &quot;none&quot;</span><br><span class="line">&gt;   &#125;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; &#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;acknowledged&quot; : true,</span><br><span class="line">  &quot;persistent&quot; : &#123; &#125;,</span><br><span class="line">  &quot;transient&quot; : &#123;</span><br><span class="line">    &quot;cluster&quot; : &#123;</span><br><span class="line">      &quot;routing&quot; : &#123;</span><br><span class="line">        &quot;allocation&quot; : &#123;</span><br><span class="line">          &quot;enable&quot; : &quot;none&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、Stop non-essential indexing and perform a synced flush (Optional) curl -XPOST ‘192.168.88:9200&#x2F;_flush&#x2F;synced?pretty’ 可选的，忽略</p>
<p>3、Stop and upgrade a single node &#x2F;etc&#x2F;init.d&#x2F;elasticsearch stop rpm -e elasticsearch-5.2.2-1.noarch rpm -ivh elasticsearch-6.0.0.rpm chkconfig –add elasticsearch chkconfig elasticsearch on cp elasticsearch.yml.rpmsave elasticsearch.yml 注意权限，卸载rpm包再安装rpm包后elasticsearch的uid与gid会变化 chown elasticsearch:elasticsearch &#x2F;data&#x2F;eslog&#x2F; -R chown elasticsearch:elasticsearch &#x2F;data&#x2F;esngx1&#x2F; -R chown elasticsearch:elasticsearch &#x2F;data&#x2F;esngx2&#x2F; -R</p>
<p>4、Upgrade any plugins 没有第三方插件，忽略</p>
<p>5、Start the upgraded node curl -XGET ‘192.168.88:9200&#x2F;_cat&#x2F;nodes?pretty’</p>
<p>6、Reenable shard allocation</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl -XPUT &#x27;192.168.88:9200/_cluster/settings?pretty&#x27; -H &#x27;Content-Type: application/json&#x27; -d&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;transient&quot;: &#123;</span><br><span class="line">    &quot;cluster.routing.allocation.enable&quot;: &quot;all&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure>

<p>7、Wait for the node to recover curl -XGET ‘192.168.88:9200&#x2F;_cat&#x2F;health?pretty’ curl -XGET ‘192.168.88:9200&#x2F;_cat&#x2F;recovery?pretty’</p>
<p>8、Repeat</p>
<h3 id="四、Kibana"><a href="#四、Kibana" class="headerlink" title="四、Kibana"></a><strong>四、Kibana</strong></h3><p>1、index名字是字段type加通配 2、导出老visualize模板后所有的visualize里面.raw改成.keyword，然后导入时dashboard需要与index一一对应</p>
<h3 id="五、Grafana"><a href="#五、Grafana" class="headerlink" title="五、Grafana"></a><strong>五、Grafana</strong></h3><p>同样修改数据源的index名字与查询语法.raw关键字为.keyword即可</p>
<h3 id="六、Elastalert"><a href="#六、Elastalert" class="headerlink" title="六、Elastalert"></a><strong>六、Elastalert</strong></h3><p>由于<a target="_blank" rel="noopener" href="https://github.com/Yelp/elastalert/releases">https://github.com/Yelp/elastalert/releases</a> 安装部署是最新版本是v0.1.25还不支持elasticsearch6.0，后参考<a target="_blank" rel="noopener" href="https://github.com/Yelp/elastalert/pull/1426">https://github.com/Yelp/elastalert/pull/1426</a> 修</p>
<p>改&#x2F;root&#x2F;elastalert-0.1.25&#x2F;elastalert目录下elastalert.py、create_index.py、ruletypes.py、test_rule.py四个文件，最后安装（备注以后安装后可以直接复制该目录到其他服务器上</p>
<p>安装，不需要再修改源码） 现在v0.1.26版本更新就支持elasticsearch6.0了，直接更新新版本就行。</p>
<h3 id="七、其他的kafka、nginx等不需要调整"><a href="#七、其他的kafka、nginx等不需要调整" class="headerlink" title="七、其他的kafka、nginx等不需要调整"></a><strong>七、其他的kafka、nginx等不需要调整</strong></h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2018/11/06/2018/11/2018-11-06-%E5%84%92%E5%AE%B6%E4%BD%9B%E6%95%99%E5%9F%BA%E7%9D%A3%E5%88%86%E5%88%AB%E4%BB%A5%E4%BB%80%E4%B9%88%E6%9D%A5%E5%9B%9E%E6%8A%A5%E6%80%A8/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/06/2018/11/2018-11-06-%E5%84%92%E5%AE%B6%E4%BD%9B%E6%95%99%E5%9F%BA%E7%9D%A3%E5%88%86%E5%88%AB%E4%BB%A5%E4%BB%80%E4%B9%88%E6%9D%A5%E5%9B%9E%E6%8A%A5%E6%80%A8/index/" class="post-title-link" itemprop="url">儒家佛教基督分别以什么来回报怨</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-06 08:00:00" itemprop="dateCreated datePublished" datetime="2018-11-06T08:00:00+08:00">2018-11-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:29" itemprop="dateModified" datetime="2023-05-26T15:06:29+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/confucian/" itemprop="url" rel="index"><span itemprop="name">confucian</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/confucian/zen/" itemprop="url" rel="index"><span itemprop="name">zen</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a><strong>前言</strong></h3><p>现实生活照怨恨，或者恶行，而且是与自己切身相关的，不可以事不关己高高挂起的那种，每个人或多或少会遇到不少。是忍是悟还是怼回去，估计每个人的处理方式都不太一样，我们不妨在经典里找找答案，毕竟我们今生遇到的很多问题或者难题其实很多古人或者牛人都遇到过，看看他们的答案或者处理方式多少对我们有些借鉴作用，能更好的帮助我们适应生活！</p>
</blockquote>
<h5 id="下面分别从儒家基督佛教的经典查找点资料，管中窥豹，估计难探究竟："><a href="#下面分别从儒家基督佛教的经典查找点资料，管中窥豹，估计难探究竟：" class="headerlink" title="下面分别从儒家基督佛教的经典查找点资料，管中窥豹，估计难探究竟："></a>下面分别从儒家基督佛教的经典查找点资料，管中窥豹，估计难探究竟：</h5><h3 id="儒家：以直抱怨"><a href="#儒家：以直抱怨" class="headerlink" title="儒家：以直抱怨"></a><strong>儒家：以直抱怨</strong></h3><ul>
<li>《论语宪问》最先记录了以直报怨，具体是或曰：“以德报怨，何如？”子曰：“何以报德？以直报怨，以德报德。”我特别佩服和喜欢孔子的是他是个真性情的人，也是个很正常的人，不虚伪，即正义又不失幽默，这样的做法简单公开透明，非常值得学习啊！</li>
<li>两千年后有个人际交往合作的简单策略即TFT策略， 是由计算机科学家阿纳托尔·拉波彼特编写的名叫Tit for Tat 的多重囚徒困境游戏而来，最终测试效果很好。其策略就两条：第一步，合作；以后每一步，重复对手的行动——你合作我合作，你背叛我背叛，简单讲就是以牙还牙，有点以彼之道还施彼身的感觉。</li>
</ul>
<h3 id="基督：不要与恶人作对"><a href="#基督：不要与恶人作对" class="headerlink" title="基督：不要与恶人作对"></a><strong>基督：不要与恶人作对</strong></h3><ul>
<li>马太福音第5章39节讲：不要与恶人作对，有人打你的右脸，连左脸也转过来由他打。我没有读过圣经，这句我之前只听说过有人打你右脸连左脸都得伸过去，所以特意查了下出处，也属于经典。只是说这句话的都是古人，在什么场景下所说，上下文是怎样的都不能确定的情况下就不能正确的理解说者的原意。就今天来讲，是不是说我们都有原罪，有人打您，是不是能抵消点罪恶，更容易上天堂。我想说的是打你的人咋办，是不是他打你了反而也帮助你抵消了罪恶，也能上天堂。这样算来就是一个愿打一个愿挨了！</li>
<li>这种境况估计是一种比较理想的情况，否则就是纵容了别人，或者坐等别人多行不义必自毙，或者坐等别人恶化，但终归对今生今世的人来说不太好吧，如果不相信来生的话。</li>
</ul>
<h3 id="佛教：善巧方便随缘度化"><a href="#佛教：善巧方便随缘度化" class="headerlink" title="佛教：善巧方便随缘度化"></a><strong>佛教：善巧方便随缘度化</strong></h3><ul>
<li>佛教对待怨的，好像没有特别贴合场景的经典句子。但是也有一些类似的（尽量找国人的例子可能更贴切）：南传法句经记录的“以怨报，怨难止；以忍止怨，怨自息。”；六组惠能的“若真修道人，不见世间过。”；寒山问曰：“世间谤我、欺我、辱我、笑我、轻我、贱我、恶我、骗我，该如何处之乎？”拾得答曰：“只需忍他、让他、由他、避他、耐他、敬他、不要理他、再待几年，你且看他。”</li>
<li>好像每个人（这里不能区分他们哪些是佛、菩萨、僧）的方式都不太一样，但其初心都是善巧方便随缘度化，这样看来佛教对待这个问题理解得更深入，执行得更负责，方案也比较多。所以他们的解决方案也更彻底，就是让你改恶从善，一心向佛，可以说是苦心一片，有时甚至使出霹雳手段，比如扫地僧两掌打死慕容博与萧远山再救活，让其放下屠刀，立地成佛！</li>
<li>但是佛教世界观至少是五维的，比我们思维动物至少多了一维，讲究的是过去现在未来，所以有些事情短时间内看不出效果，结果得不到反馈，也比较难让世人多理解！</li>
</ul>
<blockquote>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h3><p>正如俗话说俗话又说似的，不管怎么说都是片面的（估计也包括我这句）。唯一能确定的是不要做二维动物静止于一面，要对得起我们作为四维思维动物的头衔，随着时空不断变化来回切换，把自己放在对的位置在对的时候做对的事情。毕竟大部分人还是入世的，入世的话还是简单公开透明点好，当然如果有能力的话就度化他人，毕竟功德无量啊！</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2018/11/06/2018/11/2018-11-06-%E8%BF%90%E7%BB%B4%E7%9A%84%E7%8B%AC%E5%AD%A4%E4%B9%9D%E5%89%91/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/06/2018/11/2018-11-06-%E8%BF%90%E7%BB%B4%E7%9A%84%E7%8B%AC%E5%AD%A4%E4%B9%9D%E5%89%91/index/" class="post-title-link" itemprop="url">运维的独孤九剑</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-11-06 08:00:00" itemprop="dateCreated datePublished" datetime="2018-11-06T08:00:00+08:00">2018-11-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:29" itemprop="dateModified" datetime="2023-05-26T15:06:29+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/op/" itemprop="url" rel="index"><span itemprop="name">op</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="心法：遇强则强，遇弱则弱。切记不要对牛弹琴，班门弄斧倒是可以有。"><a href="#心法：遇强则强，遇弱则弱。切记不要对牛弹琴，班门弄斧倒是可以有。" class="headerlink" title="心法：遇强则强，遇弱则弱。切记不要对牛弹琴，班门弄斧倒是可以有。"></a><strong>心法：遇强则强，遇弱则弱。切记不要对牛弹琴，班门弄斧倒是可以有。</strong></h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://i.loli.net/2018/11/18/5bf15d38a2602.jpeg"><img src="/images/5bf15d38a2602.jpeg"></a></p>
</blockquote>
<h3 id="第一式、监控报警报表"><a href="#第一式、监控报警报表" class="headerlink" title="第一式、监控报警报表"></a><strong>第一式、监控报警报表</strong></h3><blockquote>
<ul>
<li>没有监控就是不知己，不知己每战必殆。</li>
<li>没有报警就是不能兼听，不兼听就不明。</li>
<li>没有报表，反正Leader不高兴，其他的也没啥吧，毕竟像杰夫·贝佐斯与张小龙这样的Leader很少吧！</li>
</ul>
</blockquote>
<h3 id="第二式、处理工单需求"><a href="#第二式、处理工单需求" class="headerlink" title="第二式、处理工单需求"></a><strong>第二式、处理工单需求</strong></h3><blockquote>
<ul>
<li>弟一原则：要求需求方明确需求，现在的宅男与腐女连话都不想说，还想他们说明白，难啊！所以需要细心呵护、耐心引导，方向要是不对，还怎么前进？</li>
<li>第二原则：坚持公开透明，以众生平等的理念对待各兄弟部门!</li>
<li>最后没有什么可补充的，除了Leader的需求要放在第一位!</li>
</ul>
</blockquote>
<h3 id="第三式、架构设计规划"><a href="#第三式、架构设计规划" class="headerlink" title="第三式、架构设计规划"></a><strong>第三式、架构设计规划</strong></h3><blockquote>
<ul>
<li>结合实际、统筹全局、与时俱进；至少你设计的架构能维持你去拜下一个山头之前吧，要爱惜自己的羽毛，别屈服于眼前的困难而有损了自己在江湖的荣誉和地位！</li>
<li>除了大招，小把戏小技巧也用一点，很多开源工具虽然名声没那么响，其实很实用，说不定哪天关键时刻能救命！</li>
<li>如果能力有限规划想不好，提前摊牌，给Leader找替代方案的时间。</li>
</ul>
</blockquote>
<h3 id="第四式、故障处理跟进"><a href="#第四式、故障处理跟进" class="headerlink" title="第四式、故障处理跟进"></a><strong>第四式、故障处理跟进</strong></h3><blockquote>
<ul>
<li>严格说没人喜欢故障，再坚固的城堡也能被攻破，而且从里面攻破轻而易举，所以需要规范各相关人员的操作流程、方式、风格。</li>
<li>故障万一出现了，第一时间是消除故障，此时要有备份方案或者Plan B，要是没有的话加强第三式的练习！</li>
<li>剩下的就是疼定思疼，分析问题找到故障的本质，最终给出解决方案，同一个问题不能第二次出现。</li>
</ul>
</blockquote>
<h3 id="第五式、资源协调整合"><a href="#第五式、资源协调整合" class="headerlink" title="第五式、资源协调整合"></a><strong>第五式、资源协调整合</strong></h3><blockquote>
<ul>
<li>简单的说，平时多和各兄弟部门走动，多了解各部门动向，情报工作很重要，说不定哪天一个需求来了，而你却巧妇难为无米之炊啊！隔行如隔山，对人家来说可能是个小需求，对你来说背地里却要下很多功夫！</li>
<li>凡事预则立不预则废，要有预判未来的能力，现在连机器都能预判未来，何况人呢？</li>
</ul>
</blockquote>
<h3 id="第六式、成本优化配置"><a href="#第六式、成本优化配置" class="headerlink" title="第六式、成本优化配置"></a><strong>第六式、成本优化配置</strong></h3><blockquote>
<ul>
<li>说到底我们都是商人，我们做的是买卖，当支出长期大于支收入的时候距离我们撤的时候也不远了！</li>
<li>特别是现在云环境下就应该按需分配，自动扩展，不可能一下子给你一年的口粮，每次给你一月就不错了。</li>
<li>至于优化这块儿，还得在第三式上下功夫，比如大师能够画一杠线就能解决问题，多节约时间及资源成本啊，要是把他拆卸了再搞，那不破费老多了？</li>
</ul>
</blockquote>
<h3 id="第七式、高可用高性能"><a href="#第七式、高可用高性能" class="headerlink" title="第七式、高可用高性能"></a><strong>第七式、高可用高性能</strong></h3><blockquote>
<ul>
<li>这个问题是运维的根本性问题，要是解决了你就是大师了，这个问题不好说，要是能成了大师再讲吧。</li>
<li>不过讲这个问题的有很多书，这里可以友情推荐一本作为入门：《亿级流量网站架构核心技术》！</li>
</ul>
</blockquote>
<h3 id="第八式、新技术新方向"><a href="#第八式、新技术新方向" class="headerlink" title="第八式、新技术新方向"></a><strong>第八式、新技术新方向</strong></h3><blockquote>
<ul>
<li>天下武功，唯快不破； 天下武功，唯快不破； 天下武功，唯快不破，重要的事情说三遍！</li>
<li>有了高铁后，跨省吃早餐不是问题；有了飞机后，跨国吃早餐不是问题；有了飞船后跨球吃早餐不是问题。按照现在技术更新发展的速度，再过几十年人们迟早会离开地球，进入宇宙。难道我们还不去了解下新技术吗？</li>
<li>关于新方向，人的精力与时间是有限的，一生只可能做那么几件事 ，所以要聚焦要专注，此时找对方向就显得特别重要！</li>
<li>关于怎样才能找对方向，那需要终身跨学科学习与提问，并且保持理性！</li>
</ul>
</blockquote>
<h3 id="第九式、写文档愿分享"><a href="#第九式、写文档愿分享" class="headerlink" title="第九式、写文档愿分享"></a><strong>第九式、写文档愿分享</strong></h3><blockquote>
<ul>
<li>提升的五个方式无外乎：读书、旅游、学习、拜见大师、自己悟。据说分享比读、写、学的效率都高，所以得多分享、多讲话！</li>
<li>另外文档除了技术交流文档，还应该有帮助文档，把常见的问题及流程文档化，在没有问答机器人的情况下，甩一个链接给需求方也是很节省时间的嘛！</li>
<li>人都是孤独的，所以运维也是孤独的，不是有一首歌叫孤独是可耻的嘛？虽然很好听，但是我还是推荐大家加入全球最大的同性交友网站Github吧，因为我们是人类命运共同体，不可能不分享！</li>
</ul>
</blockquote>
<h4 id="最后：由于事物具有不可知法则，有些事情我们知道我们知道，有些事情我们知道我们不知道，还有些事情我们不知道我们不知道，所以这里只能抛转引玉，错误疏漏再所难免，大家择其善者而从之，实属不得已而为之！"><a href="#最后：由于事物具有不可知法则，有些事情我们知道我们知道，有些事情我们知道我们不知道，还有些事情我们不知道我们不知道，所以这里只能抛转引玉，错误疏漏再所难免，大家择其善者而从之，实属不得已而为之！" class="headerlink" title="最后：由于事物具有不可知法则，有些事情我们知道我们知道，有些事情我们知道我们不知道，还有些事情我们不知道我们不知道，所以这里只能抛转引玉，错误疏漏再所难免，大家择其善者而从之，实属不得已而为之！"></a><strong>最后：由于事物具有不可知法则，有些事情我们知道我们知道，有些事情我们知道我们不知道，还有些事情我们不知道我们不知道，所以这里只能抛转引玉，错误疏漏再所难免，大家择其善者而从之，实属不得已而为之！</strong></h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/25/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><span class="page-number current">26</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jerry Min</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">260</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jerry Min</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
