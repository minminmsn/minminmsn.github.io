<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"minminmsn.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="MinMinMsn">
<meta property="og:url" content="https://minminmsn.github.io/page/11/index.html">
<meta property="og:site_name" content="MinMinMsn">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jerry Min">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://minminmsn.github.io/page/11/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>MinMinMsn</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">MinMinMsn</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2019/12/26/2019/12/2019-12-26-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E9%97%B4%E4%BB%B6proxysql%E8%AF%BB%E5%86%99%E8%87%AA%E5%8A%A8%E5%88%86%E7%A6%BB%E5%AE%9E%E8%B7%B5/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/26/2019/12/2019-12-26-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E9%97%B4%E4%BB%B6proxysql%E8%AF%BB%E5%86%99%E8%87%AA%E5%8A%A8%E5%88%86%E7%A6%BB%E5%AE%9E%E8%B7%B5/index/" class="post-title-link" itemprop="url">数据库中间件ProxySQL读写自动分离实践</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-26 08:00:00" itemprop="dateCreated datePublished" datetime="2019-12-26T08:00:00+08:00">2019-12-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:33" itemprop="dateModified" datetime="2023-05-26T15:06:33+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/middleware/" itemprop="url" rel="index"><span itemprop="name">middleware</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>参考文档</strong></p>
<p><a target="_blank" rel="noopener" href="https://github.com/sysown/proxysql">https://github.com/sysown/proxysql</a> <code>http://www.fordba.com/mysql_proxysql_rw_split.html</code> <a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhoujinyi/p/6829983.html">https://www.cnblogs.com/zhoujinyi/p/6829983.html</a></p>
<p><strong>腾讯云cdb可以提供主库VIP+只读从库VIP的形式，这样开发使用时需要维护2个VIP而且不能自动读写分离，基于现状计划使用proxysql结合clb及cdb来实现读写自动分离。 架构如下： app–clb四层–proxysql–主vip+自读vip</strong></p>
<p><strong>一.ProxySQL部署</strong> <strong>1.下载安装启动</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_24_centos ~]# wget https://github.com/sysown/proxysql/releases/download/v2.0.8/proxysql-2.0.8-1-centos7.x86_64.rpm</span><br><span class="line">[root@VM_8_24_centos ~]# rpm -ivh proxysql-2.0.8-1-centos7.x86_64.rpm</span><br><span class="line">[root@VM_8_24_centos ~]# systemctl start proxysql</span><br><span class="line">[root@VM_8_24_centos ~]# systemctl enable proxysql</span><br><span class="line">[root@VM_8_24_centos ~]# netstat -tulpn |grep 603</span><br><span class="line">tcp        0      0 0.0.0.0:6032            0.0.0.0:*               LISTEN      26063/proxysql      </span><br><span class="line">tcp        0      0 0.0.0.0:6033            0.0.0.0:*               LISTEN      26063/proxysql </span><br></pre></td></tr></table></figure>

<p><strong>2.登陆测试</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_24_centos ~]# mysql -uadmin -padmin -h 127.0.0.1 -P6032</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2</span><br><span class="line">Server version: 5.5.30 (ProxySQL Admin Module)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; show databases;</span><br><span class="line">+-----+---------------+-------------------------------------+</span><br><span class="line">| seq | name          | file                                |</span><br><span class="line">+-----+---------------+-------------------------------------+</span><br><span class="line">| 0   | main          |                                     |</span><br><span class="line">| 2   | disk          | /var/lib/proxysql/proxysql.db       |</span><br><span class="line">| 3   | stats         |                                     |</span><br><span class="line">| 4   | monitor       |                                     |</span><br><span class="line">| 5   | stats_history | /var/lib/proxysql/proxysql_stats.db |</span><br><span class="line">+-----+---------------+-------------------------------------+</span><br><span class="line">5 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; </span><br></pre></td></tr></table></figure>

<p><strong>二.ProxySQL配置</strong></p>
<p><strong>1.架构</strong> node1 (vip 192.168.0.9:3306) , mysql master node2 (vip 192.168.0.42:3306) , mysql slave prxoy (192.168.8.24:6033) , proxysql clb (vip 192.168.9.27:6033), clb proxysql app (192.168.0.26), mysql client</p>
<p><strong>2.proxysql上添加mysql主从数据库信息</strong> proxysql上执行，将主库master也就是做写入的节点放到group 0中，salve节点做读放到group 1中 语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into mysql_servers(hostgroup_id,hostname,port,weight,max_connections,max_replication_lag,comment) values(0,&#x27;192.168.0.9&#x27;,3306,1,2000,10,&#x27;TESTuser&#x27;);</span><br><span class="line">insert into mysql_servers(hostgroup_id,hostname,port,weight,max_connections,max_replication_lag,comment) values(1,&#x27;192.168.0.42&#x27;,3306,1,2000,10,&#x27;TESTuser&#x27;);</span><br><span class="line">select * from mysql_servers;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; insert into mysql_servers(hostgroup_id,hostname,port,weight,max_connections,ax_replication_lag,comment) values(0,&#x27;192.168.0.9&#x27;,3306,1,2000,10,&#x27;TESTuser&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; insert into mysql_servers(hostgroup_id,hostname,port,weight,max_connections,ax_replication_lag,comment) values(1,&#x27;192.168.0.42&#x27;,3306,1,2000,10,&#x27;TESTuser&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; select * from mysql_servers;</span><br><span class="line">+--------------+-----------+------+--------+--------+-------------+-----------------+--------------------+---------+----------------+---------+</span><br><span class="line">| hostgroup_id | hostname  | port | status | weight | compression | max_connections | max_relication_lag | use_ssl | max_latency_ms | comment |</span><br><span class="line">+--------------+-----------+------+--------+--------+-------------+-----------------+--------------------+---------+----------------+---------+</span><br><span class="line">| 0            | 192.168.0.9  | 3306 | ONLINE | 1      | 0           | 2000            | 10                 | 0       | 0              | TESTuser    |</span><br><span class="line">| 1            | 192.168.0.42 | 3306 | ONLINE | 1      | 0           | 2000            | 10                 | 0       | 0              | TESTuser    |</span><br><span class="line">+--------------+-----------+------+--------+--------+-------------+-----------------+--------------------+---------+----------------+---------+</span><br><span class="line">2 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<p><strong>3.mysql主库上添加proxysql监控账号及应用程序操作账号</strong> mysql master上执行，注意应用程序操作账号根据实际情况授予权限，最好只授权给proxysql主机 语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grant usage on *.* to &#x27;proxysql&#x27;@&#x27;192.168.8.24&#x27; identified by &#x27;ProxySQL@20191226&#x27;;</span><br><span class="line">grant select, insert, update, delete ON *.* TO &#x27;testuser&#x27;@&#x27;192.168.8.24&#x27; identified by &#x27;TESTuser@20191226&#x27;;</span><br><span class="line">flush privileges;</span><br><span class="line">select host,user from mysql.user;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; grant usage on *.* to &#x27;proxysql&#x27;@&#x27;192.168.8.24&#x27; identified by &#x27;ProxySQL@20191226&#x27;;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; grant select, insert, update, delete ON *.* TO &#x27;testuser&#x27;@&#x27;192.168.8.24&#x27; identified by &#x27;TESTuser@20191226&#x27;;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; select host,user from mysql.user;</span><br><span class="line">+-----------+------------------+</span><br><span class="line">| host      | user             |</span><br><span class="line">+-----------+------------------+</span><br><span class="line">| %         | TESTuser_data_servic |</span><br><span class="line">| %         | TESTuser_rule_rw     |</span><br><span class="line">| 192.168.8.24 | proxysql         |</span><br><span class="line">| 192.168.8.24 | testuser         |</span><br><span class="line">| 127.0.0.1 | root             |</span><br><span class="line">| localhost | mysql.sys        |</span><br><span class="line">| localhost | root             |</span><br><span class="line">+-----------+------------------+</span><br><span class="line">7 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<p><strong>4.proxysql上添加应用操作账号</strong> proxysql上执行，注意应用账号授权给主hostgroup，这里是0 语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into mysql_users(username,password,active,default_hostgroup) values (&#x27;testuser&#x27;,&#x27;TESTuser@20191226&#x27;,1,0);</span><br><span class="line">select * from mysql_users;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; insert into mysql_users(username,password,active,default_hostgroup) values (&#x27;testuser&#x27;,&#x27;TESTuser@20191226&#x27;,1,0);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; select * from mysql_users;</span><br><span class="line">+----------+---------------+--------+---------+-------------------+----------------+---------------+------------------------+--------------+---------+----------+-----------------+</span><br><span class="line">| username | password      | active | use_ssl | default_hostgroup | default_schema | schema_locked | transaction_persistent | fast_forward | backend | frontend | max_connections |</span><br><span class="line">+----------+---------------+--------+---------+-------------------+----------------+---------------+------------------------+--------------+---------+----------+-----------------+</span><br><span class="line">| testuser | TESTuser@20191226 | 1      | 0       | 0                 | NULL           | 0             | 1                      | 0            | 1       | 1        | 10000           |</span><br><span class="line">+----------+---------------+--------+---------+-------------------+----------------+---------------+------------------------+--------------+---------+----------+-----------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>注意：要是是用明文密码设置mysql_users，在这里可以用save命令来转换成了hash值的密码</p>
<p>语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">save mysql users to mem;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; save mysql users to mem;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; select username,password from mysql_users;</span><br><span class="line">+----------+-------------------------------------------+</span><br><span class="line">| username | password                                  |</span><br><span class="line">+----------+-------------------------------------------+</span><br><span class="line">| testuser | *59D7241B6C5F951F331FF88505C582CBCD42482F |</span><br><span class="line">+----------+-------------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>5.设置监控账号</strong> proxysql上操作，账号密码与mysql主库上账号密码保持一致 语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update global_variables set variable_value=&#x27;proxysql&#x27; where variable_name=&#x27;mysql-monitor_username&#x27;;</span><br><span class="line">update global_variables set variable_value=&#x27;ProxySQL@20191226&#x27; where variable_name=&#x27;mysql-monitor_password&#x27;;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; update global_variables set variable_value=&#x27;proxysql&#x27; where variable_name=&#x27;mysql-monitor_username&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; update global_variables set variable_value=&#x27;ProxySQL@20191226&#x27; where variable_name=&#x27;mysql-monitor_password&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>6.应用到线上</strong> proxysql上操作 语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">load mysql servers to runtime;</span><br><span class="line">load mysql users to runtime;</span><br><span class="line">load mysql variables to runtime;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; load mysql servers to runtime;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; load mysql users to runtime;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; load mysql variables to runtime;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>7.持久化</strong> proxysql上操作 语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">save mysql servers to disk;</span><br><span class="line">save mysql users to disk;</span><br><span class="line">save mysql variables to disk;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; save mysql servers to disk;</span><br><span class="line">Query OK, 0 rows affected (0.07 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; save mysql users to disk;</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; save mysql variables to disk;</span><br><span class="line">Query OK, 97 rows affected (0.02 sec)</span><br></pre></td></tr></table></figure>

<p><strong>8.自动读写分离配置</strong> proxysql上操作，定义路由规则，如：除select * from tb for update的select全部发送到slave，其他的的语句发送到master。</p>
<p>语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">insert into mysql_query_rules(active,match_pattern,destination_hostgroup,apply) values(1,&#x27;^SELECT.*FOR UPDATE$&#x27;,0,1);</span><br><span class="line">insert into mysql_query_rules(active,match_pattern,destination_hostgroup,apply) values(1,&#x27;^SELECT&#x27;,1,1);</span><br><span class="line">load mysql query rules to runtime;</span><br><span class="line">save mysql  query rules to disk;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; insert into mysql_query_rules(active,match_pattern,destination_hostgroup,apply) values(1,&#x27;^SELECT.*FOR UPDATE$&#x27;,0,1);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; insert into mysql_query_rules(active,match_pattern,destination_hostgroup,apply) values(1,&#x27;^SELECT&#x27;,1,1);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; load mysql query rules to runtime;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; save mysql  query rules to disk;</span><br><span class="line">Query OK, 0 rows affected (0.10 sec)</span><br></pre></td></tr></table></figure>

<p>说明：active表示是否启用这个sql路由项，match_pattern就是我们正则匹配项，destination_hostgroup表示我们要将该类sql转发到哪些mysql上面去，apply为1表示该正则匹配后，将不再接受其他匹配，直接转发。</p>
<p><strong>9.客户端测试效果</strong> 连接数据库，通过proxysql的客户端接口访问(6033)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_24_centos ~]# mysql -utestuser -pTESTuser@20191226 -h 127.0.0.1 -P6033</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 4</span><br><span class="line">Server version: 5.5.30 (ProxySQL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; show databases;</span><br><span class="line">+-------------------------+</span><br><span class="line">| Database                |</span><br><span class="line">+-------------------------+</span><br><span class="line">| information_schema      |</span><br><span class="line">| mysql                   |</span><br><span class="line">| performance_schema      |</span><br><span class="line">| TESTuser_data_services_dev  |</span><br><span class="line">| TESTuser_data_services_test |</span><br><span class="line">| TESTuser_rule               |</span><br><span class="line">+-------------------------+</span><br><span class="line">7 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; use TESTuser_rule;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">MySQL [TESTuser_rule]&gt; show tables;</span><br><span class="line">+-------------------------------+</span><br><span class="line">| Tables_in_TESTuser_rule           |</span><br><span class="line">+-------------------------------+</span><br><span class="line">| organ_1_b_12                  |</span><br><span class="line">| organ_1_b_13                  |</span><br><span class="line">| organ_1_b_14                  |</span><br><span class="line">| organ_1_b_15                  |</span><br><span class="line">| organ_1_b_16                  |</span><br><span class="line">| organ_1_b_19                  |</span><br><span class="line">+-------------------------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [TESTuser_rule]&gt; select * from organ_1_b_12;</span><br><span class="line">+----+--------------------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+---------+-----------+---------------------+</span><br><span class="line">| id | t0                 | t1   | t2   | t3   | t4   | t5   | t6   | t7   | t8   | t9   | t10  | t11  | t12  | t13  | t14  | t15  | t16  | t17  | t18  | t19  | user_id | nick_name | created             |</span><br><span class="line">+----+--------------------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+---------+-----------+---------------------+</span><br><span class="line">|  1 | 513427199402063414 | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL |       1 | admin     | 2018-10-31 11:50:38 |</span><br><span class="line">|  2 | 140502198811102244 | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL |       1 | admin     | 2018-10-31 14:35:36 |</span><br><span class="line">+----+--------------------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+---------+-----------+---------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>10.proxysql统计效果</strong> 通过proxysql接口正常操作数据，从管理接口看看ProxySQL的统计信息： 语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select Command,Total_Time_us,Total_cnt from stats_mysql_commands_counters where Total_cnt &gt;0;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; select Command,Total_Time_us,Total_cnt from stats_mysql_commands_counters where Total_cnt &gt;0;</span><br><span class="line">+---------+---------------+-----------+</span><br><span class="line">| Command | Total_Time_us | Total_cnt |</span><br><span class="line">+---------+---------------+-----------+</span><br><span class="line">| SELECT  | 5650          | 3         |</span><br><span class="line">| SHOW    | 7044          | 4         |</span><br><span class="line">+---------+---------------+-----------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>查看各类SQL的执行情况 语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from stats_mysql_query_digest;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; select * from stats_mysql_query_digest;</span><br><span class="line">+-----------+--------------------+----------+--------------------+----------------------------------+------------+------------+------------+----------+----------+----------+</span><br><span class="line">| hostgroup | schemaname         | username | digest             | digest_text                      | count_star | first_seen | last_seen  | sum_time | min_time | max_time |</span><br><span class="line">+-----------+--------------------+----------+--------------------+----------------------------------+------------+------------+------------+----------+----------+----------+</span><br><span class="line">| 1         | TESTuser_rule          | testuser | 0x504CF0771C9E548B | select * from organ_1_b_12       | 1          | 1577341448 | 1577341448 | 3746     | 3746     | 3746     |</span><br><span class="line">| 0         | TESTuser_rule          | testuser | 0x99531AEFF718C501 | show tables                      | 2          | 1577341415 | 1577341425 | 2252     | 669      | 1583     |</span><br><span class="line">| 1         | information_schema | testuser | 0x620B328FE9D6D71A | SELECT DATABASE()                | 1          | 1577341415 | 1577341415 | 1904     | 1904     | 1904     |</span><br><span class="line">| 0         | information_schema | testuser | 0x02033E45904D3DF0 | show databases                   | 1          | 1577341374 | 1577341374 | 2326     | 2326     | 2326     |</span><br><span class="line">| 0         | TESTuser_rule          | testuser | 0x02033E45904D3DF0 | show databases                   | 1          | 1577341415 | 1577341415 | 2466     | 2466     | 2466     |</span><br><span class="line">| 0         | information_schema | testuser | 0x226CD90D52A2BA0B | select @@version_comment limit ? | 1          | 1577341364 | 1577341364 | 0        | 0        | 0        |</span><br><span class="line">+-----------+--------------------+----------+--------------------+----------------------------------+------------+------------+------------+----------+----------+----------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><strong>11.通过clb解决proxysql单点故障并负债均衡</strong> 内网clb 192.168.9.27 tcp 6033端口到192.168.8.24 6033端口，其他proxysql绑定即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_0_26_centos ~]# mysql -utestuser -p -h 192.168.9.27 -P6033</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 2699</span><br><span class="line">Server version: 5.5.30 (ProxySQL)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; show databases;</span><br><span class="line">+-------------------------+</span><br><span class="line">| Database                |</span><br><span class="line">+-------------------------+</span><br><span class="line">| information_schema      |</span><br><span class="line">| mysql                   |</span><br><span class="line">| performance_schema      |</span><br><span class="line">| TESTuser_data_services_dev  |</span><br><span class="line">| TESTuser_data_services_test |</span><br><span class="line">| TESTuser_rule               |</span><br><span class="line">+-------------------------+</span><br><span class="line">7 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; select user,host from mysql.user;</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| user             | host      |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">| TESTuser_data_servic | %         |</span><br><span class="line">| TESTuser_rule_rw     | %         |</span><br><span class="line">| proxysql         | 192.168.8.24 |</span><br><span class="line">| testuser         | 192.168.8.24 |</span><br><span class="line">| root             | 127.0.0.1 |</span><br><span class="line">| mysql.sys        | localhost |</span><br><span class="line">| root             | localhost |</span><br><span class="line">+------------------+-----------+</span><br><span class="line">7 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2019/12/25/2019/12/2019-12-25-%E8%B4%A2%E5%95%86%E6%95%99%E8%82%B2%E5%85%A5%E9%97%A8/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/25/2019/12/2019-12-25-%E8%B4%A2%E5%95%86%E6%95%99%E8%82%B2%E5%85%A5%E9%97%A8/index/" class="post-title-link" itemprop="url">财商教育入门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-25 08:00:00" itemprop="dateCreated datePublished" datetime="2019-12-25T08:00:00+08:00">2019-12-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:33" itemprop="dateModified" datetime="2023-05-26T15:06:33+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/financial/" itemprop="url" rel="index"><span itemprop="name">financial</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近粗略的读了罗伯特·清崎的富爸爸系列丛书，本人不喜欢精读虽然这套丛书有很多重复的内容，但初期读了很多本之后也没啥感觉。还好没有放弃，在读到二十多本后，终于被作者不厌其烦苦口婆心的敦敦教诲触动了，特别是读到“并不是投资本身有风险，而是投资者有风险”时给人以醍醐灌顶的感觉，眼前一亮廓然开朗了！</p>
<p>富爸爸系列图书可以分步阅读，有理论也有实践，可以先建立理论基础，然后去实践，最后在实践中总结。虽然书中实践方法由于时间及社情不同，不可一味照搬使用，但是作者确实是授人以渔了，这个是最宝贵的地方。这里不得不佩服和表扬下日本人做事认真的态度，把很多细节都讲的很清楚。无论你现在是否遇到书中所讲，都建议通读。初读谓之印象；未来如遇到类似情景，印象会指引你找到书中的方法，彼时更是增益良多，或可得排忧解惑之良方也未可知。</p>
<p>概括下这一系列图书，其核心内容就是介绍了什么是财商？其中最重要的思想是分清资产及负债，然后关于怎样获得资产又分别从房地产、投资、创业等方面进行了细致的讲解。可以说是一套很丰富也很全面的讲解怎样提高财商最终达到早日退休实现财务自由的丛书，深入研究肯定会受益匪浅。</p>
<p><strong>什么是财商</strong> <strong>财商（或者叫财务知识）就是指一个人与金钱（财富）打交道的能力，</strong>它由4部分组成：</p>
<ul>
<li><p>会计（财务知识，也就是解读数字的能力以及评估一项生意的优势和劣势）</p>
</li>
<li><p>投资（钱生钱的科学和策略）</p>
</li>
<li><p>了解市场（供给与需求的科学以及市场条件）</p>
</li>
<li><p>法律（减税优惠和在诉讼中获得保护）</p>
</li>
</ul>
<p><strong>首先分清资产和负债</strong> 通俗来说，能带来收益的才是资产：<strong>资产是能把钱放进你口袋里的东西。</strong> 相反，消耗财富的就是负债：<strong>负债是把钱从你口袋里取走的东西。</strong> 从这个定义看，很多之前自认为是资产的东西其实是负债，比如汽车、自住房产、奢侈品等。它们不能带来现金收入，只会产生消耗。从这个角度上看，李开复说汽车是最差的一种投资，初衷应该是让你分清资产与负债。 真正的资产分为以下几类：</p>
<ul>
<li><p>股票</p>
</li>
<li><p>债券</p>
</li>
<li><p>能够产生收入的房地产</p>
</li>
<li><p>票据（借据）</p>
</li>
<li><p>版税，如音乐、手稿、专利</p>
</li>
<li><p>其他任何有价值、可产生收入或有增值潜力并且有很好销路的东西</p>
</li>
</ul>
<p><strong>特别提醒：专注于资产，而不是金钱。</strong></p>
<p><strong>然后了解获得资产的方法</strong> 丛书实践了以下几种方法：</p>
<ul>
<li><p>销售</p>
</li>
<li><p>杠杆致富</p>
</li>
<li><p>房地产投资</p>
</li>
<li><p>股票投资</p>
</li>
<li><p>创办公司</p>
</li>
</ul>
<p>具体方法，有的是通过一本书，也有的是通过几本书来讲述的，这里就不引用了，真的想要弄清楚还得先去读书获得方法论然后去实践才能着实体任。</p>
<p><strong>最后总结理财智慧</strong></p>
<ul>
<li><p>使一个人富有的，并不是房地产、股票、共同基金、生意或金钱，而是信息、知识、智慧和实践技能，这些统称为理财智慧。</p>
</li>
<li><p>许多人相信，花钱才能赚钱。实际并非如此。请你时刻牢记：如果你投资黄金失利的话，做其他投资也会赔钱。归根结底，不是黄金、股票、房地产、努力工作和金钱就可以使你变得更富有，而是你所知道的关于黄金、股票、房地产、努力工作和金钱的知识或信息能让你变得更富有。总而言之，是你的理财智慧、你的财商使你更富有。</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2019/12/24/2019/12/2019-12-24-wordpress5-3-2%E6%89%8B%E5%8A%A8%E6%9B%B4%E6%96%B0/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/24/2019/12/2019-12-24-wordpress5-3-2%E6%89%8B%E5%8A%A8%E6%9B%B4%E6%96%B0/index/" class="post-title-link" itemprop="url">WordPress5.3.2手动更新</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-24 08:00:00" itemprop="dateCreated datePublished" datetime="2019-12-24T08:00:00+08:00">2019-12-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:33" itemprop="dateModified" datetime="2023-05-26T15:06:33+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/middleware/" itemprop="url" rel="index"><span itemprop="name">middleware</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>WordPress 5.3.1发布后不久，就收到了一些相对严重的问题反馈，所以WordPress官方在较短时间内就发布了 WordPress 5.3.2，主要修复以下5个问题:</strong> 1. 日期&#x2F;时间：确保 get_feed_build_date() 正确处理具有无效日期的修订版文章对象。 2. 上传：修复了wp_unique_filename() 在不区分大小写的文件系统，上传包含大写扩展名的文件时，文件名冲突的问题。 3. 媒体：修复wp_unique_filename() 目标目录不可读时的PHP警告。 4. 管理后台：修复.active 类按钮的所有配色方案中的颜色。 5. 文章、文章类型：在 wp_insert_post()函数中，检查要设置future 或 publish 状态的文章日期时，使用适当的差异比较。</p>
<p>国内自动更新会由于各种问题导致更新失败： 1. 429 Too Many Requests 2. curl下载超时升级WordPress</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Warning: 发生了预料之外的错误。WordPress.org或是此服务器的配置可能出了一些问题。如果您持续遇到困难，请试试支持论坛。 （WordPress无法建立到WordPress.org的安全连接，请联系您的服务器管理员。） in /var/www/html/wp-admin/includes/update.php on line 139</span><br><span class="line">正在从https://downloads.wordpress.org/release/zh_CN/wordpress-5.3.2.zip下载更新…</span><br><span class="line"></span><br><span class="line">下载失败。: cURL error 28: Operation timed out after 300000 milliseconds with 1425003 out of 13427353 bytes received</span><br><span class="line"></span><br><span class="line">安装失败</span><br></pre></td></tr></table></figure>

<p><strong>下面介绍手动更新步骤</strong></p>
<ul>
<li><p>备份</p>
</li>
<li><p>下载</p>
</li>
<li><p>更新</p>
</li>
<li><p>检查</p>
</li>
</ul>
<p>备份原站点数据更新失败时可回滚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@wordpross webdata]# cp -a www/ www20191224</span><br><span class="line">[root@wordpross webdata]# ls</span><br><span class="line">db  www  www20191224</span><br></pre></td></tr></table></figure>

<p>下载解压缩设置好权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@wordpross ~]# wget  https://downloads.wordpress.org/release/zh_CN/wordpress-5.3.2.zip</span><br><span class="line">[root@wordpross ~]# unzip wordpress-5.3.2.zip</span><br><span class="line">[root@wordpross ~]# chown 33:tape wordpress -R</span><br></pre></td></tr></table></figure>

<p>删除原站点下wp-admin和wp-includes目录其他目录文件不变</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@wordpross www]# pwd</span><br><span class="line">/webdata/www</span><br><span class="line">[root@wordpross www]# ls</span><br><span class="line">index.php          wp-blog-header.php     wp-cron.php        wp-settings.php</span><br><span class="line">license.txt        wp-comments-post.php   wp-includes        wp-signup.php</span><br><span class="line">readme.html        wp-config.php          wp-links-opml.php  wp-trackback.php</span><br><span class="line">wordfence-waf.php  wp-config.php20181119  wp-load.php        xmlrpc.php</span><br><span class="line">wp-activate.php    wp-config-sample.php   wp-login.php</span><br><span class="line">wp-admin           wp-content             wp-mail.php</span><br><span class="line">[root@wordpross www]# rm -rf wp-admin/ </span><br><span class="line">[root@wordpross www]# rm -rf wp-includes/</span><br><span class="line">[root@wordpross www]# ls</span><br><span class="line">index.php          wp-blog-header.php     wp-content         wp-mail.php</span><br><span class="line">license.txt        wp-comments-post.php   wp-cron.php        wp-settings.php</span><br><span class="line">readme.html        wp-config.php          wp-links-opml.php  wp-signup.php</span><br><span class="line">wordfence-waf.php  wp-config.php20181119  wp-load.php        wp-trackback.php</span><br><span class="line">wp-activate.php    wp-config-sample.php   wp-login.php       xmlrpc.php</span><br></pre></td></tr></table></figure>

<p>进入到新版本wordpress目录下删除wp-content目录并把其他目录及文件覆盖到原站点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@wordpross www]# cd /root/wordpress/</span><br><span class="line">[root@wordpross wordpress]# rm -rf wp-content/ </span><br><span class="line">[root@wordpross wordpress]# ls</span><br><span class="line">index.php        wp-admin              wp-cron.php        wp-login.php     wp-trackback.php</span><br><span class="line">license.txt      wp-blog-header.php    wp-includes        wp-mail.php      xmlrpc.php</span><br><span class="line">readme.html      wp-comments-post.php  wp-links-opml.php  wp-settings.php</span><br><span class="line">wp-activate.php  wp-config-sample.php  wp-load.php        wp-signup.php</span><br><span class="line">[root@wordpross wordpress]# mv * /webdata/www/</span><br><span class="line">mv: overwrite ‘/webdata/www/index.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/license.txt’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/readme.html’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-activate.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-blog-header.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-comments-post.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-config-sample.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-cron.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-links-opml.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-load.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-login.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-mail.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-settings.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-signup.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/wp-trackback.php’? y</span><br><span class="line">mv: overwrite ‘/webdata/www/xmlrpc.php’? y</span><br></pre></td></tr></table></figure>

<p>检查站点</p>
<p><a target="_blank" rel="noopener" href="https://minminmsn.com/wp-admin/upgrade.php">https://minminmsn.com/wp-admin/upgrade.php</a></p>
<p>无需升级 您的WordPress数据库已经是最新的了！</p>
<p><a target="_blank" rel="noopener" href="https://minminmsn.com/" title="继续">继续</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2019/12/23/2019/12/2019-12-23-%E8%85%BE%E8%AE%AF%E4%BA%91tke%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1%E8%B0%83%E6%95%B4kubelet%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/23/2019/12/2019-12-23-%E8%85%BE%E8%AE%AF%E4%BA%91tke%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1%E8%B0%83%E6%95%B4kubelet%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95/index/" class="post-title-link" itemprop="url">腾讯云tke容器服务调整kubelet工作目录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-23 08:00:00" itemprop="dateCreated datePublished" datetime="2019-12-23T08:00:00+08:00">2019-12-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:33" itemprop="dateModified" datetime="2023-05-26T15:06:33+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cloud/" itemprop="url" rel="index"><span itemprop="name">cloud</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>腾讯云默认kubelet工作目录在&#x2F;var&#x2F;lib&#x2F;kubelet使用的是系统盘，系统盘一般不够大也不方便扩容，所以需要修改kubelet工作目录。大概流程如下：</strong></p>
<ul>
<li><p>准备工作</p>
</li>
<li><p>驱逐节点</p>
</li>
<li><p>修改配置</p>
</li>
<li><p>重启服务</p>
</li>
<li><p>解封节点</p>
</li>
<li><p>验证服务</p>
</li>
</ul>
<p><strong>准备工作</strong> 查找kubelet启动文件，一般配置信息在启动文件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_9_centos ~]# locate kubelet.service</span><br><span class="line">/etc/systemd/system/multi-user.target.wants/kubelet.service</span><br><span class="line">/usr/lib/systemd/system/kubelet.service</span><br><span class="line">[root@VM_8_9_centos ~]# ls -lh /usr/lib/systemd/system/kubelet.service </span><br><span class="line">[root@VM_8_9_centos ~]# ls -lh  /etc/systemd/system/multi-user.target.wants/kubelet.service</span><br><span class="line">lrwxrwxrwx 1 root root 39 Sep 25 11:59 /etc/systemd/system/multi-user.target.wants/kubelet.service -&gt; /usr/lib/systemd/system/kubelet.service</span><br><span class="line"></span><br><span class="line">[root@VM_8_9_centos ~]# cat /usr/lib/systemd/system/kubelet.service </span><br><span class="line"></span><br><span class="line">[Unit]</span><br><span class="line">Description=kubelet</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Environment=QCLOUD_NORM_URL=</span><br><span class="line">EnvironmentFile=-/etc/kubernetes/kubelet</span><br><span class="line">ExecStart=/usr/bin/kubelet $&#123;CNI_BIN_DIR&#125; $&#123;KUBE_RESERVED&#125; $&#123;MAX_PODS&#125; $&#123;CLOUD_PROVIDER&#125; $&#123;CLOUD_CONFIG&#125; $&#123;POD_INFRA_CONTAINER_IMAGE&#125; $&#123;CLUSTER_DOMAIN&#125; $&#123;ALLOW_PRIVILEGED&#125; $&#123;REGISTER_SCHEDULABLE&#125; $&#123;FAIL_SWAP_ON&#125; $&#123;ANONYMOUS_AUTH&#125; $&#123;IMAGE_PULL_PROGRESS_DEADLINE&#125; $&#123;HOSTNAME_OVERRIDE&#125; $&#123;EVICTION_HARD&#125; $&#123;AUTHENTICATION_TOKEN_WEBHOOK&#125; $&#123;CLIENT_CA_FILE&#125; $&#123;AUTHORIZATION_MODE&#125; $&#123;CLUSTER_DNS&#125; $&#123;NON_MASQUERADE_CIDR&#125; $&#123;NETWORK_PLUGIN&#125; $&#123;KUBECONFIG&#125; $&#123;V&#125;</span><br><span class="line">ExecStartPost=-/bin/bash /etc/kubernetes/deny-tcp-port-10250.sh</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=10</span><br><span class="line">LimitNOFILE=65536</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>根据启动文件发现环境文件在kubelet中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_9_centos ~]# cat /etc/kubernetes/kubelet</span><br><span class="line">CNI_BIN_DIR=&quot;--cni-bin-dir=/opt/cni/bin/&quot;</span><br><span class="line">KUBE_RESERVED=&quot;--kube-reserved=cpu=90m,memory=1830Mi&quot;</span><br><span class="line">MAX_PODS=&quot;--max-pods=253&quot;</span><br><span class="line">CLOUD_PROVIDER=&quot;--cloud-provider=qcloud&quot;</span><br><span class="line">CLOUD_CONFIG=&quot;--cloud-config=/etc/kubernetes/qcloud.conf&quot;</span><br><span class="line">POD_INFRA_CONTAINER_IMAGE=&quot;--pod-infra-container-image=ccr.ccs.tencentyun.com/library/pause:latest&quot;</span><br><span class="line">CLUSTER_DOMAIN=&quot;--cluster-domain=cluster.local&quot;</span><br><span class="line">ALLOW_PRIVILEGED=&quot;--allow-privileged=true&quot;</span><br><span class="line">REGISTER_SCHEDULABLE=&quot;--register-schedulable=true&quot;</span><br><span class="line">FAIL_SWAP_ON=&quot;--fail-swap-on=false&quot;</span><br><span class="line">ANONYMOUS_AUTH=&quot;--anonymous-auth=false&quot;</span><br><span class="line">IMAGE_PULL_PROGRESS_DEADLINE=&quot;--image-pull-progress-deadline=10m0s&quot;</span><br><span class="line">HOSTNAME_OVERRIDE=&quot;--hostname-override=192.168.8.9&quot;</span><br><span class="line">EVICTION_HARD=&quot;--eviction-hard=nodefs.available&lt;10%,nodefs.inodesFree&lt;5%,imagefs.available&lt;15%,memory.available&lt;100Mi&quot;</span><br><span class="line">AUTHENTICATION_TOKEN_WEBHOOK=&quot;--authentication-token-webhook=true&quot;</span><br><span class="line">CLIENT_CA_FILE=&quot;--client-ca-file=/etc/kubernetes/cluster-ca.crt&quot;</span><br><span class="line">AUTHORIZATION_MODE=&quot;--authorization-mode=Webhook&quot;</span><br><span class="line">CLUSTER_DNS=&quot;--cluster-dns=172.16.255.48&quot;</span><br><span class="line">NON_MASQUERADE_CIDR=&quot;--non-masquerade-cidr=0.0.0.0/0&quot;</span><br><span class="line">NETWORK_PLUGIN=&quot;--network-plugin=cni&quot;</span><br><span class="line">KUBECONFIG=&quot;--kubeconfig=/etc/kubernetes/kubelet-kubeconfig&quot;</span><br><span class="line">V=&quot;--v=2&quot;</span><br></pre></td></tr></table></figure>

<p><strong>驱逐节点</strong> 驱逐会自动封锁节点（将节点内pod驱逐到集群中其他节点上，不影响集群使用，DaemonSet pod除外），驱逐后会检查节点为不可调度状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_9_centos ~]# kubectl drain 192.168.8.9</span><br><span class="line">node/192.168.8.9 cordoned</span><br><span class="line">error: unable to drain node &quot;192.168.8.9&quot;, aborting command...</span><br><span class="line"></span><br><span class="line">There are pending nodes to be drained:</span><br><span class="line"> 192.168.8.9</span><br><span class="line">error: DaemonSet-managed pods (use --ignore-daemonsets to ignore): rancher-logging-fluentd-tlqnq, rancher-logging-log-aggregator-m5g69, registry-proxy-xkmk5, exporter-node-cluster-monitoring-t5jj7, cattle-node-agent-j8wcn, ccs-log-collector-x57f8, ip-masq-agent-xt9q2, tke-bridge-agent-8rxgl, tke-cni-agent-lvv98; pods with local storage (use --delete-local-data to override): coupon-service-1, yuedi-passenger-api-1, coupon-service-1, rental-api-1, passenger-api-0, eureka-1, service-9777bd6ff-bsnj7, rental-service-0, passenger-api-0, swift-778d866966-c6nk7</span><br><span class="line"></span><br><span class="line">[root@VM_8_9_centos ~]# kubectl get nodes</span><br><span class="line">NAME        STATUS                     ROLES    AGE    VERSION</span><br><span class="line">192.168.8.14   Ready                      &lt;none&gt;   89d    v1.12.4-tke.10</span><br><span class="line">192.168.8.15   Ready                      &lt;none&gt;   181d   v1.12.4-tke.3</span><br><span class="line">192.168.8.3    Ready                      &lt;none&gt;   181d   v1.12.4-tke.3</span><br><span class="line">192.168.8.4    Ready                      &lt;none&gt;   181d   v1.12.4-tke.3</span><br><span class="line">192.168.8.9    Ready,SchedulingDisabled   &lt;none&gt;   89d    v1.12.4-tke.10</span><br><span class="line"></span><br><span class="line">[root@VM_8_9_centos ~]# ls /data/</span><br><span class="line">docker  kubelet  lost+found</span><br></pre></td></tr></table></figure>

<p><strong>修改配置</strong> 修改kubelet配置文件第一行添加kubelet 目录参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_9_centos ~]#  head -n 1 /etc/kubernetes/kubelet</span><br><span class="line">ROOT_DIR=&quot;--root-dir=/data/kubelet&quot;</span><br></pre></td></tr></table></figure>

<p>修改启动配置文件添加ROOT_DIR参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_9_centos ~]# vim /usr/lib/systemd/system/kubelet.service </span><br><span class="line">ExecStart=/usr/bin/kubelet $&#123;ROOT_DIR&#125; $&#123;CNI_BIN_DIR&#125; $&#123;KUBE_RESERVED&#125; $&#123;MAX_PODS&#125; $&#123;CLOUD_PROVIDER&#125; $&#123;CLOUD_CONFIG&#125; $&#123;POD_INFRA_CONTAINER_IMAGE&#125; $&#123;CLUSTER_DOMAIN&#125; $&#123;ALLOW_PRIVILEGED&#125; $&#123;REGISTER_SCHEDULABLE&#125; $&#123;FAIL_SWAP_ON&#125; $&#123;ANONYMOUS_AUTH&#125; $&#123;IMAGE_PULL_PROGRESS_DEADLINE&#125; $&#123;HOSTNAME_OVERRIDE&#125; $&#123;EVICTION_HARD&#125; $&#123;AUTHENTICATION_TOKEN_WEBHOOK&#125; $&#123;CLIENT_CA_FILE&#125; $&#123;AUTHORIZATION_MODE&#125; $&#123;CLUSTER_DNS&#125; $&#123;NON_MASQUERADE_CIDR&#125; $&#123;NETWORK_PLUGIN&#125; $&#123;KUBECONFIG&#125; $&#123;V&#125;</span><br></pre></td></tr></table></figure>

<p><strong>重启服务</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_9_centos ~]# systemctl daemon-reload </span><br><span class="line">[root@VM_8_9_centos ~]# systemctl restart kubelet</span><br><span class="line">[root@VM_8_9_centos ~]# systemctl status kubelet -l</span><br><span class="line">● kubelet.service - kubelet</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/kubelet.service; enabled; vendor preset: disabled)ls /</span><br><span class="line">   Active: active (running) since Mon 2019-12-23 16:38:04 CST; 1min 2s ago</span><br><span class="line">  Process: 24745 ExecStartPost=/bin/bash /etc/kubernetes/deny-tcp-port-10250.sh (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 24744 (kubelet)</span><br><span class="line">    Tasks: 26</span><br><span class="line">   Memory: 49.2M</span><br><span class="line">   CGroup: /system.slice/kubelet.service</span><br><span class="line">           └─24744 /usr/bin/kubelet --root-dir=/data/kubelet --cni-bin-dir=/opt/cni/bin/ --kube-reserved=cpu=90m,memory=1830Mi --max-pods=253 --cloud-provider=qcloud --cloud-config=/etc/kubernetes/qcloud.conf --pod-infra-container-image=ccr.ccs.tencentyun.com/library/pause:latest --cluster-domain=cluster.local --allow-privileged=true --register-schedulable=true --fail-swap-on=false --anonymous-auth=false --image-pull-progress-deadline=10m0s --hostname-override=192.168.8.9 --eviction-hard=nodefs.available&lt;10%,nodefs.inodesFree&lt;5%,imagefs.available&lt;15%,memory.available&lt;100Mi --authentication-token-webhook=true --client-ca-file=/etc/kubernetes/cluster-ca.crt --authorization-mode=Webhook --cluster-dns=172.16.255.48 --non-masquerade-cidr=0.0.0.0/0 --network-plugin=cni --kubeconfig=/etc/kubernetes/kubelet-kubeconfig  --v=2</span><br></pre></td></tr></table></figure>

<p><strong>取消封锁</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_9_centos ~]# kubectl uncordon 192.168.8.9</span><br><span class="line">node/192.168.8.9 uncordoned</span><br></pre></td></tr></table></figure>

<p><strong>验证效果</strong></p>
<p>查看节点信息正常</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_9_centos ~]# kubectl get nodes</span><br><span class="line">NAME        STATUS   ROLES    AGE    VERSION</span><br><span class="line">192.168.8.14   Ready    &lt;none&gt;   89d    v1.12.4-tke.10</span><br><span class="line">192.168.8.15   Ready    &lt;none&gt;   181d   v1.12.4-tke.3</span><br><span class="line">192.168.8.3    Ready    &lt;none&gt;   181d   v1.12.4-tke.3</span><br><span class="line">192.168.8.4    Ready    &lt;none&gt;   181d   v1.12.4-tke.3</span><br><span class="line">192.168.8.9    Ready    &lt;none&gt;   89d    v1.12.4-tke.10</span><br></pre></td></tr></table></figure>

<p>新建kubelet目录在data下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@VM_8_9_centos ~]# ls /data/kubelet/</span><br><span class="line">cpu_manager_state  plugin-containers  plugins  pods</span><br><span class="line">[root@VM_8_9_centos ~]# du -sh /data/kubelet/</span><br><span class="line">480K    /data/kubelet/</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2019/12/19/2019/12/2019-12-19-mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/19/2019/12/2019-12-19-mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB/index/" class="post-title-link" itemprop="url">MySQL数据库常用操作汇总</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-19 08:00:00" itemprop="dateCreated datePublished" datetime="2019-12-19T08:00:00+08:00">2019-12-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:33" itemprop="dateModified" datetime="2023-05-26T15:06:33+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/bigdata/" itemprop="url" rel="index"><span itemprop="name">bigdata</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>1.查询数据库各个库大小</strong></p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">  TABLE_SCHEMA AS &quot;库名&quot;,</span><br><span class="line">  TRUNCATE(SUM(`DATA_LENGTH`) / 1024 / 1024, 2) AS &quot;表所占空间（MB）&quot;,</span><br><span class="line">  TRUNCATE(SUM(`INDEX_LENGTH`) / 1024 / 1024, 2) AS &quot;索引所占空间（MB）&quot;,</span><br><span class="line">  TRUNCATE((SUM(`DATA_LENGTH`) + SUM(`INDEX_LENGTH`)) / 1024 / 1024,2) AS &quot;空间累计（MB）&quot;</span><br><span class="line">FROM</span><br><span class="line">  information_schema.`TABLES`</span><br><span class="line">GROUP BY `TABLE_SCHEMA`;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 16891974</span><br><span class="line">Server version: 5.6.28-cdb2016-log 20180130</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; SELECT</span><br><span class="line">    -&gt;   TABLE_SCHEMA AS &quot;库名&quot;,</span><br><span class="line">    -&gt;   TRUNCATE(SUM(`DATA_LENGTH`) / 1024 / 1024, 2) AS &quot;表所占空间（MB）&quot;,</span><br><span class="line">    -&gt;   TRUNCATE(SUM(`INDEX_LENGTH`) / 1024 / 1024, 2) AS &quot;索引所占空间（MB）&quot;,</span><br><span class="line">    -&gt;   TRUNCATE((SUM(`DATA_LENGTH`) + SUM(`INDEX_LENGTH`)) / 1024 / 1024,2) AS &quot;空间累计（MB）&quot;</span><br><span class="line">    -&gt; FROM</span><br><span class="line">    -&gt;   information_schema.`TABLES`</span><br><span class="line">    -&gt; GROUP BY `TABLE_SCHEMA`;</span><br><span class="line">+----------------------+-------------------------+----------------------------+----------------------+</span><br><span class="line">| 库名                 | 表所占空间（MB）        | 索引所占空间（MB）         | 空间累计（MB）       |</span><br><span class="line">+----------------------+-------------------------+----------------------------+----------------------+</span><br><span class="line">| test                |                60653.62 |                   29787.29 |             90440.92 |</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>2.查询并发</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show global status like &#x27;Threads%&#x27;;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 1868103</span><br><span class="line">Server version: 5.7.18-txsql-log 20190203</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt; show global status like &#x27;Threads%&#x27;;</span><br><span class="line">+-------------------+-------+</span><br><span class="line">| Variable_name     | Value |</span><br><span class="line">+-------------------+-------+</span><br><span class="line">| Threads_cached    | 121   |</span><br><span class="line">| Threads_connected | 202   |</span><br><span class="line">| Threads_created   | 326   |</span><br><span class="line">| Threads_running   | 2     |</span><br><span class="line">+-------------------+-------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MySQL [(none)]&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>3.查询从节点</strong> 语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show slave hosts;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MySQL [(none)]&gt; show slave hosts;</span><br><span class="line">+-----------+------+-------+-----------+--------------------------------------+</span><br><span class="line">| Server_id | Host | Port  | Master_id | Slave_UUID                           |</span><br><span class="line">+-----------+------+-------+-----------+--------------------------------------+</span><br><span class="line">|      6946 |      | 20144 |    129415 | cc7d2390-2791-11ea-8185-b8599f4e4f29 |</span><br><span class="line">|    129414 |      | 20130 |    129415 | 7b302430-2790-11ea-be67-58f9875cd401 |</span><br><span class="line">+-----------+------+-------+-----------+--------------------------------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2019/12/17/2019/12/2019-12-17-%E6%98%8E%E6%9C%9D%E6%96%87%E4%BA%BA%E8%AF%97%E8%AF%8D%E6%AC%A3%E8%B5%8F/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/17/2019/12/2019-12-17-%E6%98%8E%E6%9C%9D%E6%96%87%E4%BA%BA%E8%AF%97%E8%AF%8D%E6%AC%A3%E8%B5%8F/index/" class="post-title-link" itemprop="url">明朝文人诗词欣赏</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-17 08:00:00" itemprop="dateCreated datePublished" datetime="2019-12-17T08:00:00+08:00">2019-12-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:33" itemprop="dateModified" datetime="2023-05-26T15:06:33+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/poetry/" itemprop="url" rel="index"><span itemprop="name">poetry</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="杨慎"><a href="#杨慎" class="headerlink" title="杨慎"></a><strong>杨慎</strong></h3><blockquote>
<p>杨慎（1488年12月8日—1559年8月8日），字用修，初号月溪、升庵，又号逸史氏、博南山人、洞天真逸、滇南戍史、金马碧鸡老兵等。四川新都（今成都市新都区）人，祖籍庐陵。明代著名文学家，明代三才子之首，东阁大学士杨廷和之子。 杨慎于正德六年（1511年）状元及第，官翰林院修撰，参与编修《武宗实录》。武宗微行出居庸关，上疏抗谏。世宗继位，复为翰林修撰，任经筵讲官。嘉靖三年（1524年），因“大礼议”受廷杖，谪戍于云南永昌卫。曾率家奴助平寻甸安铨、武定凤朝文叛乱，此后虽往返于四川、云南等地，仍终老于永昌卫。嘉靖三十八年（1559年），杨慎卒于戍所，年七十二。明穆宗时追赠光禄寺少卿，明熹宗时追谥“文宪”，世称“杨文宪”。 杨慎在滇南三十年，博览群书。明代记诵之博，著述之富，推杨慎为第一。他又能文、词及散曲，论古考证之作范围颇广。其诗沉酣六朝，揽采晚唐，创为渊博靡丽之词，造诣深厚，独立于当时风气之外。著作达四百余种，后人辑为《升庵集》。</p>
</blockquote>
<p><strong>《临江仙·滚滚长江东逝水》</strong> 滚滚长江东逝水，浪花淘尽英雄。是非成败转头空。青山依旧在，几度夕阳红。 白发渔樵江渚上，惯看秋月春风。一壶浊酒喜相逢。古今多少事，都付笑谈中。</p>
<p><strong>《西江月 廿一史弹词说秦汉</strong> 施耐庵师弟明三大才子之一杨慎 落日西飞滚滚，大江东去滔滔。夜来今日又明朝，蓦地青春过了。 千古风流人物，一时多少英豪。龙争虎斗漫劬劳，落得一场谈笑。</p>
<h3 id="唐寅"><a href="#唐寅" class="headerlink" title="唐寅"></a><strong>唐寅</strong></h3><blockquote>
<p>唐寅 （明代著名画家、书法家、诗人） 唐寅（1470年3月6日－1524年1月7日），字伯虎，小字子畏，号六如居士，南直隶苏州府吴县（今江苏省苏州市）人，祖籍凉州晋昌郡。明朝著名书法家、画家、诗人。 成化二十一年（1485年），考中苏州府试第一名，进入府学读书。弘治十一年，考中南直隶乡试第一（解元），入京参加会试。弘治十二年，卷入徐经科场舞弊案，坐罪入狱，贬为浙藩小吏。从此，丧失科场进取心，游荡江湖，埋没于诗画之间，终成一代名画家 。唐寅晚年生活穷困，依靠朋友接济。嘉靖二年十二月二日，病逝，时年五十四岁。 绘画宗法李唐、刘松年，融会南北画派，笔墨细秀，布局疏朗，风格秀逸清俊。人物画师承唐代传统，色彩艳丽清雅，体态优美，造型准确；亦工写意人物，笔简意赅，饶有意趣。其花鸟画长于水墨写意，洒脱秀逸。书法奇峭俊秀，取法赵孟頫。 绘画上与沈周、文徵明、仇英并称“吴门四家”，又称“明四家”。诗文上，与祝允明、文徵明、徐祯卿并称“吴中四才子”。</p>
</blockquote>
<p><strong>《桃花庵歌》</strong> 桃花坞里桃花庵，桃花庵里桃花仙； 桃花仙人种桃树，又摘桃花卖酒钱。 酒醒只在花前坐，酒醉还须花下眠； 半醒半醉日复日，花落花开年复年。 但愿老死花酒间，不愿鞠躬车马前； 车尘马足富者趣，酒盏花枝贫者缘。 若将富贵比贫贱，一在平地一在天； 若将贫贱比车马，他得驱驰我得闲。 别人笑我忒疯癫，我笑别人看不穿； 不见五陵豪杰墓，无花无酒锄做田。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2019/12/06/2019/12/2019-12-06-%E8%B0%88%E8%AF%BB%E4%B9%A6%E8%B0%88%E5%8A%A8%E8%B0%88%E9%9D%99/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/06/2019/12/2019-12-06-%E8%B0%88%E8%AF%BB%E4%B9%A6%E8%B0%88%E5%8A%A8%E8%B0%88%E9%9D%99/index/" class="post-title-link" itemprop="url">谈读书谈动谈静</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-06 08:00:00" itemprop="dateCreated datePublished" datetime="2019-12-06T08:00:00+08:00">2019-12-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:33" itemprop="dateModified" datetime="2023-05-26T15:06:33+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/confucian/" itemprop="url" rel="index"><span itemprop="name">confucian</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>朱光潜</strong></p>
<p><strong>一、谈读书</strong></p>
<blockquote>
<p>关于读书方法。我不能多说，只有两点须在此约略提起。第一，凡值得读的书至少须读两遍。第一遍须快读，着眼在醒豁全篇大旨与特色。第二遍须慢读，须以批评态度衡量书的内容。第二，读过一本书，须笔记纲要和精彩的地方和你自己的意见。记笔记不特可以帮助你记忆，而且可以逼得你仔细，刺激你思考</p>
</blockquote>
<p><strong>二、谈动</strong></p>
<blockquote>
<p>你发愁时并不一定要著书，你就读几篇哀歌，听一幕悲剧，借酒浇愁，也可以大畅胸怀。从前我很疑惑何以剧情愈悲而读之愈觉其快意，近来才悟得这个泄与郁的道理。 总之，愁生于郁，解愁的方法在泄；郁由于静止，求泄的方法在动。从前儒家讲心性的话，从近代心理学眼光看，都很粗疏，只有孟子的“尽性”一个主张，含义非常深广。一切道德学说都不免肤浅，如果不从“尽性”的基点出发。如果把“尽性”两字懂得透彻，我以为生活目的在此，生活方法也就在此。 朋友，闲愁最苦！愁来愁去，人生还是那么样一个人生，世界也还是那么样一个世界。假如把自己看得伟大，你对于烦恼，当有“不屑”的看待；假如把自己看得渺小，你对于烦恼，当有“不值得”的看待。</p>
</blockquote>
<p><strong>三、谈静</strong></p>
<blockquote>
<p>朱子有一首诗说：“半亩方塘一鉴开，天光云影共徘徊，问渠那得清如许？为有源头活水来。”这是一种绝美的境界。</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2019/12/04/2019/12/2019-12-04-wrdpress%E8%AE%BE%E7%BD%AE%E8%85%BE%E8%AE%AF%E5%85%AC%E7%9B%8A404%E9%A1%B5%E9%9D%A2/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/04/2019/12/2019-12-04-wrdpress%E8%AE%BE%E7%BD%AE%E8%85%BE%E8%AE%AF%E5%85%AC%E7%9B%8A404%E9%A1%B5%E9%9D%A2/index/" class="post-title-link" itemprop="url">Wordpress设置腾讯公益404页面</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-04 08:00:00" itemprop="dateCreated datePublished" datetime="2019-12-04T08:00:00+08:00">2019-12-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:33" itemprop="dateModified" datetime="2023-05-26T15:06:33+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/dev/" itemprop="url" rel="index"><span itemprop="name">dev</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Wordpress主题会自带404页面，如果需要替换成自定义的需要修改404.php页面，这里以腾讯公益404页面为例介绍下怎样自定义页面，如果大家没有特定的404页面可以设置成公益404页面。</p>
<p><strong>1.找到404页面设置的地方</strong> 一般在网站根目录下wp-content&#x2F;themes&#x2F;你的主题下，我的主题是sela，所以具体位置是wp-content&#x2F;themes&#x2F;sela&#x2F;404.php</p>
<p><strong>2.备份原页面修改成新的</strong> 备份原404.php页面并修改如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">header(&quot;HTTP/1.0 404 Not Found&quot;);</span><br><span class="line">include &#x27;404.html&#x27;;</span><br><span class="line">die();</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<p>其中404.html内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">   &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">   &lt;title&gt;公益404&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js&quot; charset=&quot;utf-8&quot; homePageUrl=&quot;https://minminmsn.com&quot; homePageName=&quot;回到我的主页&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>3.测试访问效果</strong> 随意访问一个不存在的链接如<a target="_blank" rel="noopener" href="https://minminmsn.com/404" title="minminmsn.com/404">minminmsn.com&#x2F;404</a>,希望她早日回家!</p>
<blockquote>
<p><img src="/images/404.jpg"></p>
</blockquote>
<p><strong>4.补充搜索结果找不到页时设置404公益页面</strong> 修改wp-content&#x2F;themes&#x2F;sela&#x2F;search.php将其中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php else : ?&gt;</span><br><span class="line"></span><br><span class="line">            &lt;?php get_template_part( &#x27;content&#x27;, &#x27;none&#x27; ); ?&gt;</span><br><span class="line"></span><br><span class="line">        &lt;?php endif; ?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>改为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php else : ?&gt;</span><br><span class="line"></span><br><span class="line">                &lt;?php header(&quot;HTTP/1.0 404 Not Found&quot;); include &#x27;404.html&#x27;; die(); ?&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php endif; ?&gt;</span><br></pre></td></tr></table></figure>

<p>完整内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">/**</span><br><span class="line"> * The template for displaying Search Results pages.</span><br><span class="line"> *</span><br><span class="line"> * @package Sela</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">get_header(); ?&gt;</span><br><span class="line"></span><br><span class="line">    &lt;section id=&quot;primary&quot; class=&quot;content-area&quot;&gt;</span><br><span class="line">        &lt;main id=&quot;main&quot; class=&quot;site-main&quot; role=&quot;main&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;?php if ( have_posts() ) : ?&gt;</span><br><span class="line"></span><br><span class="line">            &lt;header class=&quot;page-header&quot;&gt;</span><br><span class="line">                &lt;h1 class=&quot;page-title&quot;&gt;&lt;?php printf( __( &#x27;Search Results for: %s&#x27;, &#x27;sela&#x27; ), &#x27;&lt;span&gt;&#x27; . get_search_query() . &#x27;&lt;/span&gt;&#x27; ); ?&gt;&lt;/h1&gt;</span><br><span class="line">            &lt;/header&gt;&lt;!-- .page-header --&gt;</span><br><span class="line"></span><br><span class="line">            &lt;?php /* Start the Loop */ ?&gt;</span><br><span class="line">            &lt;?php while ( have_posts() ) : the_post(); ?&gt;</span><br><span class="line"></span><br><span class="line">                &lt;?php get_template_part( &#x27;content&#x27;, &#x27;search&#x27; ); ?&gt;</span><br><span class="line"></span><br><span class="line">            &lt;?php endwhile; ?&gt;</span><br><span class="line"></span><br><span class="line">            &lt;?php sela_content_nav( &#x27;nav-below&#x27; ); ?&gt;</span><br><span class="line"></span><br><span class="line">        &lt;?php else : ?&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;?php header(&quot;HTTP/1.0 404 Not Found&quot;); include &#x27;404.html&#x27;; die(); ?&gt;</span><br><span class="line"></span><br><span class="line">        &lt;?php endif; ?&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/main&gt;&lt;!-- #main --&gt;</span><br><span class="line">    &lt;/section&gt;&lt;!-- #primary --&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php get_sidebar(); ?&gt;</span><br><span class="line">&lt;?php get_footer(); ?&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2019/12/03/2019/12/2019-12-03-%E4%BB%8E%E8%BD%AF%E4%BB%B6%E9%83%A8%E7%BD%B2%E7%9C%8B%E8%BF%90%E7%BB%B4%E7%9A%84%E5%9B%9B%E7%A7%8D%E5%A2%83%E7%95%8C/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/03/2019/12/2019-12-03-%E4%BB%8E%E8%BD%AF%E4%BB%B6%E9%83%A8%E7%BD%B2%E7%9C%8B%E8%BF%90%E7%BB%B4%E7%9A%84%E5%9B%9B%E7%A7%8D%E5%A2%83%E7%95%8C/index/" class="post-title-link" itemprop="url">从软件部署看运维的四种境界</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-03 08:00:00" itemprop="dateCreated datePublished" datetime="2019-12-03T08:00:00+08:00">2019-12-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:33" itemprop="dateModified" datetime="2023-05-26T15:06:33+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/op/" itemprop="url" rel="index"><span itemprop="name">op</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://blog.51cto.com/jerrymin/1678375" title="老文：从软件部署看运维的四种境界">老文：从软件部署看运维的四种境界</a></p>
<p>首先，博文的名字很难取啊，叫什么都感觉不太对，这里就暂定这样吧。不可否认这里有点哗众取宠的动机，不谈境界总感觉格局不够大哈。</p>
<p>中国哲学家冯友兰先生说过，人生有四种境界：自然境界、功利境界、道德境界、天地境界。经过长期的部署安装软件服务，感觉最近手熟多了，通过实践可以得出一些方法，方法总结起来就可以组成一套方法论了，但作为国人，还是用格局，境界之类的词更有亲切感。</p>
<p>不多说废话了，下面上干货。（我所理解的干货，也可能不是，牛人请忽略）</p>
<p>下面通过具体的安装redis这个小软件来说明问题，我分别附上四种安装方法从而感悟出四种不同的境界。</p>
<p><strong>一.传统手动安装</strong></p>
<p>著名的三板斧</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">config</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line">wget http://download.redis.io/releases/redis-2.8.17.tar.gz</span><br><span class="line">tar -zxvf redis-2.8.17.tar.gz</span><br><span class="line">cd  redis-2.8.17.tar.gz</span><br></pre></td></tr></table></figure>

<p>先安装tcl,否则下面会报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">yum install tcl -y</span><br><span class="line">make MALLOC=libc </span><br><span class="line">make test</span><br><span class="line">make install </span><br><span class="line">/root/redis-2.8.17/utils/install_server.sh </span><br><span class="line">Welcome to the redis service installer</span><br><span class="line">This script will help you easily set up a running redis server</span><br><span class="line">Please select the redis port for this instance: [6379] </span><br><span class="line">Selecting default: 6379</span><br><span class="line">Please select the redis config file name [/etc/redis/6379.conf] </span><br><span class="line">Selected default - /etc/redis/6379.conf</span><br><span class="line">Please select the redis log file name [/var/log/redis_6379.log] /data/redis/redis_6379.log</span><br><span class="line">Please select the data directory for this instance [/var/lib/redis/6379] /data/redis/6379</span><br><span class="line">Please select the redis executable path [/usr/local/bin/redis-server] </span><br><span class="line">Selected config:</span><br><span class="line">Port           : 6379</span><br><span class="line">Config file    : /etc/redis/6379.conf</span><br><span class="line">Log file       : /data/redis/redis_6379.log</span><br><span class="line">Data dir       : /data/redis/6379</span><br><span class="line">Executable     : /usr/local/bin/redis-server</span><br><span class="line">Cli Executable : /usr/local/bin/redis-cli</span><br><span class="line">Is this ok? Then press ENTER to go on or Ctrl-C to abort.</span><br><span class="line">Copied /tmp/6379.conf =&gt; /etc/init.d/redis_6379</span><br><span class="line">Installing service...</span><br><span class="line">Successfully added to chkconfig!</span><br><span class="line">Successfully added to runlevels 345!</span><br><span class="line">Starting Redis server...</span><br><span class="line">Installation successful!</span><br></pre></td></tr></table></figure>

<p>这种传统安装方法主要是费时，例如想redis这个1M多的小软件安装多花费了半个多小时，这种方法类似冯友兰的自然境界。这种方法有一个好处就是能让你快速熟悉一个陌生的软件，第一次安装不得不走一遍这样的流程。</p>
<p><strong>二.脚本安装</strong></p>
<p>随着时间的推移，服务器越来越多，自己每天都重复这样的工作是不是觉得很烦，很没有技术含量不能提高呢？大部分运维人员都不会满足于现状，特别是当老板说找一个快速部署的方法奖励2K时，是不是动力来了，此时天时地利人和都来了，于是就开始想办法了，大部分人最先想到的就是脚本。</p>
<p>关于脚本呢，我本人bash都不是很熟，但是拷贝修改别人的还可以，更别说3P(别想错了，好多人说要学会(python,perl,php),如果你是天生的技术高手这些都会或者会一两种当然是最好了。</p>
<p>如果对3P不感兴趣或者力不从心也没关系，只要学会shell就行了，至少这个阶段够用。</p>
<p>只安装redis这一个服务弄一个脚本其实还显现不出脚本此时的好处，要是一个LNMP环境，脚本的优势就突显出来了，键盘Enter键一敲，你就可以去喝咖啡了，但是这时候一般你还有其他事情，两个小时后基本环境就完成了。</p>
<p>要是redis真写一个简单的脚本，就是上述命令行之前加一个#!&#x2F;bin&#x2F;bash就行了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">wget http://download.redis.io/releases/redis-2.8.17.tar.gz</span><br><span class="line">tar -zxf redis-2.8.17.tar.gz</span><br><span class="line">cd  redis-2.8.17.tar.gz</span><br><span class="line">yum install tcl -y |tail -n 6</span><br><span class="line">make MALLOC=libc   |tail -n 6</span><br><span class="line">make test          |tail -n 6</span><br><span class="line">make install    |tail -n 6</span><br><span class="line">/root/redis-2.8.17/utils/install_server.sh </span><br></pre></td></tr></table></figure>

<p>友情提示：这脚本我没有试用过，不一定能用。因为这时我对这种安装方式还不是很满意。</p>
<p><strong>三.绿色安装</strong></p>
<p>绿色安装，这个词我以前听到最多是windows环境下，linux下倒是很少听说，难道linux喜欢难度高的操作方法对简单易行的方法不感冒吗？哪这样是不是有点不道德啊？所谓的道德境界我觉得应该是这样的：把复杂的事情简单化，越简单越好。我不认为简单是没有技术含量，简单是我一生追求的最高境界。</p>
<p>说到这里，那有什么根基支持绿色安装了，其实我想我有一段时间忘记了一句含义很深的话：一切皆文件！我记得刚开始学习linux时候就听说过这句话，但是一直没有时常想起这句话。以至于曾经走过不少弯路。话说回来，不走这么多的弯路，对这句话的领悟也不会这么深。</p>
<p>回到正题，绿色安装就是把第一次在一个环境安装的软件包，打个包，拷贝过来就行了。比如这里的redis只需要拷贝二进制程序和配置文件即可，二进制程序唯一要依赖的就是一些开发库之类的软件,这个得提前安装。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum install tcl -y</span><br><span class="line">mkdir /etc/redis</span><br><span class="line">ls /etc/redis</span><br><span class="line">6379.conf</span><br><span class="line">ls /etc/init.d</span><br><span class="line">redis_6379 </span><br><span class="line">tar zxvf redis_data.tar.gz  -C /</span><br><span class="line">tar zxvf redis.2.7.17.tar.gz -C /</span><br></pre></td></tr></table></figure>

<p>这里redis第一次安装分布了几个目录，如果第一次安装时指定了安装目录，只需要拷贝那一个整目录过来就行了。是不是很简单啊？</p>
<p><strong>四.克隆模板</strong></p>
<p>第四种境界叫天地境界，用在这里有点亵渎的感觉，但是管不了那么多了，为了博文的完整性我已经很拼了。天地境界我理解的是天人合一，难道让我们人机合一不成？那么深奥的问题我也考虑不了，都说了我很简单的。幸亏现在虚拟化技术很发达，千万不要说云计算啊我对哪个比较过敏，我还没有看到哪个搞云计算的活人在我面前呢。</p>
<p>其实这种方法和第三种差不多，只是这种连系统一块都部署了，操作系统不是最大的软件吗？对了，哪个谁不是说过mac和windows是最大的恶意程序嘛！</p>
<p>这种方法步骤也比较简单，但是格局大多了。比如各种所谓的云的各种SAAS，由于要那redis举例，我记得×××的redis云缓存服务器，应该比我这种说的高一个层次。这时我突然想把这个境界一分为二，因为我突然想加一种情况进去。</p>
<p>第一种我猜大家已经想到了： 1. 在虚拟机或者物理机上部署redis服务，可用第三种方法。</p>
<ol start="2">
<li><p>PtoV或者VtoV的方法转换成模板。</p>
</li>
<li><p>下次要用到时候直接从模板部署虚拟机即可，目前哪一种虚拟化技术都支持这个。</p>
</li>
</ol>
<p>第二种我这里讲的是分布式集群环境，这个不是每个软件都通用，正好这里举例的redis通用</p>
<ol>
<li><p>部署redis集群（redis3.0支持，不过我没有试过redis集群，我试过codis集群）</p>
</li>
<li><p>下次有需求时，直接在集群上（这里以codis集群举例）扩展codis-group再添加codis-server实例即可</p>
</li>
<li><p>这个分布式集群环境支持横向扩展，在线伸缩，可以满足各种苛刻的话需求</p>
</li>
</ol>
<p>话说到这里改结束了，本来还想说点什么可以是说不出来，那个天地境界确实不好理解啊。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://minminmsn.github.io/2019/12/03/2019/12/2019-12-03-%E5%8F%91%E7%8E%B0%E4%BD%A0%E5%AD%A9%E5%AD%90%E7%9A%84%E8%B4%A2%E5%AF%8C%E5%9F%BA%E5%9B%A0/index/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jerry Min">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="MinMinMsn">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/03/2019/12/2019-12-03-%E5%8F%91%E7%8E%B0%E4%BD%A0%E5%AD%A9%E5%AD%90%E7%9A%84%E8%B4%A2%E5%AF%8C%E5%9F%BA%E5%9B%A0/index/" class="post-title-link" itemprop="url">发现你孩子的财富基因</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-12-03 08:00:00" itemprop="dateCreated datePublished" datetime="2019-12-03T08:00:00+08:00">2019-12-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-26 15:06:33" itemprop="dateModified" datetime="2023-05-26T15:06:33+08:00">2023-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/financial/" itemprop="url" rel="index"><span itemprop="name">financial</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>罗伯特·清崎 莎伦·莱希特</strong></p>
<ul>
<li><strong>想象力比知识本身更重要</strong></li>
</ul>
<p>有一天，当一位杰出的发明家提出掌握事实性的知识非常重要时，爱因斯坦表示不同意。他说：“一个人不需要上大学去学习事实性知识，这些知识通过读书就可以学到。大学教育的价值应当体现在培养人的思考方式上。”他还说：“想象力比知识本身更重要。” 有一次，一些记者采访爱因斯坦，其中一个人问道：“声音的速度是多少？”爱因斯坦答道：“我不知道，我不会用脑子去记一些能在书本中找到的信息。”</p>
<ul>
<li><strong>永远不要说“我买不起”</strong></li>
</ul>
<p>富爸爸不是一个受过训练的心理治疗专家，但他聪明地知道金钱只是一种观念。他不许我和他的儿子说“我买不起”之类的话，这类话语会使我们改变对自己的感性认识。他希望我们说“我怎样才能买得起”。我意识到如果我不停地说“我买不起”，就是在强化我成为一个穷人的感性认识；而说“我怎样才能买得起”则强化了我成为一个富人的感性认识。我同样建议你不要在你的孩子面前说“我买不起”。当孩子向你要钱时，你应该说：“在一张表上列出你能做的合理合法的10件事，那样你不用向我要钱就能买得起你想要的东西。”</p>
<ul>
<li><strong>为什么不花钱就能挣到钱</strong></li>
</ul>
<p>常有人问我：“不用花钱能挣钱吗？”而我的回答通常是：“是的，金钱只是一种观念，而观念由语言来定义。所以你越能谨慎地选择你使用的词汇，你就有更多的机会去改善你的财务状况。”</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jerry Min</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">260</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jerry Min</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
